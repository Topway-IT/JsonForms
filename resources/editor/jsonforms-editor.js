/**
  * @name JSON Editor
  * @description JSON Schema Based Editor
  * Refactor of https://github.com/json-editor/json-editor
  * @version "0.7"
  * @author https://github.com/json-editor/json-editor/graphs/contributors
  * @author thomas-topway-it support@topway.it
  * @license MIT
  * @example see README.md and docs/ for requirements, examples and usage info
  */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(()=>(()=>{"use strict";var t={9306:(t,e,r)=>{var n=r(4901),i=r(6823),o=TypeError;t.exports=function(t){if(n(t))return t;throw new o(i(t)+" is not a function")}},5548:(t,e,r)=>{var n=r(3517),i=r(6823),o=TypeError;t.exports=function(t){if(n(t))return t;throw new o(i(t)+" is not a constructor")}},3506:(t,e,r)=>{var n=r(3925),i=String,o=TypeError;t.exports=function(t){if(n(t))return t;throw new o("Can't set "+i(t)+" as a prototype")}},6469:(t,e,r)=>{var n=r(8227),i=r(2360),o=r(4913).f,a=n("unscopables"),s=Array.prototype;void 0===s[a]&&o(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},7829:(t,e,r)=>{var n=r(8183).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},679:(t,e,r)=>{var n=r(1625),i=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new i("Incorrect invocation")}},8551:(t,e,r)=>{var n=r(34),i=String,o=TypeError;t.exports=function(t){if(n(t))return t;throw new o(i(t)+" is not an object")}},5652:(t,e,r)=>{var n=r(9039);t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},235:(t,e,r)=>{var n=r(9213).forEach,i=r(4598)("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},7916:(t,e,r)=>{var n=r(6080),i=r(9565),o=r(8981),a=r(6319),s=r(4209),u=r(3517),c=r(6198),l=r(4659),h=r(81),p=r(851),f=Array;t.exports=function(t){var e=o(t),r=u(this),d=arguments.length,y=d>1?arguments[1]:void 0,m=void 0!==y;m&&(y=n(y,d>2?arguments[2]:void 0));var v,b,g,w,O,j,_=p(e),k=0;if(!_||this===f&&s(_))for(v=c(e),b=r?new this(v):f(v);v>k;k++)j=m?y(e[k],k):e[k],l(b,k,j);else for(b=r?new this:[],O=(w=h(e,_)).next;!(g=i(O,w)).done;k++)j=m?a(w,y,[g.value,k],!0):g.value,l(b,k,j);return b.length=k,b}},9617:(t,e,r)=>{var n=r(5397),i=r(5610),o=r(6198),a=function(t){return function(e,r,a){var s=n(e),u=o(s);if(0===u)return!t&&-1;var c,l=i(a,u);if(t&&r!=r){for(;u>l;)if((c=s[l++])!=c)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},9213:(t,e,r)=>{var n=r(6080),i=r(9504),o=r(7055),a=r(8981),s=r(6198),u=r(1469),c=i([].push),l=function(t){var e=1===t,r=2===t,i=3===t,l=4===t,h=6===t,p=7===t,f=5===t||h;return function(d,y,m,v){for(var b,g,w=a(d),O=o(w),j=s(O),_=n(y,m),k=0,x=v||u,E=e?x(d,j):r||p?x(d,0):void 0;j>k;k++)if((f||k in O)&&(g=_(b=O[k],k,w),t))if(e)E[k]=g;else if(g)switch(t){case 3:return!0;case 5:return b;case 6:return k;case 2:c(E,b)}else switch(t){case 4:return!1;case 7:c(E,b)}return h?-1:i||l?l:E}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},597:(t,e,r)=>{var n=r(9039),i=r(8227),o=r(7388),a=i("species");t.exports=function(t){return o>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4598:(t,e,r)=>{var n=r(9039);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},926:(t,e,r)=>{var n=r(9306),i=r(8981),o=r(7055),a=r(6198),s=TypeError,u="Reduce of empty array with no initial value",c=function(t){return function(e,r,c,l){var h=i(e),p=o(h),f=a(h);if(n(r),0===f&&c<2)throw new s(u);var d=t?f-1:0,y=t?-1:1;if(c<2)for(;;){if(d in p){l=p[d],d+=y;break}if(d+=y,t?d<0:f<=d)throw new s(u)}for(;t?d>=0:f>d;d+=y)d in p&&(l=r(l,p[d],d,h));return l}};t.exports={left:c(!1),right:c(!0)}},4527:(t,e,r)=>{var n=r(3724),i=r(4376),o=TypeError,a=Object.getOwnPropertyDescriptor,s=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=s?function(t,e){if(i(t)&&!a(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7680:(t,e,r)=>{var n=r(9504);t.exports=n([].slice)},4488:(t,e,r)=>{var n=r(7680),i=Math.floor,o=function(t,e){var r=t.length;if(r<8)for(var a,s,u=1;u<r;){for(s=u,a=t[u];s&&e(t[s-1],a)>0;)t[s]=t[--s];s!==u++&&(t[s]=a)}else for(var c=i(r/2),l=o(n(t,0,c),e),h=o(n(t,c),e),p=l.length,f=h.length,d=0,y=0;d<p||y<f;)t[d+y]=d<p&&y<f?e(l[d],h[y])<=0?l[d++]:h[y++]:d<p?l[d++]:h[y++];return t};t.exports=o},7433:(t,e,r)=>{var n=r(4376),i=r(3517),o=r(34),a=r(8227)("species"),s=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(i(e)&&(e===s||n(e.prototype))||o(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?s:e}},1469:(t,e,r)=>{var n=r(7433);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},6319:(t,e,r)=>{var n=r(8551),i=r(9539);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){i(t,"throw",e)}}},4428:(t,e,r)=>{var n=r(8227)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!i)return!1}catch(t){return!1}var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},t(o)}catch(t){}return r}},4576:(t,e,r)=>{var n=r(9504),i=n({}.toString),o=n("".slice);t.exports=function(t){return o(i(t),8,-1)}},6955:(t,e,r)=>{var n=r(2140),i=r(4901),o=r(4576),a=r(8227)("toStringTag"),s=Object,u="Arguments"===o(function(){return arguments}());t.exports=n?o:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=s(t),a))?r:u?o(e):"Object"===(n=o(e))&&i(e.callee)?"Arguments":n}},6938:(t,e,r)=>{var n=r(2360),i=r(2106),o=r(6279),a=r(6080),s=r(679),u=r(4117),c=r(2652),l=r(1088),h=r(2529),p=r(7633),f=r(3724),d=r(3451).fastKey,y=r(1181),m=y.set,v=y.getterFor;t.exports={getConstructor:function(t,e,r,l){var h=t((function(t,i){s(t,p),m(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),f||(t.size=0),u(i)||c(i,t[l],{that:t,AS_ENTRIES:r})})),p=h.prototype,y=v(e),b=function(t,e,r){var n,i,o=y(t),a=g(t,e);return a?a.value=r:(o.last=a={index:i=d(e,!0),key:e,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),f?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},g=function(t,e){var r,n=y(t),i=d(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key===e)return r};return o(p,{clear:function(){for(var t=y(this),e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),e=e.next;t.first=t.last=void 0,t.index=n(null),f?t.size=0:this.size=0},delete:function(t){var e=this,r=y(e),n=g(e,t);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first===n&&(r.first=i),r.last===n&&(r.last=o),f?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=y(this),n=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),o(p,r?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return b(this,0===t?0:t,e)}}:{add:function(t){return b(this,t=0===t?0:t,t)}}),f&&i(p,"size",{configurable:!0,get:function(){return y(this).size}}),h},setStrong:function(t,e,r){var n=e+" Iterator",i=v(e),o=v(n);l(t,e,(function(t,e){m(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?h("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=void 0,h(void 0,!0))}),r?"entries":"values",!r,!0),p(e)}}},4006:(t,e,r)=>{var n=r(9504),i=r(6279),o=r(3451).getWeakData,a=r(679),s=r(8551),u=r(4117),c=r(34),l=r(2652),h=r(9213),p=r(9297),f=r(1181),d=f.set,y=f.getterFor,m=h.find,v=h.findIndex,b=n([].splice),g=0,w=function(t){return t.frozen||(t.frozen=new O)},O=function(){this.entries=[]},j=function(t,e){return m(t.entries,(function(t){return t[0]===e}))};O.prototype={get:function(t){var e=j(this,t);if(e)return e[1]},has:function(t){return!!j(this,t)},set:function(t,e){var r=j(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=v(this.entries,(function(e){return e[0]===t}));return~e&&b(this.entries,e,1),!!~e}},t.exports={getConstructor:function(t,e,r,n){var h=t((function(t,i){a(t,f),d(t,{type:e,id:g++,frozen:void 0}),u(i)||l(i,t[n],{that:t,AS_ENTRIES:r})})),f=h.prototype,m=y(e),v=function(t,e,r){var n=m(t),i=o(s(e),!0);return!0===i?w(n).set(e,r):i[n.id]=r,t};return i(f,{delete:function(t){var e=m(this);if(!c(t))return!1;var r=o(t);return!0===r?w(e).delete(t):r&&p(r,e.id)&&delete r[e.id]},has:function(t){var e=m(this);if(!c(t))return!1;var r=o(t);return!0===r?w(e).has(t):r&&p(r,e.id)}}),i(f,r?{get:function(t){var e=m(this);if(c(t)){var r=o(t);return!0===r?w(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return v(this,t,e)}}:{add:function(t){return v(this,t,!0)}}),h}}},6468:(t,e,r)=>{var n=r(6518),i=r(4475),o=r(9504),a=r(2796),s=r(6840),u=r(3451),c=r(2652),l=r(679),h=r(4901),p=r(4117),f=r(34),d=r(9039),y=r(4428),m=r(687),v=r(3167);t.exports=function(t,e,r){var b=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),w=b?"set":"add",O=i[t],j=O&&O.prototype,_=O,k={},x=function(t){var e=o(j[t]);s(j,t,"add"===t?function(t){return e(this,0===t?0:t),this}:"delete"===t?function(t){return!(g&&!f(t))&&e(this,0===t?0:t)}:"get"===t?function(t){return g&&!f(t)?void 0:e(this,0===t?0:t)}:"has"===t?function(t){return!(g&&!f(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(a(t,!h(O)||!(g||j.forEach&&!d((function(){(new O).entries().next()})))))_=r.getConstructor(e,t,b,w),u.enable();else if(a(t,!0)){var E=new _,S=E[w](g?{}:-0,1)!==E,P=d((function(){E.has(1)})),C=y((function(t){new O(t)})),T=!g&&d((function(){for(var t=new O,e=5;e--;)t[w](e,e);return!t.has(-0)}));C||((_=e((function(t,e){l(t,j);var r=v(new O,t,_);return p(e)||c(e,r[w],{that:r,AS_ENTRIES:b}),r}))).prototype=j,j.constructor=_),(P||T)&&(x("delete"),x("has"),b&&x("get")),(T||S)&&x(w),g&&j.clear&&delete j.clear}return k[t]=_,n({global:!0,constructor:!0,forced:_!==O},k),m(_,t),g||r.setStrong(_,t,b),_}},7740:(t,e,r)=>{var n=r(9297),i=r(5031),o=r(7347),a=r(4913);t.exports=function(t,e,r){for(var s=i(e),u=a.f,c=o.f,l=0;l<s.length;l++){var h=s[l];n(t,h)||r&&n(r,h)||u(t,h,c(e,h))}}},1436:(t,e,r)=>{var n=r(8227)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},2211:(t,e,r)=>{var n=r(9039);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},7240:(t,e,r)=>{var n=r(9504),i=r(7750),o=r(655),a=/"/g,s=n("".replace);t.exports=function(t,e,r,n){var u=o(i(t)),c="<"+e;return""!==r&&(c+=" "+r+'="'+s(o(n),a,"&quot;")+'"'),c+">"+u+"</"+e+">"}},2529:t=>{t.exports=function(t,e){return{value:t,done:e}}},6699:(t,e,r)=>{var n=r(3724),i=r(4913),o=r(6980);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},6980:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4659:(t,e,r)=>{var n=r(3724),i=r(4913),o=r(6980);t.exports=function(t,e,r){n?i.f(t,e,o(0,r)):t[e]=r}},380:(t,e,r)=>{var n=r(9504),i=r(9039),o=r(533).start,a=RangeError,s=isFinite,u=Math.abs,c=Date.prototype,l=c.toISOString,h=n(c.getTime),p=n(c.getUTCDate),f=n(c.getUTCFullYear),d=n(c.getUTCHours),y=n(c.getUTCMilliseconds),m=n(c.getUTCMinutes),v=n(c.getUTCMonth),b=n(c.getUTCSeconds);t.exports=i((function(){return"0385-07-25T07:06:39.999Z"!==l.call(new Date(-50000000000001))}))||!i((function(){l.call(new Date(NaN))}))?function(){if(!s(h(this)))throw new a("Invalid time value");var t=this,e=f(t),r=y(t),n=e<0?"-":e>9999?"+":"";return n+o(u(e),n?6:4,0)+"-"+o(v(t)+1,2,0)+"-"+o(p(t),2,0)+"T"+o(d(t),2,0)+":"+o(m(t),2,0)+":"+o(b(t),2,0)+"."+o(r,3,0)+"Z"}:l},3640:(t,e,r)=>{var n=r(8551),i=r(4270),o=TypeError;t.exports=function(t){if(n(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw new o("Incorrect hint");return i(this,t)}},2106:(t,e,r)=>{var n=r(283),i=r(4913);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),i.f(t,e,r)}},6840:(t,e,r)=>{var n=r(4901),i=r(4913),o=r(283),a=r(9433);t.exports=function(t,e,r,s){s||(s={});var u=s.enumerable,c=void 0!==s.name?s.name:e;if(n(r)&&o(r,c,s),s.global)u?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=r:i.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},6279:(t,e,r)=>{var n=r(6840);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},9433:(t,e,r)=>{var n=r(4475),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},4606:(t,e,r)=>{var n=r(6823),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw new i("Cannot delete property "+n(e)+" of "+n(t))}},3724:(t,e,r)=>{var n=r(9039);t.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4055:(t,e,r)=>{var n=r(4475),i=r(34),o=n.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},6837:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},7400:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9296:(t,e,r)=>{var n=r(4055)("span").classList,i=n&&n.constructor&&n.constructor.prototype;t.exports=i===Object.prototype?void 0:i},8834:(t,e,r)=>{var n=r(9392).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},7290:(t,e,r)=>{var n=r(516),i=r(9088);t.exports=!n&&!i&&"object"==typeof window&&"object"==typeof document},6763:t=>{t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},516:t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},3202:(t,e,r)=>{var n=r(9392);t.exports=/MSIE|Trident/.test(n)},28:(t,e,r)=>{var n=r(9392);t.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},8119:(t,e,r)=>{var n=r(9392);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},9088:(t,e,r)=>{var n=r(4475),i=r(4576);t.exports="process"===i(n.process)},6765:(t,e,r)=>{var n=r(9392);t.exports=/web0s(?!.*chrome)/i.test(n)},9392:t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7388:(t,e,r)=>{var n,i,o=r(4475),a=r(9392),s=o.process,u=o.Deno,c=s&&s.versions||u&&u.version,l=c&&c.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),t.exports=i},9160:(t,e,r)=>{var n=r(9392).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},8727:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:(t,e,r)=>{var n=r(4475),i=r(7347).f,o=r(6699),a=r(6840),s=r(9433),u=r(7740),c=r(2796);t.exports=function(t,e){var r,l,h,p,f,d=t.target,y=t.global,m=t.stat;if(r=y?n:m?n[d]||s(d,{}):n[d]&&n[d].prototype)for(l in e){if(p=e[l],h=t.dontCallGetSet?(f=i(r,l))&&f.value:r[l],!c(y?l:d+(m?".":"#")+l,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;u(p,h)}(t.sham||h&&h.sham)&&o(p,"sham",!0),a(r,l,p,t)}}},9039:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9228:(t,e,r)=>{r(7495);var n=r(9565),i=r(6840),o=r(7323),a=r(9039),s=r(8227),u=r(6699),c=s("species"),l=RegExp.prototype;t.exports=function(t,e,r,h){var p=s(t),f=!a((function(){var e={};return e[p]=function(){return 7},7!==""[t](e)})),d=f&&!a((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e}));if(!f||!d||r){var y=/./[p],m=e(p,""[t],(function(t,e,r,i,a){var s=e.exec;return s===o||s===l.exec?f&&!a?{done:!0,value:n(y,e,r,i)}:{done:!0,value:n(t,r,e,i)}:{done:!1}}));i(String.prototype,t,m[0]),i(l,p,m[1])}h&&u(l[p],"sham",!0)}},259:(t,e,r)=>{var n=r(4376),i=r(6198),o=r(6837),a=r(6080),s=function(t,e,r,u,c,l,h,p){for(var f,d,y=c,m=0,v=!!h&&a(h,p);m<u;)m in r&&(f=v?v(r[m],m,e):r[m],l>0&&n(f)?(d=i(f),y=s(t,e,f,d,y,l-1)-1):(o(y+1),t[y]=f),y++),m++;return y};t.exports=s},2744:(t,e,r)=>{var n=r(9039);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},8745:(t,e,r)=>{var n=r(616),i=Function.prototype,o=i.apply,a=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},6080:(t,e,r)=>{var n=r(7476),i=r(9306),o=r(616),a=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?a(t,e):function(){return t.apply(e,arguments)}}},616:(t,e,r)=>{var n=r(9039);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},566:(t,e,r)=>{var n=r(9504),i=r(9306),o=r(34),a=r(9297),s=r(7680),u=r(616),c=Function,l=n([].concat),h=n([].join),p={};t.exports=u?c.bind:function(t){var e=i(this),r=e.prototype,n=s(arguments,1),u=function(){var r=l(n,s(arguments));return this instanceof u?function(t,e,r){if(!a(p,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";p[e]=c("C,a","return new C("+h(n,",")+")")}return p[e](t,r)}(e,r.length,r):e.apply(t,r)};return o(r)&&(u.prototype=r),u}},9565:(t,e,r)=>{var n=r(616),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},350:(t,e,r)=>{var n=r(3724),i=r(9297),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,c=s&&(!n||n&&a(o,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},6706:(t,e,r)=>{var n=r(9504),i=r(9306);t.exports=function(t,e,r){try{return n(i(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},7476:(t,e,r)=>{var n=r(4576),i=r(9504);t.exports=function(t){if("Function"===n(t))return i(t)}},9504:(t,e,r)=>{var n=r(616),i=Function.prototype,o=i.call,a=n&&i.bind.bind(o,o);t.exports=n?a:function(t){return function(){return o.apply(t,arguments)}}},7751:(t,e,r)=>{var n=r(4475),i=r(4901);t.exports=function(t,e){return arguments.length<2?(r=n[t],i(r)?r:void 0):n[t]&&n[t][e];var r}},851:(t,e,r)=>{var n=r(6955),i=r(5966),o=r(4117),a=r(6269),s=r(8227)("iterator");t.exports=function(t){if(!o(t))return i(t,s)||i(t,"@@iterator")||a[n(t)]}},81:(t,e,r)=>{var n=r(9565),i=r(9306),o=r(8551),a=r(6823),s=r(851),u=TypeError;t.exports=function(t,e){var r=arguments.length<2?s(t):e;if(i(r))return o(n(r,t));throw new u(a(t)+" is not iterable")}},6933:(t,e,r)=>{var n=r(9504),i=r(4376),o=r(4901),a=r(4576),s=r(655),u=n([].push);t.exports=function(t){if(o(t))return t;if(i(t)){for(var e=t.length,r=[],n=0;n<e;n++){var c=t[n];"string"==typeof c?u(r,c):"number"!=typeof c&&"Number"!==a(c)&&"String"!==a(c)||u(r,s(c))}var l=r.length,h=!0;return function(t,e){if(h)return h=!1,e;if(i(this))return e;for(var n=0;n<l;n++)if(r[n]===t)return e}}}},5966:(t,e,r)=>{var n=r(9306),i=r(4117);t.exports=function(t,e){var r=t[e];return i(r)?void 0:n(r)}},2478:(t,e,r)=>{var n=r(9504),i=r(8981),o=Math.floor,a=n("".charAt),s=n("".replace),u=n("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,n,h,p){var f=r+t.length,d=n.length,y=l;return void 0!==h&&(h=i(h),y=c),s(p,y,(function(i,s){var c;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,r);case"'":return u(e,f);case"<":c=h[u(s,1,-1)];break;default:var l=+s;if(0===l)return i;if(l>d){var p=o(l/10);return 0===p?i:p<=d?void 0===n[p-1]?a(s,1):n[p-1]+a(s,1):i}c=n[l-1]}return void 0===c?"":c}))}},4475:function(t,e,r){var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:(t,e,r)=>{var n=r(9504),i=r(8981),o=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},421:t=>{t.exports={}},3138:t=>{t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},397:(t,e,r)=>{var n=r(7751);t.exports=n("document","documentElement")},5917:(t,e,r)=>{var n=r(3724),i=r(9039),o=r(4055);t.exports=!n&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},7055:(t,e,r)=>{var n=r(9504),i=r(9039),o=r(4576),a=Object,s=n("".split);t.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?s(t,""):a(t)}:a},3167:(t,e,r)=>{var n=r(4901),i=r(34),o=r(2967);t.exports=function(t,e,r){var a,s;return o&&n(a=e.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&o(t,s),t}},3706:(t,e,r)=>{var n=r(9504),i=r(4901),o=r(7629),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return a(t)}),t.exports=o.inspectSource},3451:(t,e,r)=>{var n=r(6518),i=r(9504),o=r(421),a=r(34),s=r(9297),u=r(4913).f,c=r(8480),l=r(298),h=r(4124),p=r(3392),f=r(2744),d=!1,y=p("meta"),m=0,v=function(t){u(t,y,{value:{objectID:"O"+m++,weakData:{}}})},b=t.exports={enable:function(){b.enable=function(){},d=!0;var t=c.f,e=i([].splice),r={};r[y]=1,t(r).length&&(c.f=function(r){for(var n=t(r),i=0,o=n.length;i<o;i++)if(n[i]===y){e(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,y)){if(!h(t))return"F";if(!e)return"E";v(t)}return t[y].objectID},getWeakData:function(t,e){if(!s(t,y)){if(!h(t))return!0;if(!e)return!1;v(t)}return t[y].weakData},onFreeze:function(t){return f&&d&&h(t)&&!s(t,y)&&v(t),t}};o[y]=!0},1181:(t,e,r)=>{var n,i,o,a=r(8622),s=r(4475),u=r(34),c=r(6699),l=r(9297),h=r(7629),p=r(6119),f=r(421),d="Object already initialized",y=s.TypeError,m=s.WeakMap;if(a||h.state){var v=h.state||(h.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,n=function(t,e){if(v.has(t))throw new y(d);return e.facade=t,v.set(t,e),e},i=function(t){return v.get(t)||{}},o=function(t){return v.has(t)}}else{var b=p("state");f[b]=!0,n=function(t,e){if(l(t,b))throw new y(d);return e.facade=t,c(t,b,e),e},i=function(t){return l(t,b)?t[b]:{}},o=function(t){return l(t,b)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=i(e)).type!==t)throw new y("Incompatible receiver, "+t+" required");return r}}}},4209:(t,e,r)=>{var n=r(8227),i=r(6269),o=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},4376:(t,e,r)=>{var n=r(4576);t.exports=Array.isArray||function(t){return"Array"===n(t)}},4901:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},3517:(t,e,r)=>{var n=r(9504),i=r(9039),o=r(4901),a=r(6955),s=r(7751),u=r(3706),c=function(){},l=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(c),d=function(t){if(!o(t))return!1;try{return l(c,[],t),!0}catch(t){return!1}},y=function(t){if(!o(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,u(t))}catch(t){return!0}};y.sham=!0,t.exports=!l||i((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?y:d},6575:(t,e,r)=>{var n=r(9297);t.exports=function(t){return void 0!==t&&(n(t,"value")||n(t,"writable"))}},2796:(t,e,r)=>{var n=r(9039),i=r(4901),o=/#|\.prototype\./,a=function(t,e){var r=u[s(t)];return r===l||r!==c&&(i(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},2087:(t,e,r)=>{var n=r(34),i=Math.floor;t.exports=Number.isInteger||function(t){return!n(t)&&isFinite(t)&&i(t)===t}},4117:t=>{t.exports=function(t){return null==t}},34:(t,e,r)=>{var n=r(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},3925:(t,e,r)=>{var n=r(34);t.exports=function(t){return n(t)||null===t}},6395:t=>{t.exports=!1},788:(t,e,r)=>{var n=r(34),i=r(4576),o=r(8227)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"===i(t))}},757:(t,e,r)=>{var n=r(7751),i=r(4901),o=r(1625),a=r(7040),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&o(e.prototype,s(t))}},2652:(t,e,r)=>{var n=r(6080),i=r(9565),o=r(8551),a=r(6823),s=r(4209),u=r(6198),c=r(1625),l=r(81),h=r(851),p=r(9539),f=TypeError,d=function(t,e){this.stopped=t,this.result=e},y=d.prototype;t.exports=function(t,e,r){var m,v,b,g,w,O,j,_=r&&r.that,k=!(!r||!r.AS_ENTRIES),x=!(!r||!r.IS_RECORD),E=!(!r||!r.IS_ITERATOR),S=!(!r||!r.INTERRUPTED),P=n(e,_),C=function(t){return m&&p(m,"normal",t),new d(!0,t)},T=function(t){return k?(o(t),S?P(t[0],t[1],C):P(t[0],t[1])):S?P(t,C):P(t)};if(x)m=t.iterator;else if(E)m=t;else{if(!(v=h(t)))throw new f(a(t)+" is not iterable");if(s(v)){for(b=0,g=u(t);g>b;b++)if((w=T(t[b]))&&c(y,w))return w;return new d(!1)}m=l(t,v)}for(O=x?t.next:m.next;!(j=i(O,m)).done;){try{w=T(j.value)}catch(t){p(m,"throw",t)}if("object"==typeof w&&w&&c(y,w))return w}return new d(!1)}},9539:(t,e,r)=>{var n=r(9565),i=r(8551),o=r(5966);t.exports=function(t,e,r){var a,s;i(t);try{if(!(a=o(t,"return"))){if("throw"===e)throw r;return r}a=n(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw r;if(s)throw a;return i(a),r}},3994:(t,e,r)=>{var n=r(7657).IteratorPrototype,i=r(2360),o=r(6980),a=r(687),s=r(6269),u=function(){return this};t.exports=function(t,e,r,c){var l=e+" Iterator";return t.prototype=i(n,{next:o(+!c,r)}),a(t,l,!1,!0),s[l]=u,t}},1088:(t,e,r)=>{var n=r(6518),i=r(9565),o=r(6395),a=r(350),s=r(4901),u=r(3994),c=r(2787),l=r(2967),h=r(687),p=r(6699),f=r(6840),d=r(8227),y=r(6269),m=r(7657),v=a.PROPER,b=a.CONFIGURABLE,g=m.IteratorPrototype,w=m.BUGGY_SAFARI_ITERATORS,O=d("iterator"),j="keys",_="values",k="entries",x=function(){return this};t.exports=function(t,e,r,a,d,m,E){u(r,e,a);var S,P,C,T=function(t){if(t===d&&N)return N;if(!w&&t&&t in L)return L[t];switch(t){case j:case _:case k:return function(){return new r(this,t)}}return function(){return new r(this)}},A=e+" Iterator",I=!1,L=t.prototype,R=L[O]||L["@@iterator"]||d&&L[d],N=!w&&R||T(d),B="Array"===e&&L.entries||R;if(B&&(S=c(B.call(new t)))!==Object.prototype&&S.next&&(o||c(S)===g||(l?l(S,g):s(S[O])||f(S,O,x)),h(S,A,!0,!0),o&&(y[A]=x)),v&&d===_&&R&&R.name!==_&&(!o&&b?p(L,"name",_):(I=!0,N=function(){return i(R,this)})),d)if(P={values:T(_),keys:m?N:T(j),entries:T(k)},E)for(C in P)(w||I||!(C in L))&&f(L,C,P[C]);else n({target:e,proto:!0,forced:w||I},P);return o&&!E||L[O]===N||f(L,O,N,{name:d}),y[e]=N,P}},7657:(t,e,r)=>{var n,i,o,a=r(9039),s=r(4901),u=r(34),c=r(2360),l=r(2787),h=r(6840),p=r(8227),f=r(6395),d=p("iterator"),y=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):y=!0),!u(n)||a((function(){var t={};return n[d].call(t)!==t}))?n={}:f&&(n=c(n)),s(n[d])||h(n,d,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:y}},6269:t=>{t.exports={}},6198:(t,e,r)=>{var n=r(8014);t.exports=function(t){return n(t.length)}},283:(t,e,r)=>{var n=r(9504),i=r(9039),o=r(4901),a=r(9297),s=r(3724),u=r(350).CONFIGURABLE,c=r(3706),l=r(1181),h=l.enforce,p=l.get,f=String,d=Object.defineProperty,y=n("".slice),m=n("".replace),v=n([].join),b=s&&!i((function(){return 8!==d((function(){}),"length",{value:8}).length})),g=String(String).split("String"),w=t.exports=function(t,e,r){"Symbol("===y(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||u&&t.name!==e)&&(s?d(t,"name",{value:e,configurable:!0}):t.name=e),b&&r&&a(r,"arity")&&t.length!==r.arity&&d(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=h(t);return a(n,"source")||(n.source=v(g,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return o(this)&&p(this).source||c(this)}),"toString")},741:t=>{var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},1955:(t,e,r)=>{var n,i,o,a,s,u=r(4475),c=r(3389),l=r(6080),h=r(9225).set,p=r(8265),f=r(8119),d=r(28),y=r(6765),m=r(9088),v=u.MutationObserver||u.WebKitMutationObserver,b=u.document,g=u.process,w=u.Promise,O=c("queueMicrotask");if(!O){var j=new p,_=function(){var t,e;for(m&&(t=g.domain)&&t.exit();e=j.get();)try{e()}catch(t){throw j.head&&n(),t}t&&t.enter()};f||m||y||!v||!b?!d&&w&&w.resolve?((a=w.resolve(void 0)).constructor=w,s=l(a.then,a),n=function(){s(_)}):m?n=function(){g.nextTick(_)}:(h=l(h,u),n=function(){h(_)}):(i=!0,o=b.createTextNode(""),new v(_).observe(o,{characterData:!0}),n=function(){o.data=i=!i}),O=function(t){j.head||n(),j.add(t)}}t.exports=O},6043:(t,e,r)=>{var n=r(9306),i=TypeError,o=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw new i("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new o(t)}},5749:(t,e,r)=>{var n=r(788),i=TypeError;t.exports=function(t){if(n(t))throw new i("The method doesn't accept regular expressions");return t}},360:(t,e,r)=>{var n=r(4475).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&n(t)}},3904:(t,e,r)=>{var n=r(4475),i=r(9039),o=r(9504),a=r(655),s=r(3802).trim,u=r(7452),c=o("".charAt),l=n.parseFloat,h=n.Symbol,p=h&&h.iterator,f=1/l(u+"-0")!=-1/0||p&&!i((function(){l(Object(p))}));t.exports=f?function(t){var e=s(a(t)),r=l(e);return 0===r&&"-"===c(e,0)?-0:r}:l},2703:(t,e,r)=>{var n=r(4475),i=r(9039),o=r(9504),a=r(655),s=r(3802).trim,u=r(7452),c=n.parseInt,l=n.Symbol,h=l&&l.iterator,p=/^[+-]?0x/i,f=o(p.exec),d=8!==c(u+"08")||22!==c(u+"0x16")||h&&!i((function(){c(Object(h))}));t.exports=d?function(t,e){var r=s(a(t));return c(r,e>>>0||(f(p,r)?16:10))}:c},4213:(t,e,r)=>{var n=r(3724),i=r(9504),o=r(9565),a=r(9039),s=r(1072),u=r(3717),c=r(8773),l=r(8981),h=r(7055),p=Object.assign,f=Object.defineProperty,d=i([].concat);t.exports=!p||a((function(){if(n&&1!==p({b:1},p(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return t[r]=7,i.split("").forEach((function(t){e[t]=t})),7!==p({},t)[r]||s(p({},e)).join("")!==i}))?function(t,e){for(var r=l(t),i=arguments.length,a=1,p=u.f,f=c.f;i>a;)for(var y,m=h(arguments[a++]),v=p?d(s(m),p(m)):s(m),b=v.length,g=0;b>g;)y=v[g++],n&&!o(f,m,y)||(r[y]=m[y]);return r}:p},2360:(t,e,r)=>{var n,i=r(8551),o=r(6801),a=r(8727),s=r(421),u=r(397),c=r(4055),l=r(6119),h="prototype",p="script",f=l("IE_PROTO"),d=function(){},y=function(t){return"<"+p+">"+t+"</"+p+">"},m=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;v="undefined"!=typeof document?document.domain&&n?m(n):(e=c("iframe"),r="java"+p+":",e.style.display="none",u.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(y("document.F=Object")),t.close(),t.F):m(n);for(var i=a.length;i--;)delete v[h][a[i]];return v()};s[f]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(d[h]=i(t),r=new d,d[h]=null,r[f]=t):r=v(),void 0===e?r:o.f(r,e)}},6801:(t,e,r)=>{var n=r(3724),i=r(8686),o=r(4913),a=r(8551),s=r(5397),u=r(1072);e.f=n&&!i?Object.defineProperties:function(t,e){a(t);for(var r,n=s(e),i=u(e),c=i.length,l=0;c>l;)o.f(t,r=i[l++],n[r]);return t}},4913:(t,e,r)=>{var n=r(3724),i=r(5917),o=r(8686),a=r(8551),s=r(6969),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";e.f=n?o?function(t,e,r){if(a(t),e=s(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var n=l(t,e);n&&n[f]&&(t[e]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:h in r?r[h]:n[h],writable:!1})}return c(t,e,r)}:c:function(t,e,r){if(a(t),e=s(e),a(r),i)try{return c(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},7347:(t,e,r)=>{var n=r(3724),i=r(9565),o=r(8773),a=r(6980),s=r(5397),u=r(6969),c=r(9297),l=r(5917),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=s(t),e=u(e),l)try{return h(t,e)}catch(t){}if(c(t,e))return a(!i(o.f,t,e),t[e])}},298:(t,e,r)=>{var n=r(4576),i=r(5397),o=r(8480).f,a=r(7680),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"Window"===n(t)?function(t){try{return o(t)}catch(t){return a(s)}}(t):o(i(t))}},8480:(t,e,r)=>{var n=r(1828),i=r(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},3717:(t,e)=>{e.f=Object.getOwnPropertySymbols},2787:(t,e,r)=>{var n=r(9297),i=r(4901),o=r(8981),a=r(6119),s=r(2211),u=a("IE_PROTO"),c=Object,l=c.prototype;t.exports=s?c.getPrototypeOf:function(t){var e=o(t);if(n(e,u))return e[u];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof c?l:null}},4124:(t,e,r)=>{var n=r(9039),i=r(34),o=r(4576),a=r(5652),s=Object.isExtensible,u=n((function(){s(1)}));t.exports=u||a?function(t){return!!i(t)&&(!a||"ArrayBuffer"!==o(t))&&(!s||s(t))}:s},1625:(t,e,r)=>{var n=r(9504);t.exports=n({}.isPrototypeOf)},1828:(t,e,r)=>{var n=r(9504),i=r(9297),o=r(5397),a=r(9617).indexOf,s=r(421),u=n([].push);t.exports=function(t,e){var r,n=o(t),c=0,l=[];for(r in n)!i(s,r)&&i(n,r)&&u(l,r);for(;e.length>c;)i(n,r=e[c++])&&(~a(l,r)||u(l,r));return l}},1072:(t,e,r)=>{var n=r(1828),i=r(8727);t.exports=Object.keys||function(t){return n(t,i)}},8773:(t,e)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2967:(t,e,r)=>{var n=r(6706),i=r(34),o=r(7750),a=r(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return o(r),a(n),i(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},2357:(t,e,r)=>{var n=r(3724),i=r(9039),o=r(9504),a=r(2787),s=r(1072),u=r(5397),c=o(r(8773).f),l=o([].push),h=n&&i((function(){var t=Object.create(null);return t[2]=2,!c(t,2)})),p=function(t){return function(e){for(var r,i=u(e),o=s(i),p=h&&null===a(i),f=o.length,d=0,y=[];f>d;)r=o[d++],n&&!(p?r in i:c(i,r))||l(y,t?[r,i[r]]:i[r]);return y}};t.exports={entries:p(!0),values:p(!1)}},3179:(t,e,r)=>{var n=r(2140),i=r(6955);t.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},4270:(t,e,r)=>{var n=r(9565),i=r(4901),o=r(34),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&i(r=t.toString)&&!o(s=n(r,t)))return s;if(i(r=t.valueOf)&&!o(s=n(r,t)))return s;if("string"!==e&&i(r=t.toString)&&!o(s=n(r,t)))return s;throw new a("Can't convert object to primitive value")}},5031:(t,e,r)=>{var n=r(7751),i=r(9504),o=r(8480),a=r(3717),s=r(8551),u=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(s(t)),r=a.f;return r?u(e,r(t)):e}},9167:(t,e,r)=>{var n=r(4475);t.exports=n},1103:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},916:(t,e,r)=>{var n=r(4475),i=r(550),o=r(4901),a=r(2796),s=r(3706),u=r(8227),c=r(7290),l=r(516),h=r(6395),p=r(7388),f=i&&i.prototype,d=u("species"),y=!1,m=o(n.PromiseRejectionEvent),v=a("Promise",(function(){var t=s(i),e=t!==String(i);if(!e&&66===p)return!0;if(h&&(!f.catch||!f.finally))return!0;if(!p||p<51||!/native code/.test(t)){var r=new i((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=n,!(y=r.then((function(){}))instanceof n))return!0}return!e&&(c||l)&&!m}));t.exports={CONSTRUCTOR:v,REJECTION_EVENT:m,SUBCLASSING:y}},550:(t,e,r)=>{var n=r(4475);t.exports=n.Promise},3438:(t,e,r)=>{var n=r(8551),i=r(34),o=r(6043);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},537:(t,e,r)=>{var n=r(550),i=r(4428),o=r(916).CONSTRUCTOR;t.exports=o||!i((function(t){n.all(t).then(void 0,(function(){}))}))},1056:(t,e,r)=>{var n=r(4913).f;t.exports=function(t,e,r){r in t||n(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},8265:t=>{var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},6682:(t,e,r)=>{var n=r(9565),i=r(8551),o=r(4901),a=r(4576),s=r(7323),u=TypeError;t.exports=function(t,e){var r=t.exec;if(o(r)){var c=n(r,t,e);return null!==c&&i(c),c}if("RegExp"===a(t))return n(s,t,e);throw new u("RegExp#exec called on incompatible receiver")}},7323:(t,e,r)=>{var n,i,o=r(9565),a=r(9504),s=r(655),u=r(7979),c=r(8429),l=r(5745),h=r(2360),p=r(1181).get,f=r(3635),d=r(8814),y=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,v=m,b=a("".charAt),g=a("".indexOf),w=a("".replace),O=a("".slice),j=(i=/b*/g,o(m,n=/a/,"a"),o(m,i,"a"),0!==n.lastIndex||0!==i.lastIndex),_=c.BROKEN_CARET,k=void 0!==/()??/.exec("")[1];(j||k||_||f||d)&&(v=function(t){var e,r,n,i,a,c,l,f=this,d=p(f),x=s(t),E=d.raw;if(E)return E.lastIndex=f.lastIndex,e=o(v,E,x),f.lastIndex=E.lastIndex,e;var S=d.groups,P=_&&f.sticky,C=o(u,f),T=f.source,A=0,I=x;if(P&&(C=w(C,"y",""),-1===g(C,"g")&&(C+="g"),I=O(x,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==b(x,f.lastIndex-1))&&(T="(?: "+T+")",I=" "+I,A++),r=new RegExp("^(?:"+T+")",C)),k&&(r=new RegExp("^"+T+"$(?!\\s)",C)),j&&(n=f.lastIndex),i=o(m,P?r:f,I),P?i?(i.input=O(i.input,A),i[0]=O(i[0],A),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:j&&i&&(f.lastIndex=f.global?i.index+i[0].length:n),k&&i&&i.length>1&&o(y,i[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&S)for(i.groups=c=h(null),a=0;a<S.length;a++)c[(l=S[a])[0]]=i[l[1]];return i}),t.exports=v},7979:(t,e,r)=>{var n=r(8551);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},1034:(t,e,r)=>{var n=r(9565),i=r(9297),o=r(1625),a=r(7979),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||i(t,"flags")||!o(s,t)?e:n(a,t)}},8429:(t,e,r)=>{var n=r(9039),i=r(4475).RegExp,o=n((function(){var t=i("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),a=o||n((function(){return!i("a","y").sticky})),s=o||n((function(){var t=i("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},3635:(t,e,r)=>{var n=r(9039),i=r(4475).RegExp;t.exports=n((function(){var t=i(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},8814:(t,e,r)=>{var n=r(9039),i=r(4475).RegExp;t.exports=n((function(){var t=i("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},7750:(t,e,r)=>{var n=r(4117),i=TypeError;t.exports=function(t){if(n(t))throw new i("Can't call method on "+t);return t}},3389:(t,e,r)=>{var n=r(4475),i=r(3724),o=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!i)return n[t];var e=o(n,t);return e&&e.value}},3470:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},9472:(t,e,r)=>{var n,i=r(4475),o=r(8745),a=r(4901),s=r(6763),u=r(9392),c=r(7680),l=r(2812),h=i.Function,p=/MSIE .\./.test(u)||s&&((n=i.Bun.version.split(".")).length<3||"0"===n[0]&&(n[1]<3||"3"===n[1]&&"0"===n[2]));t.exports=function(t,e){var r=e?2:1;return p?function(n,i){var s=l(arguments.length,1)>r,u=a(n)?n:h(n),p=s?c(arguments,r):[],f=s?function(){o(u,this,p)}:u;return e?t(f,i):t(f)}:t}},7633:(t,e,r)=>{var n=r(7751),i=r(2106),o=r(8227),a=r(3724),s=o("species");t.exports=function(t){var e=n(t);a&&e&&!e[s]&&i(e,s,{configurable:!0,get:function(){return this}})}},687:(t,e,r)=>{var n=r(4913).f,i=r(9297),o=r(8227)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!i(t,o)&&n(t,o,{configurable:!0,value:e})}},6119:(t,e,r)=>{var n=r(5745),i=r(3392),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},7629:(t,e,r)=>{var n=r(6395),i=r(4475),o=r(9433),a="__core-js_shared__",s=t.exports=i[a]||o(a,{});(s.versions||(s.versions=[])).push({version:"3.36.1",mode:n?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(t,e,r)=>{var n=r(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},2293:(t,e,r)=>{var n=r(8551),i=r(5548),o=r(4117),a=r(8227)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||o(r=n(s)[a])?e:i(r)}},3061:(t,e,r)=>{var n=r(9039);t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},8183:(t,e,r)=>{var n=r(9504),i=r(1291),o=r(655),a=r(7750),s=n("".charAt),u=n("".charCodeAt),c=n("".slice),l=function(t){return function(e,r){var n,l,h=o(a(e)),p=i(r),f=h.length;return p<0||p>=f?t?"":void 0:(n=u(h,p))<55296||n>56319||p+1===f||(l=u(h,p+1))<56320||l>57343?t?s(h,p):n:t?c(h,p,p+2):l-56320+(n-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},533:(t,e,r)=>{var n=r(9504),i=r(8014),o=r(655),a=r(2333),s=r(7750),u=n(a),c=n("".slice),l=Math.ceil,h=function(t){return function(e,r,n){var a,h,p=o(s(e)),f=i(r),d=p.length,y=void 0===n?" ":o(n);return f<=d||""===y?p:((h=u(y,l((a=f-d)/y.length))).length>a&&(h=c(h,0,a)),t?p+h:h+p)}};t.exports={start:h(!1),end:h(!0)}},2333:(t,e,r)=>{var n=r(1291),i=r(655),o=r(7750),a=RangeError;t.exports=function(t){var e=i(o(this)),r="",s=n(t);if(s<0||s===1/0)throw new a("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(r+=e);return r}},706:(t,e,r)=>{var n=r(350).PROPER,i=r(9039),o=r(7452);t.exports=function(t){return i((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||n&&o[t].name!==t}))}},3802:(t,e,r)=>{var n=r(9504),i=r(7750),o=r(655),a=r(7452),s=n("".replace),u=RegExp("^["+a+"]+"),c=RegExp("(^|[^"+a+"])["+a+"]+$"),l=function(t){return function(e){var r=o(i(e));return 1&t&&(r=s(r,u,"")),2&t&&(r=s(r,c,"$1")),r}};t.exports={start:l(1),end:l(2),trim:l(3)}},4495:(t,e,r)=>{var n=r(7388),i=r(9039),o=r(4475).String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8242:(t,e,r)=>{var n=r(9565),i=r(7751),o=r(8227),a=r(6840);t.exports=function(){var t=i("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,s=o("toPrimitive");e&&!e[s]&&a(e,s,(function(t){return n(r,this)}),{arity:1})}},1296:(t,e,r)=>{var n=r(4495);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},9225:(t,e,r)=>{var n,i,o,a,s=r(4475),u=r(8745),c=r(6080),l=r(4901),h=r(9297),p=r(9039),f=r(397),d=r(7680),y=r(4055),m=r(2812),v=r(8119),b=r(9088),g=s.setImmediate,w=s.clearImmediate,O=s.process,j=s.Dispatch,_=s.Function,k=s.MessageChannel,x=s.String,E=0,S={},P="onreadystatechange";p((function(){n=s.location}));var C=function(t){if(h(S,t)){var e=S[t];delete S[t],e()}},T=function(t){return function(){C(t)}},A=function(t){C(t.data)},I=function(t){s.postMessage(x(t),n.protocol+"//"+n.host)};g&&w||(g=function(t){m(arguments.length,1);var e=l(t)?t:_(t),r=d(arguments,1);return S[++E]=function(){u(e,void 0,r)},i(E),E},w=function(t){delete S[t]},b?i=function(t){O.nextTick(T(t))}:j&&j.now?i=function(t){j.now(T(t))}:k&&!v?(a=(o=new k).port2,o.port1.onmessage=A,i=c(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!p(I)?(i=I,s.addEventListener("message",A,!1)):i=P in y("script")?function(t){f.appendChild(y("script"))[P]=function(){f.removeChild(this),C(t)}}:function(t){setTimeout(T(t),0)}),t.exports={set:g,clear:w}},1240:(t,e,r)=>{var n=r(9504);t.exports=n(1..valueOf)},5610:(t,e,r)=>{var n=r(1291),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},5397:(t,e,r)=>{var n=r(7055),i=r(7750);t.exports=function(t){return n(i(t))}},1291:(t,e,r)=>{var n=r(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},8014:(t,e,r)=>{var n=r(1291),i=Math.min;t.exports=function(t){var e=n(t);return e>0?i(e,9007199254740991):0}},8981:(t,e,r)=>{var n=r(7750),i=Object;t.exports=function(t){return i(n(t))}},2777:(t,e,r)=>{var n=r(9565),i=r(34),o=r(757),a=r(5966),s=r(4270),u=r(8227),c=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var r,u=a(t,l);if(u){if(void 0===e&&(e="default"),r=n(u,t,e),!i(r)||o(r))return r;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},6969:(t,e,r)=>{var n=r(2777),i=r(757);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},2140:(t,e,r)=>{var n={};n[r(8227)("toStringTag")]="z",t.exports="[object z]"===String(n)},655:(t,e,r)=>{var n=r(6955),i=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},6823:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},3392:(t,e,r)=>{var n=r(9504),i=0,o=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++i+o,36)}},7040:(t,e,r)=>{var n=r(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:(t,e,r)=>{var n=r(3724),i=r(9039);t.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2812:t=>{var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},8622:(t,e,r)=>{var n=r(4475),i=r(4901),o=n.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},511:(t,e,r)=>{var n=r(9167),i=r(9297),o=r(1951),a=r(4913).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},1951:(t,e,r)=>{var n=r(8227);e.f=n},8227:(t,e,r)=>{var n=r(4475),i=r(5745),o=r(9297),a=r(3392),s=r(4495),u=r(7040),c=n.Symbol,l=i("wks"),h=u?c.for||c:c&&c.withoutSetter||a;t.exports=function(t){return o(l,t)||(l[t]=s&&o(c,t)?c[t]:h("Symbol."+t)),l[t]}},7452:t=>{t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},8706:(t,e,r)=>{var n=r(6518),i=r(9039),o=r(4376),a=r(34),s=r(8981),u=r(6198),c=r(6837),l=r(4659),h=r(1469),p=r(597),f=r(8227),d=r(7388),y=f("isConcatSpreadable"),m=d>=51||!i((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),v=function(t){if(!a(t))return!1;var e=t[y];return void 0!==e?!!e:o(t)};n({target:"Array",proto:!0,arity:1,forced:!m||!p("concat")},{concat:function(t){var e,r,n,i,o,a=s(this),p=h(a,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(v(o=-1===e?a:arguments[e]))for(i=u(o),c(f+i),r=0;r<i;r++,f++)r in o&&l(p,f,o[r]);else c(f+1),l(p,f++,o);return p.length=f,p}})},8431:(t,e,r)=>{var n=r(6518),i=r(9213).every;n({target:"Array",proto:!0,forced:!r(4598)("every")},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2008:(t,e,r)=>{var n=r(6518),i=r(9213).filter;n({target:"Array",proto:!0,forced:!r(597)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},8980:(t,e,r)=>{var n=r(6518),i=r(9213).findIndex,o=r(6469),a="findIndex",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},113:(t,e,r)=>{var n=r(6518),i=r(9213).find,o=r(6469),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},6449:(t,e,r)=>{var n=r(6518),i=r(259),o=r(8981),a=r(6198),s=r(1291),u=r(1469);n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),r=a(e),n=u(e,0);return n.length=i(n,e,e,r,0,void 0===t?1:s(t)),n}})},1629:(t,e,r)=>{var n=r(6518),i=r(235);n({target:"Array",proto:!0,forced:[].forEach!==i},{forEach:i})},3418:(t,e,r)=>{var n=r(6518),i=r(7916);n({target:"Array",stat:!0,forced:!r(4428)((function(t){Array.from(t)}))},{from:i})},4423:(t,e,r)=>{var n=r(6518),i=r(9617).includes,o=r(9039),a=r(6469);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},5276:(t,e,r)=>{var n=r(6518),i=r(7476),o=r(9617).indexOf,a=r(4598),s=i([].indexOf),u=!!s&&1/s([1],1,-0)<0;n({target:"Array",proto:!0,forced:u||!a("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return u?s(this,t,e)||0:o(this,t,e)}})},4346:(t,e,r)=>{r(6518)({target:"Array",stat:!0},{isArray:r(4376)})},3792:(t,e,r)=>{var n=r(5397),i=r(6469),o=r(6269),a=r(1181),s=r(4913).f,u=r(1088),c=r(2529),l=r(6395),h=r(3724),p="Array Iterator",f=a.set,d=a.getterFor(p);t.exports=u(Array,"Array",(function(t,e){f(this,{type:p,target:n(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=void 0,c(void 0,!0);switch(t.kind){case"keys":return c(r,!1);case"values":return c(e[r],!1)}return c([r,e[r]],!1)}),"values");var y=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&h&&"values"!==y.name)try{s(y,"name",{value:"values"})}catch(t){}},8598:(t,e,r)=>{var n=r(6518),i=r(9504),o=r(7055),a=r(5397),s=r(4598),u=i([].join);n({target:"Array",proto:!0,forced:o!==Object||!s("join",",")},{join:function(t){return u(a(this),void 0===t?",":t)}})},2062:(t,e,r)=>{var n=r(6518),i=r(9213).map;n({target:"Array",proto:!0,forced:!r(597)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2712:(t,e,r)=>{var n=r(6518),i=r(926).left,o=r(4598),a=r(7388);n({target:"Array",proto:!0,forced:!r(9088)&&a>79&&a<83||!o("reduce")},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},4490:(t,e,r)=>{var n=r(6518),i=r(9504),o=r(4376),a=i([].reverse),s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),a(this)}})},4782:(t,e,r)=>{var n=r(6518),i=r(4376),o=r(3517),a=r(34),s=r(5610),u=r(6198),c=r(5397),l=r(4659),h=r(8227),p=r(597),f=r(7680),d=p("slice"),y=h("species"),m=Array,v=Math.max;n({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var r,n,h,p=c(this),d=u(p),b=s(t,d),g=s(void 0===e?d:e,d);if(i(p)&&(r=p.constructor,(o(r)&&(r===m||i(r.prototype))||a(r)&&null===(r=r[y]))&&(r=void 0),r===m||void 0===r))return f(p,b,g);for(n=new(void 0===r?m:r)(v(g-b,0)),h=0;b<g;b++,h++)b in p&&l(n,h,p[b]);return n.length=h,n}})},5086:(t,e,r)=>{var n=r(6518),i=r(9213).some;n({target:"Array",proto:!0,forced:!r(4598)("some")},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},6910:(t,e,r)=>{var n=r(6518),i=r(9504),o=r(9306),a=r(8981),s=r(6198),u=r(4606),c=r(655),l=r(9039),h=r(4488),p=r(4598),f=r(8834),d=r(3202),y=r(7388),m=r(9160),v=[],b=i(v.sort),g=i(v.push),w=l((function(){v.sort(void 0)})),O=l((function(){v.sort(null)})),j=p("sort"),_=!l((function(){if(y)return y<70;if(!(f&&f>3)){if(d)return!0;if(m)return m<603;var t,e,r,n,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)v.push({k:e+n,v:r})}for(v.sort((function(t,e){return e.v-t.v})),n=0;n<v.length;n++)e=v[n].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));n({target:"Array",proto:!0,forced:w||!O||!j||!_},{sort:function(t){void 0!==t&&o(t);var e=a(this);if(_)return void 0===t?b(e):b(e,t);var r,n,i=[],l=s(e);for(n=0;n<l;n++)n in e&&g(i,e[n]);for(h(i,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:c(e)>c(r)?1:-1}}(t)),r=s(i),n=0;n<r;)e[n]=i[n++];for(;n<l;)u(e,n++);return e}})},4554:(t,e,r)=>{var n=r(6518),i=r(8981),o=r(5610),a=r(1291),s=r(6198),u=r(4527),c=r(6837),l=r(1469),h=r(4659),p=r(4606),f=r(597)("splice"),d=Math.max,y=Math.min;n({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var r,n,f,m,v,b,g=i(this),w=s(g),O=o(t,w),j=arguments.length;for(0===j?r=n=0:1===j?(r=0,n=w-O):(r=j-2,n=y(d(a(e),0),w-O)),c(w+r-n),f=l(g,n),m=0;m<n;m++)(v=O+m)in g&&h(f,m,g[v]);if(f.length=n,r<n){for(m=O;m<w-n;m++)b=m+r,(v=m+n)in g?g[b]=g[v]:p(g,b);for(m=w;m>w-n+r;m--)p(g,m-1)}else if(r>n)for(m=w-n;m>O;m--)b=m+r-1,(v=m+n-1)in g?g[b]=g[v]:p(g,b);for(m=0;m<r;m++)g[m+O]=arguments[m+2];return u(g,w-n+r),f}})},3514:(t,e,r)=>{r(6469)("flat")},1688:(t,e,r)=>{var n=r(6518),i=r(380);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},739:(t,e,r)=>{var n=r(6518),i=r(9039),o=r(8981),a=r(2777);n({target:"Date",proto:!0,arity:1,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=o(this),r=a(e,"number");return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},9572:(t,e,r)=>{var n=r(9297),i=r(6840),o=r(3640),a=r(8227)("toPrimitive"),s=Date.prototype;n(s,a)||i(s,a,o)},3288:(t,e,r)=>{var n=r(9504),i=r(6840),o=Date.prototype,a="Invalid Date",s="toString",u=n(o[s]),c=n(o.getTime);String(new Date(NaN))!==a&&i(o,s,(function(){var t=c(this);return t==t?u(this):a}))},4170:(t,e,r)=>{var n=r(6518),i=r(566);n({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},2010:(t,e,r)=>{var n=r(3724),i=r(350).EXISTS,o=r(9504),a=r(2106),s=Function.prototype,u=o(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=o(c.exec);n&&!i&&a(s,"name",{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(t){return""}}})},3110:(t,e,r)=>{var n=r(6518),i=r(7751),o=r(8745),a=r(9565),s=r(9504),u=r(9039),c=r(4901),l=r(757),h=r(7680),p=r(6933),f=r(4495),d=String,y=i("JSON","stringify"),m=s(/./.exec),v=s("".charAt),b=s("".charCodeAt),g=s("".replace),w=s(1..toString),O=/[\uD800-\uDFFF]/g,j=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,k=!f||u((function(){var t=i("Symbol")("stringify detection");return"[null]"!==y([t])||"{}"!==y({a:t})||"{}"!==y(Object(t))})),x=u((function(){return'"\\udf06\\ud834"'!==y("\udf06\ud834")||'"\\udead"'!==y("\udead")})),E=function(t,e){var r=h(arguments),n=p(e);if(c(n)||void 0!==t&&!l(t))return r[1]=function(t,e){if(c(n)&&(e=a(n,this,d(t),e)),!l(e))return e},o(y,null,r)},S=function(t,e,r){var n=v(r,e-1),i=v(r,e+1);return m(j,t)&&!m(_,i)||m(_,t)&&!m(j,n)?"\\u"+w(b(t,0),16):t};y&&n({target:"JSON",stat:!0,arity:3,forced:k||x},{stringify:function(t,e,r){var n=h(arguments),i=o(k?E:y,null,n);return x&&"string"==typeof i?g(i,O,S):i}})},4731:(t,e,r)=>{var n=r(4475);r(687)(n.JSON,"JSON",!0)},8523:(t,e,r)=>{r(6468)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(6938))},6033:(t,e,r)=>{r(8523)},479:(t,e,r)=>{r(687)(Math,"Math",!0)},761:(t,e,r)=>{r(6518)({target:"Math",stat:!0},{trunc:r(741)})},2892:(t,e,r)=>{var n=r(6518),i=r(6395),o=r(3724),a=r(4475),s=r(9167),u=r(9504),c=r(2796),l=r(9297),h=r(3167),p=r(1625),f=r(757),d=r(2777),y=r(9039),m=r(8480).f,v=r(7347).f,b=r(4913).f,g=r(1240),w=r(3802).trim,O="Number",j=a[O],_=s[O],k=j.prototype,x=a.TypeError,E=u("".slice),S=u("".charCodeAt),P=c(O,!j(" 0o1")||!j("0b1")||j("+0x1")),C=function(t){var e,r=arguments.length<1?0:j(function(t){var e=d(t,"number");return"bigint"==typeof e?e:function(t){var e,r,n,i,o,a,s,u,c=d(t,"number");if(f(c))throw new x("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=w(c),43===(e=S(c,0))||45===e){if(88===(r=S(c,2))||120===r)return NaN}else if(48===e){switch(S(c,1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(a=(o=E(c,2)).length,s=0;s<a;s++)if((u=S(o,s))<48||u>i)return NaN;return parseInt(o,n)}return+c}(e)}(t));return p(k,e=this)&&y((function(){g(e)}))?h(Object(r),this,C):r};C.prototype=k,P&&!i&&(k.constructor=C),n({global:!0,constructor:!0,wrap:!0,forced:P},{Number:C});var T=function(t,e){for(var r,n=o?m(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;n.length>i;i++)l(e,r=n[i])&&!l(t,r)&&b(t,r,v(e,r))};i&&_&&T(s[O],_),(P||i)&&T(s[O],j)},5428:(t,e,r)=>{r(6518)({target:"Number",stat:!0},{isFinite:r(360)})},2637:(t,e,r)=>{r(6518)({target:"Number",stat:!0},{isInteger:r(2087)})},9868:(t,e,r)=>{var n=r(6518),i=r(9504),o=r(1291),a=r(1240),s=r(2333),u=r(9039),c=RangeError,l=String,h=Math.floor,p=i(s),f=i("".slice),d=i(1..toFixed),y=function(t,e,r){return 0===e?r:e%2==1?y(t,e-1,r*t):y(t*t,e/2,r)},m=function(t,e,r){for(var n=-1,i=r;++n<6;)i+=e*t[n],t[n]=i%1e7,i=h(i/1e7)},v=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=h(n/e),n=n%e*1e7},b=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=l(t[e]);r=""===r?n:r+p("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:u((function(){return"0.000"!==d(8e-5,3)||"1"!==d(.9,0)||"1.25"!==d(1.255,2)||"1000000000000000128"!==d(0xde0b6b3a7640080,0)}))||!u((function(){d({})}))},{toFixed:function(t){var e,r,n,i,s=a(this),u=o(t),h=[0,0,0,0,0,0],d="",g="0";if(u<0||u>20)throw new c("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(d="-",s=-s),s>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(s*y(2,69,1))-69)<0?s*y(2,-e,1):s/y(2,e,1),r*=4503599627370496,(e=52-e)>0){for(m(h,0,r),n=u;n>=7;)m(h,1e7,0),n-=7;for(m(h,y(10,n,1),0),n=e-1;n>=23;)v(h,1<<23),n-=23;v(h,1<<n),m(h,1,1),v(h,2),g=b(h)}else m(h,0,r),m(h,1<<-e,0),g=b(h)+p("0",u);return u>0?d+((i=g.length)<=u?"0."+p("0",u-i)+g:f(g,0,i-u)+"."+f(g,i-u)):d+g}})},9085:(t,e,r)=>{var n=r(6518),i=r(4213);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9904:(t,e,r)=>{r(6518)({target:"Object",stat:!0,sham:!r(3724)},{create:r(2360)})},7945:(t,e,r)=>{var n=r(6518),i=r(3724),o=r(6801).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!i},{defineProperties:o})},4185:(t,e,r)=>{var n=r(6518),i=r(3724),o=r(4913).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},5506:(t,e,r)=>{var n=r(6518),i=r(2357).entries;n({target:"Object",stat:!0},{entries:function(t){return i(t)}})},3921:(t,e,r)=>{var n=r(6518),i=r(2652),o=r(4659);n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,r){o(e,t,r)}),{AS_ENTRIES:!0}),e}})},3851:(t,e,r)=>{var n=r(6518),i=r(9039),o=r(5397),a=r(7347).f,s=r(3724);n({target:"Object",stat:!0,forced:!s||i((function(){a(1)})),sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},1278:(t,e,r)=>{var n=r(6518),i=r(3724),o=r(5031),a=r(5397),s=r(7347),u=r(4659);n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,r,n=a(t),i=s.f,c=o(n),l={},h=0;c.length>h;)void 0!==(r=i(n,e=c[h++]))&&u(l,e,r);return l}})},9773:(t,e,r)=>{var n=r(6518),i=r(4495),o=r(9039),a=r(3717),s=r(8981);n({target:"Object",stat:!0,forced:!i||o((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(s(t)):[]}})},875:(t,e,r)=>{var n=r(6518),i=r(9039),o=r(8981),a=r(2787),s=r(2211);n({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},9432:(t,e,r)=>{var n=r(6518),i=r(8981),o=r(1072);n({target:"Object",stat:!0,forced:r(9039)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},287:(t,e,r)=>{r(6518)({target:"Object",stat:!0},{setPrototypeOf:r(2967)})},6099:(t,e,r)=>{var n=r(2140),i=r(6840),o=r(3179);n||i(Object.prototype,"toString",o,{unsafe:!0})},6034:(t,e,r)=>{var n=r(6518),i=r(2357).values;n({target:"Object",stat:!0},{values:function(t){return i(t)}})},8459:(t,e,r)=>{var n=r(6518),i=r(3904);n({global:!0,forced:parseFloat!==i},{parseFloat:i})},8940:(t,e,r)=>{var n=r(6518),i=r(2703);n({global:!0,forced:parseInt!==i},{parseInt:i})},6499:(t,e,r)=>{var n=r(6518),i=r(9565),o=r(9306),a=r(6043),s=r(1103),u=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{all:function(t){var e=this,r=a.f(e),n=r.resolve,c=r.reject,l=s((function(){var r=o(e.resolve),a=[],s=0,l=1;u(t,(function(t){var o=s++,u=!1;l++,i(r,e,t).then((function(t){u||(u=!0,a[o]=t,--l||n(a))}),c)})),--l||n(a)}));return l.error&&c(l.value),r.promise}})},2003:(t,e,r)=>{var n=r(6518),i=r(6395),o=r(916).CONSTRUCTOR,a=r(550),s=r(7751),u=r(4901),c=r(6840),l=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!i&&u(a)){var h=s("Promise").prototype.catch;l.catch!==h&&c(l,"catch",h,{unsafe:!0})}},436:(t,e,r)=>{var n,i,o,a=r(6518),s=r(6395),u=r(9088),c=r(4475),l=r(9565),h=r(6840),p=r(2967),f=r(687),d=r(7633),y=r(9306),m=r(4901),v=r(34),b=r(679),g=r(2293),w=r(9225).set,O=r(1955),j=r(3138),_=r(1103),k=r(8265),x=r(1181),E=r(550),S=r(916),P=r(6043),C="Promise",T=S.CONSTRUCTOR,A=S.REJECTION_EVENT,I=S.SUBCLASSING,L=x.getterFor(C),R=x.set,N=E&&E.prototype,B=E,F=N,D=c.TypeError,V=c.document,$=c.process,M=P.f,W=M,z=!!(V&&V.createEvent&&c.dispatchEvent),H="unhandledrejection",q=function(t){var e;return!(!v(t)||!m(e=t.then))&&e},U=function(t,e){var r,n,i,o=e.value,a=1===e.state,s=a?t.ok:t.fail,u=t.resolve,c=t.reject,h=t.domain;try{s?(a||(2===e.rejection&&K(e),e.rejection=1),!0===s?r=o:(h&&h.enter(),r=s(o),h&&(h.exit(),i=!0)),r===t.promise?c(new D("Promise-chain cycle")):(n=q(r))?l(n,r,u,c):u(r)):c(o)}catch(t){h&&!i&&h.exit(),c(t)}},G=function(t,e){t.notified||(t.notified=!0,O((function(){for(var r,n=t.reactions;r=n.get();)U(r,t);t.notified=!1,e&&!t.rejection&&Z(t)})))},J=function(t,e,r){var n,i;z?((n=V.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),c.dispatchEvent(n)):n={promise:e,reason:r},!A&&(i=c["on"+t])?i(n):t===H&&j("Unhandled promise rejection",r)},Z=function(t){l(w,c,(function(){var e,r=t.facade,n=t.value;if(Y(t)&&(e=_((function(){u?$.emit("unhandledRejection",n,r):J(H,r,n)})),t.rejection=u||Y(t)?2:1,e.error))throw e.value}))},Y=function(t){return 1!==t.rejection&&!t.parent},K=function(t){l(w,c,(function(){var e=t.facade;u?$.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},X=function(t,e,r){return function(n){t(e,n,r)}},Q=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,G(t,!0))},tt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new D("Promise can't be resolved itself");var n=q(e);n?O((function(){var r={done:!1};try{l(n,e,X(tt,r,t),X(Q,r,t))}catch(e){Q(r,e,t)}})):(t.value=e,t.state=1,G(t,!1))}catch(e){Q({done:!1},e,t)}}};if(T&&(F=(B=function(t){b(this,F),y(t),l(n,this);var e=L(this);try{t(X(tt,e),X(Q,e))}catch(t){Q(e,t)}}).prototype,(n=function(t){R(this,{type:C,done:!1,notified:!1,parent:!1,reactions:new k,rejection:!1,state:0,value:void 0})}).prototype=h(F,"then",(function(t,e){var r=L(this),n=M(g(this,B));return r.parent=!0,n.ok=!m(t)||t,n.fail=m(e)&&e,n.domain=u?$.domain:void 0,0===r.state?r.reactions.add(n):O((function(){U(n,r)})),n.promise})),i=function(){var t=new n,e=L(t);this.promise=t,this.resolve=X(tt,e),this.reject=X(Q,e)},P.f=M=function(t){return t===B||void 0===t?new i(t):W(t)},!s&&m(E)&&N!==Object.prototype)){o=N.then,I||h(N,"then",(function(t,e){var r=this;return new B((function(t,e){l(o,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete N.constructor}catch(t){}p&&p(N,F)}a({global:!0,constructor:!0,wrap:!0,forced:T},{Promise:B}),f(B,C,!1,!0),d(C)},3362:(t,e,r)=>{r(436),r(6499),r(2003),r(7743),r(1481),r(280)},7743:(t,e,r)=>{var n=r(6518),i=r(9565),o=r(9306),a=r(6043),s=r(1103),u=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{race:function(t){var e=this,r=a.f(e),n=r.reject,c=s((function(){var a=o(e.resolve);u(t,(function(t){i(a,e,t).then(r.resolve,n)}))}));return c.error&&n(c.value),r.promise}})},1481:(t,e,r)=>{var n=r(6518),i=r(6043);n({target:"Promise",stat:!0,forced:r(916).CONSTRUCTOR},{reject:function(t){var e=i.f(this);return(0,e.reject)(t),e.promise}})},280:(t,e,r)=>{var n=r(6518),i=r(7751),o=r(6395),a=r(550),s=r(916).CONSTRUCTOR,u=r(3438),c=i("Promise"),l=o&&!s;n({target:"Promise",stat:!0,forced:o||s},{resolve:function(t){return u(l&&this===c?a:this,t)}})},825:(t,e,r)=>{var n=r(6518),i=r(7751),o=r(8745),a=r(566),s=r(5548),u=r(8551),c=r(34),l=r(2360),h=r(9039),p=i("Reflect","construct"),f=Object.prototype,d=[].push,y=h((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),m=!h((function(){p((function(){}))})),v=y||m;n({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(t,e){s(t),u(e);var r=arguments.length<3?t:s(arguments[2]);if(m&&!y)return p(t,e,r);if(t===r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return o(d,n,e),new(o(a,t,n))}var i=r.prototype,h=l(c(i)?i:f),v=o(t,h,e);return c(v)?v:h}})},888:(t,e,r)=>{var n=r(6518),i=r(9565),o=r(34),a=r(8551),s=r(6575),u=r(7347),c=r(2787);n({target:"Reflect",stat:!0},{get:function t(e,r){var n,l,h=arguments.length<3?e:arguments[2];return a(e)===h?e[r]:(n=u.f(e,r))?s(n)?n.value:void 0===n.get?void 0:i(n.get,h):o(l=c(e))?t(l,r,h):void 0}})},4864:(t,e,r)=>{var n=r(3724),i=r(4475),o=r(9504),a=r(2796),s=r(3167),u=r(6699),c=r(2360),l=r(8480).f,h=r(1625),p=r(788),f=r(655),d=r(1034),y=r(8429),m=r(1056),v=r(6840),b=r(9039),g=r(9297),w=r(1181).enforce,O=r(7633),j=r(8227),_=r(3635),k=r(8814),x=j("match"),E=i.RegExp,S=E.prototype,P=i.SyntaxError,C=o(S.exec),T=o("".charAt),A=o("".replace),I=o("".indexOf),L=o("".slice),R=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,B=/a/g,F=new E(N)!==N,D=y.MISSED_STICKY,V=y.UNSUPPORTED_Y;if(a("RegExp",n&&(!F||D||_||k||b((function(){return B[x]=!1,E(N)!==N||E(B)===B||"/a/i"!==String(E(N,"i"))}))))){for(var $=function(t,e){var r,n,i,o,a,l,y=h(S,this),m=p(t),v=void 0===e,b=[],O=t;if(!y&&m&&v&&t.constructor===$)return t;if((m||h(S,t))&&(t=t.source,v&&(e=d(O))),t=void 0===t?"":f(t),e=void 0===e?"":f(e),O=t,_&&"dotAll"in N&&(n=!!e&&I(e,"s")>-1)&&(e=A(e,/s/g,"")),r=e,D&&"sticky"in N&&(i=!!e&&I(e,"y")>-1)&&V&&(e=A(e,/y/g,"")),k&&(o=function(t){for(var e,r=t.length,n=0,i="",o=[],a=c(null),s=!1,u=!1,l=0,h="";n<=r;n++){if("\\"===(e=T(t,n)))e+=T(t,++n);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:C(R,L(t,n+1))&&(n+=2,u=!0),i+=e,l++;continue;case">"===e&&u:if(""===h||g(a,h))throw new P("Invalid capture group name");a[h]=!0,o[o.length]=[h,l],u=!1,h="";continue}u?h+=e:i+=e}return[i,o]}(t),t=o[0],b=o[1]),a=s(E(t,e),y?this:S,$),(n||i||b.length)&&(l=w(a),n&&(l.dotAll=!0,l.raw=$(function(t){for(var e,r=t.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(e=T(t,n))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+T(t,++n);return i}(t),r)),i&&(l.sticky=!0),b.length&&(l.groups=b)),t!==O)try{u(a,"source",""===O?"(?:)":O)}catch(t){}return a},M=l(E),W=0;M.length>W;)m($,E,M[W++]);S.constructor=$,$.prototype=S,v(i,"RegExp",$,{constructor:!0})}O("RegExp")},7495:(t,e,r)=>{var n=r(6518),i=r(7323);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},8781:(t,e,r)=>{var n=r(350).PROPER,i=r(6840),o=r(8551),a=r(655),s=r(9039),u=r(1034),c="toString",l=RegExp.prototype,h=l[c],p=s((function(){return"/a/b"!==h.call({source:"a",flags:"b"})})),f=n&&h.name!==c;(p||f)&&i(l,c,(function(){var t=o(this);return"/"+a(t.source)+"/"+a(u(t))}),{unsafe:!0})},2405:(t,e,r)=>{r(6468)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(6938))},1415:(t,e,r)=>{r(2405)},1699:(t,e,r)=>{var n=r(6518),i=r(9504),o=r(5749),a=r(7750),s=r(655),u=r(1436),c=i("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(s(a(this)),s(o(t)),arguments.length>1?arguments[1]:void 0)}})},7764:(t,e,r)=>{var n=r(8183).charAt,i=r(655),o=r(1181),a=r(1088),s=r(2529),u="String Iterator",c=o.set,l=o.getterFor(u);a(String,"String",(function(t){c(this,{type:u,string:i(t),index:0})}),(function(){var t,e=l(this),r=e.string,i=e.index;return i>=r.length?s(void 0,!0):(t=n(r,i),e.index+=t.length,s(t,!1))}))},778:(t,e,r)=>{var n=r(6518),i=r(7240);n({target:"String",proto:!0,forced:r(3061)("link")},{link:function(t){return i(this,"a","href",t)}})},1761:(t,e,r)=>{var n=r(9565),i=r(9228),o=r(8551),a=r(4117),s=r(8014),u=r(655),c=r(7750),l=r(5966),h=r(7829),p=r(6682);i("match",(function(t,e,r){return[function(e){var r=c(this),i=a(e)?void 0:l(e,t);return i?n(i,e,r):new RegExp(e)[t](u(r))},function(t){var n=o(this),i=u(t),a=r(e,n,i);if(a.done)return a.value;if(!n.global)return p(n,i);var c=n.unicode;n.lastIndex=0;for(var l,f=[],d=0;null!==(l=p(n,i));){var y=u(l[0]);f[d]=y,""===y&&(n.lastIndex=h(i,s(n.lastIndex),c)),d++}return 0===d?null:f}]}))},5440:(t,e,r)=>{var n=r(8745),i=r(9565),o=r(9504),a=r(9228),s=r(9039),u=r(8551),c=r(4901),l=r(4117),h=r(1291),p=r(8014),f=r(655),d=r(7750),y=r(7829),m=r(5966),v=r(2478),b=r(6682),g=r(8227)("replace"),w=Math.max,O=Math.min,j=o([].concat),_=o([].push),k=o("".indexOf),x=o("".slice),E="$0"==="a".replace(/./,"$0"),S=!!/./[g]&&""===/./[g]("a","$0");a("replace",(function(t,e,r){var o=S?"$":"$0";return[function(t,r){var n=d(this),o=l(t)?void 0:m(t,g);return o?i(o,t,n,r):i(e,f(n),t,r)},function(t,i){var a=u(this),s=f(t);if("string"==typeof i&&-1===k(i,o)&&-1===k(i,"$<")){var l=r(e,a,s,i);if(l.done)return l.value}var d=c(i);d||(i=f(i));var m,g=a.global;g&&(m=a.unicode,a.lastIndex=0);for(var E,S=[];null!==(E=b(a,s))&&(_(S,E),g);)""===f(E[0])&&(a.lastIndex=y(s,p(a.lastIndex),m));for(var P,C="",T=0,A=0;A<S.length;A++){for(var I,L=f((E=S[A])[0]),R=w(O(h(E.index),s.length),0),N=[],B=1;B<E.length;B++)_(N,void 0===(P=E[B])?P:String(P));var F=E.groups;if(d){var D=j([L],N,R,s);void 0!==F&&_(D,F),I=f(n(i,void 0,D))}else I=v(L,s,R,N,F,i);R>=T&&(C+=x(s,T,R)+I,T=R+L.length)}return C+x(s,T)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!E||S)},5746:(t,e,r)=>{var n=r(9565),i=r(9228),o=r(8551),a=r(4117),s=r(7750),u=r(3470),c=r(655),l=r(5966),h=r(6682);i("search",(function(t,e,r){return[function(e){var r=s(this),i=a(e)?void 0:l(e,t);return i?n(i,e,r):new RegExp(e)[t](c(r))},function(t){var n=o(this),i=c(t),a=r(e,n,i);if(a.done)return a.value;var s=n.lastIndex;u(s,0)||(n.lastIndex=0);var l=h(n,i);return u(n.lastIndex,s)||(n.lastIndex=s),null===l?-1:l.index}]}))},744:(t,e,r)=>{var n=r(9565),i=r(9504),o=r(9228),a=r(8551),s=r(4117),u=r(7750),c=r(2293),l=r(7829),h=r(8014),p=r(655),f=r(5966),d=r(6682),y=r(8429),m=r(9039),v=y.UNSUPPORTED_Y,b=Math.min,g=i([].push),w=i("".slice),O=!m((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),j="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;o("split",(function(t,e,r){var i="0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:n(e,this,t,r)}:e;return[function(e,r){var o=u(this),a=s(e)?void 0:f(e,t);return a?n(a,e,o,r):n(i,p(o),e,r)},function(t,n){var o=a(this),s=p(t);if(!j){var u=r(i,o,s,n,i!==e);if(u.done)return u.value}var f=c(o,RegExp),y=o.unicode,m=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"g":"y"),O=new f(v?"^(?:"+o.source+")":o,m),_=void 0===n?4294967295:n>>>0;if(0===_)return[];if(0===s.length)return null===d(O,s)?[s]:[];for(var k=0,x=0,E=[];x<s.length;){O.lastIndex=v?0:x;var S,P=d(O,v?w(s,x):s);if(null===P||(S=b(h(O.lastIndex+(v?x:0)),s.length))===k)x=l(s,x,y);else{if(g(E,w(s,k,x)),E.length===_)return E;for(var C=1;C<=P.length-1;C++)if(g(E,P[C]),E.length===_)return E;x=k=S}}return g(E,w(s,k)),E}]}),j||!O,v)},1392:(t,e,r)=>{var n,i=r(6518),o=r(7476),a=r(7347).f,s=r(8014),u=r(655),c=r(5749),l=r(7750),h=r(1436),p=r(6395),f=o("".slice),d=Math.min,y=h("startsWith");i({target:"String",proto:!0,forced:!(!p&&!y&&(n=a(String.prototype,"startsWith"),n&&!n.writable)||y)},{startsWith:function(t){var e=u(l(this));c(t);var r=s(d(arguments.length>1?arguments[1]:void 0,e.length)),n=u(t);return f(e,r,r+n.length)===n}})},2762:(t,e,r)=>{var n=r(6518),i=r(3802).trim;n({target:"String",proto:!0,forced:r(706)("trim")},{trim:function(){return i(this)}})},6412:(t,e,r)=>{r(511)("asyncIterator")},6761:(t,e,r)=>{var n=r(6518),i=r(4475),o=r(9565),a=r(9504),s=r(6395),u=r(3724),c=r(4495),l=r(9039),h=r(9297),p=r(1625),f=r(8551),d=r(5397),y=r(6969),m=r(655),v=r(6980),b=r(2360),g=r(1072),w=r(8480),O=r(298),j=r(3717),_=r(7347),k=r(4913),x=r(6801),E=r(8773),S=r(6840),P=r(2106),C=r(5745),T=r(6119),A=r(421),I=r(3392),L=r(8227),R=r(1951),N=r(511),B=r(8242),F=r(687),D=r(1181),V=r(9213).forEach,$=T("hidden"),M="Symbol",W="prototype",z=D.set,H=D.getterFor(M),q=Object[W],U=i.Symbol,G=U&&U[W],J=i.RangeError,Z=i.TypeError,Y=i.QObject,K=_.f,X=k.f,Q=O.f,tt=E.f,et=a([].push),rt=C("symbols"),nt=C("op-symbols"),it=C("wks"),ot=!Y||!Y[W]||!Y[W].findChild,at=function(t,e,r){var n=K(q,e);n&&delete q[e],X(t,e,r),n&&t!==q&&X(q,e,n)},st=u&&l((function(){return 7!==b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?at:X,ut=function(t,e){var r=rt[t]=b(G);return z(r,{type:M,tag:t,description:e}),u||(r.description=e),r},ct=function(t,e,r){t===q&&ct(nt,e,r),f(t);var n=y(e);return f(r),h(rt,n)?(r.enumerable?(h(t,$)&&t[$][n]&&(t[$][n]=!1),r=b(r,{enumerable:v(0,!1)})):(h(t,$)||X(t,$,v(1,b(null))),t[$][n]=!0),st(t,n,r)):X(t,n,r)},lt=function(t,e){f(t);var r=d(e),n=g(r).concat(dt(r));return V(n,(function(e){u&&!o(ht,r,e)||ct(t,e,r[e])})),t},ht=function(t){var e=y(t),r=o(tt,this,e);return!(this===q&&h(rt,e)&&!h(nt,e))&&(!(r||!h(this,e)||!h(rt,e)||h(this,$)&&this[$][e])||r)},pt=function(t,e){var r=d(t),n=y(e);if(r!==q||!h(rt,n)||h(nt,n)){var i=K(r,n);return!i||!h(rt,n)||h(r,$)&&r[$][n]||(i.enumerable=!0),i}},ft=function(t){var e=Q(d(t)),r=[];return V(e,(function(t){h(rt,t)||h(A,t)||et(r,t)})),r},dt=function(t){var e=t===q,r=Q(e?nt:d(t)),n=[];return V(r,(function(t){!h(rt,t)||e&&!h(q,t)||et(n,rt[t])})),n};c||(S(G=(U=function(){if(p(G,this))throw new Z("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?m(arguments[0]):void 0,e=I(t),r=function(t){var n=void 0===this?i:this;n===q&&o(r,nt,t),h(n,$)&&h(n[$],e)&&(n[$][e]=!1);var a=v(1,t);try{st(n,e,a)}catch(t){if(!(t instanceof J))throw t;at(n,e,a)}};return u&&ot&&st(q,e,{configurable:!0,set:r}),ut(e,t)})[W],"toString",(function(){return H(this).tag})),S(U,"withoutSetter",(function(t){return ut(I(t),t)})),E.f=ht,k.f=ct,x.f=lt,_.f=pt,w.f=O.f=ft,j.f=dt,R.f=function(t){return ut(L(t),t)},u&&(P(G,"description",{configurable:!0,get:function(){return H(this).description}}),s||S(q,"propertyIsEnumerable",ht,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:U}),V(g(it),(function(t){N(t)})),n({target:M,stat:!0,forced:!c},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(t,e){return void 0===e?b(t):lt(b(t),e)},defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:pt}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ft}),B(),F(U,M),A[$]=!0},9463:(t,e,r)=>{var n=r(6518),i=r(3724),o=r(4475),a=r(9504),s=r(9297),u=r(4901),c=r(1625),l=r(655),h=r(2106),p=r(7740),f=o.Symbol,d=f&&f.prototype;if(i&&u(f)&&(!("description"in d)||void 0!==f().description)){var y={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=c(d,this)?new f(t):void 0===t?f():f(t);return""===t&&(y[e]=!0),e};p(m,f),m.prototype=d,d.constructor=m;var v="Symbol(description detection)"===String(f("description detection")),b=a(d.valueOf),g=a(d.toString),w=/^Symbol\((.*)\)[^)]+$/,O=a("".replace),j=a("".slice);h(d,"description",{configurable:!0,get:function(){var t=b(this);if(s(y,t))return"";var e=g(t),r=v?j(e,7,-1):O(e,w,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:m})}},1510:(t,e,r)=>{var n=r(6518),i=r(7751),o=r(9297),a=r(655),s=r(5745),u=r(1296),c=s("string-to-symbol-registry"),l=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=a(t);if(o(c,e))return c[e];var r=i("Symbol")(e);return c[e]=r,l[r]=e,r}})},2259:(t,e,r)=>{r(511)("iterator")},2675:(t,e,r)=>{r(6761),r(1510),r(7812),r(3110),r(9773)},7812:(t,e,r)=>{var n=r(6518),i=r(9297),o=r(757),a=r(6823),s=r(5745),u=r(1296),c=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{keyFor:function(t){if(!o(t))throw new TypeError(a(t)+" is not a symbol");if(i(c,t))return c[t]}})},5700:(t,e,r)=>{var n=r(511),i=r(8242);n("toPrimitive"),i()},8125:(t,e,r)=>{var n=r(7751),i=r(511),o=r(687);i("toStringTag"),o(n("Symbol"),"Symbol")},5240:(t,e,r)=>{r(6468)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(4006))},958:(t,e,r)=>{r(5240)},3500:(t,e,r)=>{var n=r(4475),i=r(7400),o=r(9296),a=r(235),s=r(6699),u=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var c in i)i[c]&&u(n[c]&&n[c].prototype);u(o)},2953:(t,e,r)=>{var n=r(4475),i=r(7400),o=r(9296),a=r(3792),s=r(6699),u=r(687),c=r(8227)("iterator"),l=a.values,h=function(t,e){if(t){if(t[c]!==l)try{s(t,c,l)}catch(e){t[c]=l}if(u(t,e,!0),i[e])for(var r in a)if(t[r]!==a[r])try{s(t,r,a[r])}catch(e){t[r]=a[r]}}};for(var p in i)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")},5575:(t,e,r)=>{var n=r(6518),i=r(4475),o=r(9472)(i.setInterval,!0);n({global:!0,bind:!0,forced:i.setInterval!==o},{setInterval:o})},4599:(t,e,r)=>{var n=r(6518),i=r(4475),o=r(9472)(i.setTimeout,!0);n({global:!0,bind:!0,forced:i.setTimeout!==o},{setTimeout:o})},6031:(t,e,r)=>{r(5575),r(4599)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{r.r(n),r.d(n,{JFEditor:()=>Qs}),r(2675),r(9463),r(6412),r(2259),r(5700),r(8125),r(8706),r(2008),r(113),r(1629),r(3418),r(4346),r(3792),r(2712),r(4490),r(4782),r(739),r(9572),r(3288),r(4170),r(2010),r(4731),r(479),r(2892),r(9085),r(9904),r(7945),r(4185),r(3851),r(1278),r(875),r(9432),r(287),r(6099),r(6034),r(3362),r(7495),r(8781),r(7764),r(5440),r(3500),r(2953),r(5506),r(4864),r(4423),r(1699);var t=[function(t){return"string"===t.type&&["xhtml","bbcode"].includes(t.format)&&"sceditor"},function(t){return"string"===t.type&&"markdown"===t.format&&"simplemde"},function(t){return"string"===t.type&&"jodit"===t.format&&"jodit"},function(t){return"string"===t.type&&"uuid"===t.format&&"uuid"},function(t){return("info"===t.format||"info"===t.type)&&"info"},function(t){return"button"===t.format&&"button"},function(t){return"lazyButton"===t.format&&"lazyButton"},function(t){if(("integer"===t.type||"number"===t.type)&&"stepper"===t.format)return"stepper"},function(t){return"object"===t.type&&t.options&&t.options.layout&&"popup"===t.options.layout.name&&"popup"},function(t){return"object"===t.type&&t.options&&t.options.layout&&"survey"===t.options.layout.name&&"survey"},function(t){if(t.links)for(var e=0;e<t.links.length;e++)if(t.links[e].rel&&"describedby"===t.links[e].rel.toLowerCase())return"describedBy"},function(t){return["string","integer"].includes(t.type)&&["starrating","rating"].includes(t.format)&&"starrating"},function(t){var e,r;return(t.oneOf||t.anyOf)&&!0===(null===(e=null===(r=t.options)||void 0===r?void 0:r.switcher)||void 0===e||e)&&"multiple"},function(t){return t.if&&"multiple"},function(t,e){if(t&&"array"===t.type&&t.items){var r=e.expandSchema(t.items);if(!Array.isArray(r)&&["string","number","integer"].includes(r.type)){var n,i;if("choices"===t.format)return"arrayChoices";var o=null===(n=t.options)||void 0===n||null===(n=n.input)||void 0===n?void 0:n.name;if("string"==typeof o&&o.toLowerCase().includes("multiselect"))return"tagmultiselect";var a=null===(i=r.options)||void 0===i||null===(i=i.input)||void 0===i?void 0:i.name;return"string"==typeof a&&a.toLowerCase().includes("multiselect")?"tagmultiselect":Array.isArray(r.enum)&&r.enum.length?"multiselect":"table"}}},function(t){if(t.enum){if("array"===t.type||"object"===t.type)return"enum";if("number"===t.type||"integer"===t.type||"string"===t.type)return"select2"===t.format?"select2":"selectize"===t.format?"selectize":"choices"===t.format?"choices":"select"}},function(t){if(t.enumSource)return"select2"===t.format?"select2":"selectize"===t.format?"selectize":"choices"===t.format?"choices":"select"},function(t){return"array"===t.type&&t.options&&t.options.layout&&"table"===t.options.layout.name&&"table"},function(t){return"string"===t.type&&"url"===t.format&&window.FileReader&&t.options&&t.options.upload===Object(t.options.upload)&&"upload"},function(t){return"string"===t.type&&t.media&&"base64"===t.media.binaryEncoding&&"base64"},function(t){return"any"===t.type&&"multiple"},function(t){if("boolean"===t.type)return"boolean"},function(t){return"string"===t.type&&"signature"===t.format&&"signature"},function(t){if("string"==typeof t.type&&["string","number","integer","boolean","null","array","object"].includes(t.type))return t.type},function(t){return!t.type&&t.properties&&"object"},function(t){return"string"!=typeof t.type&&"multiple"},function(t){return"string"==typeof t.type&&"string"}];function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t){return!(null===t||"object"!==e(t)||t.nodeType||t===t.window||t.constructor&&!c(t.constructor.prototype,"isPrototypeOf"))}function o(t){return i(t)?a({},t):Array.isArray(t)?t.map(o):t}function a(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.forEach((function(e){e&&Object.keys(e).forEach((function(r){e[r]&&i(e[r])?(c(t,r)||(t[r]={}),a(t[r],e[r])):Array.isArray(e[r])?t[r]=o(e[r]):t[r]=e[r]}))})),t}function s(t,e){if(t instanceof Element){var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)}}function u(t){return t&&("[object ShadowRoot]"===t.toString()?t:u(t.parentNode))}function c(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)}r(825),r(888),r(8598),r(1415),r(1761),r(8431),r(5276),r(5086),r(1392),r(778),r(2062),r(8459),r(8940);var l=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,h=/^\s*(-|\+)?(\d+)\s*$/;function p(t){return!!t&&"object"===e(t)&&!Array.isArray(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e,r){return(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function w(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}r(5428);var O=["=","==","!=",">","<",">=","<=","in","contains","matches","exists"],j=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"normalizeSchema",value:function(t){var e=this;if("string"==typeof t||"number"==typeof t||"boolean"==typeof t||Array.isArray(t))return{op:"==",value:t};if(!t||"object"!==b(t))return t;if(t.and||t.or){var r=t.and?"and":"or";return v({},r,t[r].map((function(t){return e.normalizeSchema(t)})))}if(t.not)return{not:this.normalizeSchema(t.not)};if(1===Object.keys(t).length&&O.includes(Object.keys(t)[0])){var n=y(Object.keys(t),1)[0];return{op:n,value:t[n]}}if(t.op){var i=d({},t);return"left"in i&&(i.left=this.normalizeSchema(i.left)),"right"in i&&(i.right=this.normalizeSchema(i.right)),i}var o=Object.keys(t);return o.length>0?{and:o.map((function(e){var r=t[e];return r&&"object"===b(r)&&("op"in r||"and"in r||"or"in r||"not"in r)?d({path:e},r):{path:e,op:"==",value:r}}))}:t}},{key:"validateSchema",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root";if(!t||"object"!==b(t))throw new Error("Invalid dependency schema at ".concat(r));if("and"in t&&"or"in t)throw new Error('Schema cannot contain both "and" and "or" at '.concat(r));if(t.and||t.or){var n=t.and?"and":"or";if(!Array.isArray(t[n])||0===t[n].length)throw new Error("".concat(n," must be a non-empty array at ").concat(r));t[n].forEach((function(t,i){return e.validateSchema(t,"".concat(r,".").concat(n,"[").concat(i,"]"))}))}else if(t.not)this.validateSchema(t.not,"".concat(r,".not"));else{if(!t.op){if("object"===b(t)&&!Array.isArray(t)&&1===Object.keys(t).length){var i=y(Object.keys(t),1)[0];if(O.includes(i))return this.validateSchema({op:i,value:t[i]},r)}if("object"===b(t)&&!Array.isArray(t)){var o=Object.keys(t);if(0===o.length)throw new Error("Invalid dependency schema at ".concat(r));var a={and:o.map((function(e){return{path:e,op:"==",value:t[e]}}))};return this.validateSchema(a,r)}throw new Error("Invalid dependency schema at ".concat(r))}if(!O.includes(t.op))throw new Error('Invalid operator "'.concat(t.op,'" at ').concat(r));var s="left"in t||"right"in t,u="path"in t,c="value"in t;if("exists"===t.op&&(c||s))throw new Error('"exists" only supports optional "path" at '.concat(r));if("matches"===t.op&&c&&"string"!=typeof t.value&&!(t.value instanceof RegExp))throw new Error('"matches" expects regex or string at '.concat(r));if(!(s||u||c))throw new Error("Comparison missing operands at ".concat(r));if(s&&u||s&&c)throw new Error('Cannot mix explicit operands with "path" or "value" at '.concat(r))}}},{key:"shallowEqual",value:function(t,e){return t===e||!(!t||!e||"object"!==b(t)||"object"!==b(e))&&Object.keys(e).every((function(r){return t[r]===e[r]}))}},{key:"compare",value:function(t,e,r){switch(t){case"==":return"object"===b(e)&&"object"===b(r)?this.shallowEqual(e,r):e===r;case"!=":return"object"===b(e)&&"object"===b(r)?!this.shallowEqual(e,r):e!==r;case">":return Number.isFinite(e)&&Number.isFinite(r)&&e>r;case"<":return Number.isFinite(e)&&Number.isFinite(r)&&e<r;case">=":return Number.isFinite(e)&&Number.isFinite(r)&&e>=r;case"<=":return Number.isFinite(e)&&Number.isFinite(r)&&e<=r;case"in":return Array.isArray(r)&&r.includes(e);case"contains":return("string"==typeof e&&"string"==typeof r||!!Array.isArray(e))&&e.includes(r);case"matches":try{return"string"==typeof e&&(r instanceof RegExp?r:new RegExp(r)).test(e)}catch(t){return!1}case"exists":return null!=e;default:return!1}}},{key:"evaluate",value:function(t,e,r){var n=this;if(e.and)return e.and.every((function(e){return n.evaluate(t,e,r)}));if(e.or)return e.or.some((function(e){return n.evaluate(t,e,r)}));if(e.not)return!this.evaluate(t,e.not,r);if(e.op){var i,o=t;if("left"in e&&"right"in e)o=e.left,i=e.right;else if("path"in e&&"value"in e){var a=r.getEditor(e.path);o=null==a?void 0:a.getValue(),i=e.value}else if("path"in e){var s=r.getEditor(e.path);i=null==s?void 0:s.getValue()}else"value"in e&&(i=e.value);return"exists"===e.op?this.compare("exists",o):void 0!==o&&void 0!==i&&this.compare(e.op,o,i)}return!1}},{key:"getDependencyPaths",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return t&&"object"===b(t)?t.and||t.or?(t[t.and?"and":"or"].forEach((function(t){return e.getDependencyPaths(t,r)})),r):t.not?(this.getDependencyPaths(t.not,r),r):(t.op&&"string"==typeof t.path&&r.add(t.path),r):r}},{key:"checkDependency",value:function(t,e,r){if(t.jsoneditor){var n=t.jsoneditor.getEditor(e),i=null==n?void 0:n.getValue();n&&void 0!==i&&n.dependenciesFulfilled?t.dependenciesFulfilled=this.evaluate(i,r,t.jsoneditor):t.dependenciesFulfilled=!1}}}],null&&g(t.prototype,null),e&&g(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||S(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=S(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function S(t,e){if(t){if("string"==typeof t)return P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A(n.key),n)}}function A(t){var e=function(t,e){if("object"!=C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}var I=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaults=r,this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.translateProperty=this.jsoneditor.translateProperty||this.defaults.translateProperty,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.options=a({},this.schema.options||{},e),this.isMetaSchema=this.jsoneditor.options.isMetaSchema,this.layout=this.getLayout(),this.inputOptions=this.getInputOptions(),this.controlOptions=this.getControlOptions(),this.active=!0,this.enforceConstEnabled=!0,this.formname=this.jsoneditor.options.form_name_root||"root",this.schemaName=this.jsoneditor.options.schemaName,e.path||this.schema.id||(this.schema.id=this.formname),this.path=e.path||this.formname,this.pathNoIndex=e.pathNoIndex||this.path,this.enforceDisabledFields(),this.options.ignore||this.jsoneditor.pendingPostBuild++,this.depth=this.getPathDepth()-1,this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.parent=e.parent,this.key=void 0!==this.parent?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,this.jsoneditor.treeManager&&this.jsoneditor.treeManager.handleEvent("editorConstructor",this,e),e.container&&this.setContainer(e.container),this.registerDependencies()},e=[{key:"enforceDisabledFields",value:function(){if(Array.isArray(this.jsoneditor.options.disableFields)){var t=this.jsoneditor.options.disableFields,e=function(t){return"string"==typeof t?t.replace(/^root\./,""):t},r=e(this.path),n=e(this.pathNoIndex);t.some((function(t){var i=e(t);return i===r||i===n}))&&(this.options.hidden=!0,this.format="hidden",this.active=!1)}}},{key:"onChildEditorChange",value:function(t,e){this.onChange(!0,!1,e)}},{key:"notify",value:function(){this.path&&(this.jsoneditor.notifyWatchers(this.path,this),this.path!==this.pathNoIndex&&this.jsoneditor.notifyWatchers(this.pathNoIndex,this))}},{key:"change",value:function(t){this.parent?this.parent.onChildEditorChange(this,t):this.jsoneditor&&this.jsoneditor.onChange(t)}},{key:"onChange",value:function(t,e,r){this.notify(),e||this.watch_listener&&this.watch_listener(),t&&this.change(r)}},{key:"register",value:function(){if(this.jsoneditor.registerEditor(this),this.input&&!this.label){var t=this.getTitle()||this.formname;this.input.setAttribute("aria-label",t)}this.onChange()}},{key:"unregister",value:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)}},{key:"getNumColumns",value:function(){return 12}},{key:"isActive",value:function(){return this.active}},{key:"activate",value:function(){this.active=!0,delete this.disableTree,this.enable(),this.change()}},{key:"deactivate",value:function(){this.isRequired()||(this.active=!1,this.disable(),this.change())}},{key:"preBuild",value:function(){}},{key:"build",value:function(){}},{key:"postBuild",value:function(){this.setupWatchListeners(),this.addLinks(),this.register();var t=!1;if(void 0===this.value){var e=this.getDefault();void 0!==e&&(t=!0,this.setValue(e,!0))}t||"function"!=typeof this.layoutEditors||this.layoutEditors(),this.updateHeaderText(),this.onWatchedFieldChange(),this.options.titleHidden&&(this.theme.visuallyHidden(this.label),this.theme.visuallyHidden(this.header)),this.enforceConstEnabled&&this.schema.const&&this.disable(),this.options.ignore||this.postBuildProcessed||(this.jsoneditor.pendingPostBuild--,this.postBuildProcessed=!0),this.jsoneditor.treeManager&&this.jsoneditor.treeManager.handleEvent("postBuildEditor",this),0===this.jsoneditor.pendingPostBuild&&this.jsoneditor.onBuildComplete()}},{key:"registerDependencies",value:function(){var t=this;this.dependenciesFulfilled=!0;var e=this.options.dependencies;if(e){this.dependencySchema=j.normalizeSchema(e),function e(r){if(r&&"object"===C(r))if(r.and||r.or)r[r.and?"and":"or"].forEach(e);else if(r.not)e(r.not);else if(r.path&&!r.path.startsWith(t.jsoneditor.root.path)){var n=t.path.split(".");n[n.length-1]=r.path,r.path=n.join(".")}}(this.dependencySchema),j.validateSchema(this.dependencySchema),this.dependencyPaths=Array.from(j.getDependencyPaths(this.dependencySchema));var r,n=E(this.dependencyPaths);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.jsoneditor.getEditor(i),this.jsoneditor.watch(i,(function(){return t.evaluateDependencies()}))}}catch(t){n.e(t)}finally{n.f()}}}},{key:"evaluateDependencies",value:function(){var t=this.container||this.control;if(t&&this.jsoneditor){var e=this.dependenciesFulfilled;if(this.dependenciesFulfilled=!0,this.dependencySchema&&this.dependencyPaths){var r,n=E(this.dependencyPaths);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.jsoneditor.getEditor(i)?j.checkDependency(this,i,this.dependencySchema):this.dependenciesFulfilled=!1}}catch(t){n.e(t)}finally{n.f()}}this.dependenciesFulfilled!==e&&this.notify();var o=this.dependenciesFulfilled&&!this.options.hidden;if("TD"===t.tagName){var a=o?"block":"none";Object.values(t.childNodes).forEach((function(t){return t.style.display=a}))}else this.theme.toggle(t,o)}}},{key:"setContainer",value:function(t){this.container?console.warn("Warning, container for ".concat(this.path," already exists")):(this.container=t,this.setContainerAttributes(),this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path),this.container.setAttribute("data-schemapath_no_index",this.pathNoIndex))}},{key:"setupWatchListeners",value:function(){var t,e=this;this.watched={},this.watched_values={},this.schema.vars&&(this.schema.watch=this.schema.vars);var r=this.schema.template||this.schema.headerTemplate,n=this.schema.watch?Object.keys(this.schema.watch):r?Object.keys((null===(t=this.parent)||void 0===t||null===(t=t.schema)||void 0===t?void 0:t.properties)||{}):[];if(n.length){var i=this.path;this.watch_listener=function(){e.refreshWatchedFieldValues()&&e.onWatchedFieldChange()},n.forEach((function(t){var n={};if(e.schema.watch&&e.schema.watch[t])"string"==typeof e.schema.watch[t]?n.path=e.schema.watch[t]:n=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){var n,i,o;n=t,i=e,o=r[e],(i=A(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e.schema.watch[t]);else{if(!r)return;n.path="".concat(e.parent.path,".").concat(t)}i&&n.path&&i.startsWith(n.path)&&(e.watchLoop=!0),n.adjustedPath=e.resolveWatchPath(t,n),e.jsoneditor.watch(n.adjustedPath,e.watch_listener),e.watched[t]=n})),this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))}}},{key:"resolveWatchPath",value:function(t,e){var r,n=e.path||t;if(!n)return null;var i,o=n.split(".");i=this.theme.closest(this.container,'[data-schemaid="'.concat(o[0],'"]'))?o.shift():this.jsoneditor.schema.id||this.jsoneditor.root.formname||"#";var a=this.theme.closest(this.container,'[data-schemaid="'.concat(i,'"]'));if(!a)return null;var s=(null===(r=this.parent)||void 0===r||null===(r=r.path)||void 0===r?void 0:r.split(".").slice(1))||[],u=a.getAttribute("data-schemapath"),c=s.length&&o.slice(0,s.length).join(".")===s.join(".")||n.startsWith("".concat(u,"."))||"".concat(u,".").concat(n)in this.jsoneditor.editors?o:[].concat(k(s),k(o));return"".concat(u,".").concat(c.join("."))}},{key:"refreshWatchedFieldValues",value:function(){if(this.watched_values){var t={},e=!1;if(this.watched)for(var r=0,n=Object.entries(this.watched);r<n.length;r++){var i=_(n[r],2),o=i[0],a=i[1],s=a.adjustedPath,u=null;if(s){var c=this.jsoneditor.getEditor(s);c||(s=this.resolveWatchPath(o,a)),(c=this.jsoneditor.getEditor(s))&&(u=c.getValue())}this.watched_values[o]!==u&&(e=!0),t[o]=u}var l=this.getValue();return t.self=l,this.watched_values.self!==l&&(e=!0),this.watched_values=t,e}}},{key:"getWatchedFieldValues",value:function(){return this.watched_values}},{key:"onWatchedFieldChange",value:function(){var t,e=this;if(this.header_template){t=a(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()}),this.editors&&Object.keys(this.editors).length&&(t.properties={},Object.keys(this.editors).forEach((function(r){var n=e.editors[r];if(n.schema&&n.schema.enum&&n.schema.options&&n.schema.options.enum_titles){var i=n.schema.enum.indexOf(n.value),o=n.options.enum_titles[i];t.properties[r]={enumTitle:o}}})));var r=this.header_template(t);r!==this.header_text&&(this.header_text=r,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){t=this.getWatchedFieldValues();for(var n=0;n<this.link_watchers.length;n++)this.link_watchers[n](t)}}},{key:"addLinks",value:function(){}},{key:"onMove",value:function(){}},{key:"getButton",value:function(t){return this.theme.getButton(t)}},{key:"setButtonText",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return r=this.iconlib?this.iconlib.getIcon(r):null,e=this.translate(e,i),n=this.translate(n,i),!r&&n&&(e=n,n=null),this.theme.setButtonText(t,e,r,n)}},{key:"addLink",value:function(t){this.link_holder&&this.theme.append(this.link_holder,this.link)}},{key:"getLink",value:function(t){var e,r,n=(t.mediaType||"application/javascript").split("/")[0],i=this.jsoneditor.compileTemplate(t.href,this.template_engine),o=this.jsoneditor.compileTemplate(t.rel?t.rel:t.href,this.template_engine),a=null;if(t.download&&(a=t.download),a&&!0!==a&&(a=this.jsoneditor.compileTemplate(a,this.template_engine)),"image"===n){e=this.theme.getBlockLinkHolder(),(r=document.createElement("a")).setAttribute("target","_blank");var s=document.createElement("img");this.theme.createImageLink(e,r,s),this.link_watchers.push((function(t){var e=i(t),n=o(t);r.setAttribute("href",e),r.setAttribute("title",n||e),s.setAttribute("src",e)}))}else if(["audio","video"].includes(n)){e=this.theme.getBlockLinkHolder(),(r=this.theme.getBlockLink()).setAttribute("target","_blank");var u=document.createElement(n);u.setAttribute("controls","controls"),this.theme.createMediaLink(e,r,u),this.link_watchers.push((function(t){var e=i(t),n=o(t);r.setAttribute("href",e),r.textContent=n||e,u.setAttribute("src",e)}))}else r=e=this.theme.getBlockLink(),e.setAttribute("target","_blank"),e.textContent=t.rel,e.style.display="none",this.link_watchers.push((function(t){var r=i(t),n=o(t);r&&(e.style.display=""),e.setAttribute("href",r),e.textContent=n||r}));return a&&r&&(!0===a?r.setAttribute("download",""):this.link_watchers.push((function(t){r.setAttribute("download",a(t))}))),t.class&&t.class.split(" ").forEach((function(t){r.classList.add(t)})),e}},{key:"updateHeaderText",value:function(){if(this.header){var t=this.getHeaderText();this.theme.updateHeaderText(this.header,t,this)}}},{key:"getHeaderText",value:function(t){return this.header_text?this.header_text:t?this.schema.title:this.getTitle()}},{key:"isPrimitive",value:function(t){if(t=t||this.schema,["string","boolean","null","integer","number"].includes(t.type))return!0;if(Array.isArray(t.enum)&&t.enum.length)return t.enum.every((function(t){return null===t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t}));if("array"===t.type&&t.items){var e,r=this.jsoneditor.expandRefs(t.items);if(Array.isArray(r))return!1;if(!["string","number","integer"].includes(r.type))return!1;var n=null===(e=r.options)||void 0===e||null===(e=e.input)||void 0===e?void 0:e.name;return!("string"!=typeof n||!n.toLowerCase().includes("multiselect"))||!(!Array.isArray(r.enum)||!r.enum.length)&&r.enum.every((function(t){return null===t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t}))}return!1}},{key:"getPathDepth",value:function(){return this.path.split(".").length}},{key:"cleanText",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText}},{key:"setValue",value:function(t){t=this.applyConstFilter(t),this.value=t}},{key:"hasConstFilter",value:function(){return void 0!==this.schema.const}},{key:"applyConstFilter",value:function(t){return this.enforceConstEnabled&&void 0!==this.schema.const&&(t=this.schema.const),t}},{key:"getValue",value:function(){if(this.dependenciesFulfilled)return this.value}},{key:"refreshValue",value:function(){}},{key:"getChildEditors",value:function(){return!1}},{key:"isDefaultRequired",value:function(){return this.isRequired()||!!this.jsoneditor.options.use_default_values}},{key:"getDefault",value:function(){if(void 0!==this.options.startval)return this.options.startval;if(this.enforceConstEnabled&&this.schema.const)return this.schema.const;if(void 0!==this.schema.default)return this.schema.default;if(Array.isArray(this.schema.enum)&&this.schema.enum.length>0)return this.schema.enum[0];var t=this.schema.type||this.schema.oneOf;if(Array.isArray(t)&&(t=t[0]),t&&"object"===C(t)&&(t=t.type),Array.isArray(t)&&(t=t[0]),"string"==typeof t)switch(t){case"number":case"integer":return this.isDefaultRequired()?0:void 0;case"boolean":return!this.isDefaultRequired()&&void 0;case"string":return this.isDefaultRequired()?"":void 0;case"null":return null;case"object":return{};case"array":return[]}}},{key:"getLayout",value:function(){return"layout"in this.options?a({name:null,config:{}},this.options.layout):{name:null,config:{}}}},{key:"getInputOptions",value:function(t){var e,r=t||this,n=null==r||null===(e=r.options)||void 0===e?void 0:e.input;return n?a({name:null,config:{}},n):{name:null,config:{}}}},{key:"getControlOptions",value:function(t){return"control"in(t=t||this).options?a({config:{}},t.options.control):{config:{}}}},{key:"getTitle",value:function(){return this.parent?this.schema.title||this.key||this.parent.title||this.parent.key:this.schema.title||this.schemaName}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"isEnabled",value:function(){return!this.disabled}},{key:"isRequired",value:function(){var t,e,r;return!0===(null===(t=this.schema)||void 0===t?void 0:t.required)||(Array.isArray(null===(e=this.parent)||void 0===e||null===(e=e.schema)||void 0===e?void 0:e.required)?this.parent.schema.required.includes(this.key):!(null===(r=this.jsoneditor)||void 0===r||null===(r=r.options)||void 0===r||!r.required_by_default))}},{key:"getValidId",value:function(t){return(t=void 0===t?"":t.toString()).replace(/\s+/g,"-")}},{key:"setInputAttributes",value:function(t,e){if(this.schema.options&&this.schema.options.inputAttributes){var r=this.schema.options.inputAttributes,n=["name","type"].concat(t),i=e||this.input;Object.keys(r).forEach((function(t){n.includes(t.toLowerCase())||i.setAttribute(t,r[t])}))}}},{key:"setContainerAttributes",value:function(){var t=this;if(this.schema.options&&this.schema.options.containerAttributes){var e=this.schema.options.containerAttributes,r=["data-schemapath","data-schematype","data-schemaid"];Object.keys(e).forEach((function(n){r.includes(n.toLowerCase())||t.container.setAttribute(n,e[n])}))}}},{key:"expandCallbacks",value:function(t,e){var r,n,i=this,o=null===(r=this.jsoneditor)||void 0===r||null===(r=r.options)||void 0===r||null===(r=r.callbacks)||void 0===r?void 0:r[t],a=null===(n=this.defaults)||void 0===n||null===(n=n.callbacks)||void 0===n?void 0:n[t];return Object.entries(e).forEach((function(r){var n=_(r,2),s=n[0],u=n[1];if(!u||"object"!==C(u)||Array.isArray(u)||"function"==typeof u){if("string"==typeof u){var c="object"===C(o)&&"function"==typeof o[u]?o[u]:"object"===C(a)&&"function"==typeof a[u]?a[u]:null;c&&(e[s]=c.bind(null,i))}}else e[s]=i.expandCallbacks(t,u)})),e}},{key:"destroy",value:function(){var t=this;this.unregister(this),this.watched&&Object.values(this.watched).forEach((function(e){return t.jsoneditor.unwatch(e,t.watch_listener)})),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&$(this.container).remove(),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.pathNoIndex=null,this.key=null,this.parent=null}},{key:"showValidationErrors",value:function(t){}}],e&&T(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N(n.key),n)}}function N(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:e+""}function B(t,e,r){return e=V(e),function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,r||[],V(t).constructor):e.apply(t,r))}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},D.apply(this,arguments)}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}var W=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(e,t),r=e,(n=[{key:"register",value:function(){D(V(e.prototype),"register",this).call(this),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}},{key:"unregister",value:function(){D(V(e.prototype),"unregister",this).call(this),this.input&&(this.input.removeAttribute("name"),this.input.removeAttribute("aria-label"))}},{key:"getNumColumns",value:function(){var t,e=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return t="textarea"===this.input_type?6:["text","email"].includes(this.input_type)?4:2,Math.min(12,Math.max(e,t))}},{key:"preBuild",value:function(){D(V(e.prototype),"preBuild",this).call(this),this.format=this.schema.format,"hidden"===this.format&&(this.options.hidden=!0)}},{key:"rebuildWithOptions",value:function(t){this.format=t.format,this.options=t,console.log("this.options",this.options),"hidden"===this.format&&(this.options.hidden=!0),this.inputOptions=this.getInputOptions({options:t}),this.controlOptions=this.getControlOptions({options:t});var e=this.input.getValue();$(this.container).empty(),this.build(),this.input.setValue(e)}},{key:"build",value:function(){var t,e,r,n,i=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),!this.format&&this.options.autocomplete&&(this.format="autocomplete");var o,s,u=new Set(["color","date","datetime","date-time","datetime-local","email","file","hidden","image","month","password","tel","text","textarea","time","json","url","uri"]);if(this.format)switch(this.format){case"range":this.input_type="range";var c=null!==(t=this.schema.minimum)&&void 0!==t?t:0,l=null!==(e=this.schema.maximum)&&void 0!==e?e:Math.max(100,c+1),h=null!==(r=this.schema.multipleOf)&&void 0!==r?r:1;this.schema.multipleOf&&(c=Math.ceil(c/h)*h,l=Math.floor(l/h)*h),this.input=this.theme.getRangeInput(c,l,h,this.description,this.formname),this.input.setAttribute("id",this.formname);break;case"autocomplete":var p=this.inputOptions,f=this.expandCallbacks("autocomplete",a({},{search:function(t){return console.log('No "search" callback defined for autocomplete in property "'.concat(t.key,'"')),[]},onSubmit:function(){i.input.blur()},baseClass:"autocomplete"},this.defaults.options.autocomplete||{},this.options.autocomplete||{}));this.input=this.theme.getAutocompleteInput(f,p),this.input.on("select",(function(t){i.value=t,i.onChange(!0)}));break;default:this.input_type=u.has(this.format)?this.format:"text",this.input=this.theme.getFormInputField(this.input_type,this)}else"string"===(null===(o=this.schema)||void 0===o?void 0:o.type)?this.input_type="text":null!==(s=this.schema)&&void 0!==s&&s.type?this.input_type=this.schema.type:this.input_type="text",this.input=this.theme.getFormInputField(this.input_type,this);if(void 0!==this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),void 0!==this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):void 0!==this.schema.minLength&&this.input.setAttribute("pattern",".{".concat(this.schema.minLength,",}")),this.options.compact?this.container.classList.add("compact"):this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"]),this.input.on("change",(function(t){if(!i.schema.template){var e=t,r=i.sanitize(e);e!==r&&i.setValueToInputField(r),i.is_dirty=!0,i.refreshValue(),i.onChange(!0)}})),this.options.input_height&&(this.input.style.height=this.options.input_height),null!==(n=this.options.prompt_paste_max_length_reached)&&void 0!==n||this.jsoneditor.options.prompt_paste_max_length_reached,this.schema.maxLength,this.format&&this.input.setAttribute("data-schemaformat",this.format),"range"===this.format?this.control=this.theme.getRangeControl(this.input,this.theme.getRangeOutput(this.input,this.schema.default||Math.max(this.schema.minimum||0,0))):this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this),this.theme.append(this.container,this.control),window.requestAnimationFrame((function(){i.afterInputReady(),i.adjust_height&&i.adjust_height(i.input),"range"===i.format&&(i.control.querySelector("output").value=i.input.value)})),this.schema.template){var d=this.expandCallbacks("template",{template:this.schema.template});"function"==typeof d.template?this.template=d.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine)}}},{key:"setupCleave",value:function(t){var e=this.expandCallbacks("cleave",a({},this.defaults.options.cleave||{},this.options.cleave||{}));"object"===L(e)&&Object.keys(e).length>0&&(this.cleave_instance=new window.Cleave(t,e))}},{key:"setupImask",value:function(t){var e=this.expandCallbacks("imask",a({},this.defaults.options.imask||{},this.options.imask||{}));"object"===L(e)&&Object.keys(e).length>0&&(this.imask_instance=window.IMask(t,this.ajustIMaskOptions(e)))}},{key:"ajustIMaskOptions",value:function(t){var e=this;return Object.keys(t).forEach((function(r){if(t[r]===Object(t[r]))t[r]=e.ajustIMaskOptions(t[r]);else if("mask"===r)if("regex:"===t[r].substr(0,6)){var n=t[r].match(/^regex:\/(.*)\/([gimsuy]*)$/);if(null!==n)try{t[r]=new RegExp(n[1],n[2])}catch(t){}}else t[r]=e.getGlobalPropertyFromString(t[r])})),t}},{key:"getGlobalPropertyFromString",value:function(t){if(t.includes(".")){var e=t.split("."),r=e[0],n=e[1];if(void 0!==window[r]&&void 0!==window[r][n])return window[r][n]}else if(void 0!==window[t])return window[t];return t}},{key:"shouldBeUnset",value:function(){return!this.jsoneditor.options.use_default_values&&!this.is_dirty}},{key:"getValue",value:function(){var t=!(!this.input||!this.input.getValue());if(!this.shouldBeUnset()||t)return this.imask_instance&&this.dependenciesFulfilled&&this.options.imask.returnUnmasked?this.imask_instance.unmaskedValue:D(V(e.prototype),"getValue",this).call(this)}},{key:"setValue",value:function(t,e,r){if(t=this.applyConstFilter(t),(!this.template||r)&&(this.shouldBeUnset()||null!=t?"object"===L(t)?t=JSON.stringify(t):this.shouldBeUnset()||"string"==typeof t||(t="".concat(t)):t="",t!==this.serialized)){var n=this.sanitize(t);if(this.getValue()!==n){if(this.setValueToInputField(n),"range"===this.format){var i=this.control.querySelector("output");i&&(i.value=n)}var o=r||this.getValue()!==t;this.refreshValue(),e?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),o&&this.onChange(!0,r)}}}},{key:"setValueToInputField",value:function(t){this.input.setValue(void 0===t?"":t)}},{key:"refreshValue",value:function(){this.input&&(this.value=this.input.getValue(),"string"==typeof this.value||this.shouldBeUnset()||(this.value=""),this.serialized=this.value)}},{key:"afterInputReady",value:function(){this.theme.afterInputReady(this.input),window.Cleave&&!this.cleave_instance?this.setupCleave(this.input):window.IMask&&!this.imask_instance&&this.setupImask(this.input)}},{key:"enable",value:function(){this.always_disabled||(this.input.setDisabled(!1),D(V(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.input.setDisabled(!0),D(V(e.prototype),"disable",this).call(this)}},{key:"destroy",value:function(){D(V(e.prototype),"destroy",this).call(this),this.cleave_instance&&this.cleave_instance.destroy(),this.imask_instance&&this.imask_instance.destroy(),this.template=null,$(this.input).remove(),$(this.label).remove(),this.input=null,this.label=null,this.description=null}},{key:"sanitize",value:function(t){return t}},{key:"onWatchedFieldChange",value:function(){var t;if(this.template){t=this.getWatchedFieldValues();var r=this.jsoneditor.getTemplateResult(this.template,t);this.setValue(r,!1,!0)}D(V(e.prototype),"onWatchedFieldChange",this).call(this)}},{key:"showValidationErrors",value:function(t){var e=this;"always"===this.jsoneditor.options.show_errors||this.is_dirty||this.previous_error_setting!==this.jsoneditor.options.show_errors||(this.previous_error_setting=this.jsoneditor.options.show_errors);var r=t.reduce((function(t,r){return r.path===e.path&&t.push(r.message),t}),[]);r.length?this.theme.addFieldError(this.control,"".concat(r.join(". "),".")):this.theme.addFieldError(this.control)}}])&&R(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q(n.key),n)}}function q(t){var e=function(t,e){if("object"!=z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==z(e)?e:e+""}function U(t,e,r){return e=Z(e),function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,G()?Reflect.construct(e,r||[],Z(t).constructor):e.apply(t,r))}function G(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(G=function(){return!!t})()}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},J.apply(this,arguments)}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function Y(t,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y(t,e)}var K=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(e,t),r=e,(n=[{key:"setValue",value:function(t,r,n){t=this.applyConstFilter(t);var i=J(Z(e.prototype),"setValue",this).call(this,t,r,n);void 0!==i&&i.changed&&this.ace_editor_instance&&(this.ace_editor_instance.setValue(i.value),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize())}},{key:"build",value:function(){this.options.format="textarea",J(Z(e.prototype),"build",this).call(this),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}},{key:"afterInputReady",value:function(){var t,r=this;if(window.ace){var n=this.input_type;"cpp"!==n&&"c++"!==n&&"c"!==n||(n="c_cpp"),t=this.expandCallbacks("ace",a({},{selectionStyle:"text",minLines:30,maxLines:30},this.defaults.options.ace||{},this.options.ace||{},{mode:"ace/mode/".concat(n)})),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor_instance=window.ace.edit(this.ace_container,t),this.ace_editor_instance.setValue(this.getValue()),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize(),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.ace_editor_instance.setReadOnly(!0),this.ace_editor_instance.on("change",(function(){r.input.value=r.ace_editor_instance.getValue(),r.refreshValue(),r.is_dirty=!0,r.onChange(!0)})),this.theme.afterInputReady(this.input)}else J(Z(e.prototype),"afterInputReady",this).call(this)}},{key:"getNumColumns",value:function(){return 6}},{key:"enable",value:function(){!this.always_disabled&&this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!1),J(Z(e.prototype),"enable",this).call(this)}},{key:"disable",value:function(t){this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!0),J(Z(e.prototype),"disable",this).call(this,t)}},{key:"destroy",value:function(){this.ace_editor_instance&&(this.ace_editor_instance.destroy(),this.ace_editor_instance=null),J(Z(e.prototype),"destroy",this).call(this)}}])&&H(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W);function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=rt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==rt(a)?a:a+"")in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tt(t){return function(t){if(Array.isArray(t))return it(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||nt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||nt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(t,e){if(t){if("string"==typeof t)return it(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(t,e):void 0}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ot(t,e){return t.reduce((function(t,e){return t&&t[e]?t[e]:null}),e)}function at(){var t=new OO.ui.WindowManager({classes:["jsonforms-ooui-window"]});return $(document.body).append(t.$element),t}function st(t,e,r,n){var i=at();i.addWindows([new OO.ui.MessageDialog({padded:!1})]);var o={message:t};return r||(o.actions=[OO.ui.MessageDialog.static.actions[0]]),i.openWindow("message",$.extend(o,e)).closed.then((function(t){return"accept"===t.action&&r?r.apply(this,n):void 0}))}r(2637),r(6449),r(6910),r(4554),r(3514),r(3921),r(744),r(958),r(6031),new Set(["date","date-time","time","email","hostname","ipv4","ipv6","uuid","uri","uri-reference","iri","iri-reference","json-pointer","relative-json-pointer","regex"]);var ut=new Set(["$id","$schema","$ref","type","const","enum","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","items","additionalItems","minItems","maxItems","uniqueItems","properties","patternProperties","additionalProperties","required","propertyNames","minProperties","maxProperties","dependencies","allOf","anyOf","oneOf","not","if","then","else","title","description","default","examples","readOnly","writeOnly"]);function ct(t,e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}function lt(t,e){return!!p(t)&&Object.prototype.hasOwnProperty.call(t,e)}function ht(t,e){if(!e||"object"!==rt(e))return e;for(var r=t(e),n=0,i=["properties","patternProperties","additionalProperties","items","oneOf","anyOf","allOf","not"];n<i.length;n++){var o=i[n];r[o]&&(Array.isArray(r[o])?r[o]=r[o].map((function(e){return ht(t,e)})):"object"===rt(r[o])&&(r[o]=Object.fromEntries(Object.entries(r[o]).map((function(e){var r=et(e,2),n=r[0],i=r[1];return[n,ht(t,i)]})))))}return r}function pt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(!e||"object"!==rt(e))return[];var n=t(e);if(r.has(n))return[];if(r.add(n),Array.isArray(n.anyOf)||Array.isArray(n.oneOf)){var i=n.anyOf?"anyOf":"oneOf";return n[i].map((function(e){return pt(t,t(e),r).map((function(t){var e,r,i;return Q(Q({},t),{},{type:null!==(e=t.type)&&void 0!==e?e:n.type,description:null!==(r=t.description)&&void 0!==r?r:n.description,title:null!==(i=n.title)&&void 0!==i?i:t.title})}))})).flat()}if("array"===n.type){var o=n.items?pt(t,n.items,r):void 0;return[Q(Q({},n),{},{items:o&&1===o.length?o[0]:o})]}return"object"===n.type||n.properties||n.patternProperties,[n]}function ft(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(!r.length)return t;var i=r.shift();if(p(t)&&p(i))for(var o in i)if(Array.isArray(i[o]))if("required"===o||"type"===o){var a=Array.isArray(t[o])?t[o]:[];t[o]=Array.from(new Set([].concat(tt(a),tt(i[o]))))}else t[o]=i[o].slice();else p(i[o])?(t[o]||(t[o]={}),ft(t[o],i[o])):t[o]=i[o];return ft.apply(void 0,[t].concat(r))}function dt(t){if(!t||"object"!==rt(t))return!1;if(Array.isArray(t))return!1;var e=Object.getPrototypeOf(t);if(e!==Object.prototype&&null!==e)return!1;var r=Object.keys(t);return 0!==r.length&&r.every((function(e){var r=t[e];return null===r||["string","number","boolean"].includes(rt(r))}))}function yt(t){function e(t,e,r){r.forEach((function(r){var n=jQuery.extend({},r);n.group=e;var i=r.config?r.config:{};delete n.config,t.register(function(t,e){var r=function t(){t.super.call(this,arguments[0],e),OO.ui.mixin.PendingElement.call(this,{}),ot(["data","disabled"],e)&&this.setDisabled(!0),ot(["data","pending"],e)&&this.pushPending(),this.toggled=!1,e.init&&e.init.call(this)};for(var n in OO.inheritClass(r,OO.ui.Tool),OO.mixinClass(r,OO.ui.mixin.PendingElement),r.prototype.onSelect=function(){t.onSelect?t.onSelect.call(this):(this.toggled=!this.toggled,this.setActive(this.toggled))},r.prototype.onUpdateState=function(){this.popPending(),this.setDisabled(!1)},t)r.static[n]=t[n];return r.static.displayBothIconAndLabel=!0,r}(n,i))}))}return{create:function(r){var n=new OO.ui.ToolFactory,i=new OO.ui.ToolGroupFactory,o=new OO.ui.Toolbar(n,i,t);return e(n,"group",r),e(n,"selectSwitch",r=[{name:"a",icon:null,title:"a",onSelect:function(){this.setActive(!1)}},{name:"b",icon:null,title:"b",function:function(){this.setActive(!1)}}]),o.setup([{name:"my-group",include:[{group:"group"}]}]),o}}}function mt(t){this.windowManager=null,this.title=t.title,this.callbacks=t.callbacks,this.items=t.items,mt.super.call(this,t),this.openDialog()}function vt(t,e,r){t=Object.assign({size:"large",classes:["jsonforms-form"]},t),this.config=t,this.callbacks=e,this.editor=r,this.title=t.title,vt.super.call(this,t),this.open()}function bt(t){function e(){for(var t,r=this,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(t=e.super).call.apply(t,[this].concat(i));var a=this;this.data={disabled:!1},this.classList={add:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(r.$input||r.$element).addClass(e.join(" "))},remove:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(r.$input||r.$element).removeClass(e.join(" "))}},this.tagName="_",Object.defineProperty(this,"disabled",{get:function(){return r.data.disabled},set:function(t){r.data.disabled=t}});var s={get display(){return a._display},set display(t){a._display=t,a.toggle("none"!==t)}};Object.defineProperty(this,"style",{get:function(){return s},set:function(){}})}return OO.inheritClass(e,t),"OoUiHiddenInputWidget"===t.name&&(e.prototype.getValue=function(){return this.$element.val()},e.prototype.setValue=function(t){this.$element.attr("value",t)}),e.prototype.addEventListener=function(t,e){},e.prototype.setAttribute=function(t,e){this.data[t]=e,this.$input?this.$input.attr(t,e):this.$element&&this.$element.attr(t,e)},e.prototype.removeAttribute=function(t){delete this.data[t],this.$input?this.$input.removeAttr(t):this.$element&&this.$element.removeAttr(t)},e.prototype.getAttribute=function(t){return this.data[t]},e.prototype.appendChild=function(t){t.$element&&(t=t.$element[0]||t.$element),this.$element instanceof $?this.$element.append(t):this.$element.appendChild(t)},Object.defineProperty(e.prototype,"childElementCount",{get:function(){var t=this.$input||this.$element||this.$content;if(!t)return 0;var e=t[0]||t;return e.children?e.children.length:0}}),e}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wt(t){t=t||{},this.config=t,wt.super.call(this,t),this.initializeData(t.rows);var e={dom:'<"jsonforms-datatable-left"f><"jsonforms-datatable-right"l>rtip',iDisplayLength:100,searching:!1,paging:!1,info:!1,scrollX:!0,data:this.data,columns:["","name","type","required",""].map((function(t){return{title:t}}))};t.orderable?(e.rowReorder={selector:"td:not(:last-child)"},e.columnDefs=[{targets:0,orderable:!0,visible:!1},{orderable:!1,targets:"_all"},{targets:-1,render:function(t,e,r,n){return'<span class="buttons-wrapper" style="white-space:nowrap" data-row=""></span>'}}]):e.columnDefs=[{targets:0,orderable:!1,visible:!1},{targets:-1,render:function(t,e,r,n){return'<span class="buttons-wrapper" style="white-space:nowrap" data-row=""></span>'}}],this.table=t.el,this.datatable=new DataTable(this.table,e),this.addButtonsToRows(),this.datatable.on("row-reorder",(function(t,e,r){}))}r(2762),OO.inheritClass(mt,OO.ui.ProcessDialog),mt.static.name="dialogSearch",mt.prototype.initialize=function(){mt.super.prototype.initialize.apply(this,arguments);var t=this;function e(){var e=[];for(var r in t.items)e.push(new OO.ui.MenuOptionWidget({data:r,label:r,selected:t.items[r]}));return e}var r=new OO.ui.SearchWidget({});r.results.addItems(e());var n=r.getResults();n.multiselect=!0,n.on("press",(function(e){null!==e&&(t.items[e.data]=!t.items[e.data])})),r.onQueryChange=function(t){r.results.clearItems(),r.results.addItems(e())},this.$body.append([r.$element])},mt.prototype.getBodyHeight=function(){return 300},mt.static.actions=[{action:"done",label:"done",flags:["primary","progressive"]},{label:"cancel",flags:["safe","close"]}],mt.prototype.getActionProcess=function(t){var e=this;return this.callbacks.actionProcess(t,this),new OO.ui.Process((function(){e.close({action:t})}))},mt.prototype.getTeardownProcess=function(t){return mt.super.prototype.getTeardownProcess.call(this,t).first((function(){this.windowManager.destroy()}),this)},mt.prototype.openDialog=function(){this.windowManager=at(),this.windowManager.addWindows([this]),this.windowManager.openWindow(this,{title:this.title})},OO.inheritClass(vt,OO.ui.ProcessDialog),vt.static.name="myDialog",vt.static.actions=[{action:"done",flags:["primary","progressive"],label:"done",modes:["done"]},{action:"save",flags:["primary","progressive"],label:"save",modes:["save"]},{action:"cancel",label:"Cancel",flags:["safe","close"],modes:["done","save"]}],vt.prototype.initialize=function(){vt.super.prototype.initialize.call(this),this.callbacks.initialize(this)},vt.prototype.getBodyHeight=function(){return window.innerHeight-200},vt.prototype.getSetupProcess=function(t){t=t||{};var e=this;return vt.super.prototype.getSetupProcess.call(this,t).next((function(){e.callbacks.setupProcess(this,t)}),this)},vt.prototype.getActionProcess=function(t){return this.callbacks.actionProcess(this,vt.super.prototype.getActionProcess,t)||vt.super.prototype.getActionProcess.call(this,t)},vt.prototype.getTeardownProcess=function(t){return vt.super.prototype.getTeardownProcess.call(this,t).first((function(){}),this)},vt.prototype.open=function(){var t=this,e=at(),r=this.title;e.addWindows([this]),e.openWindow(this,{title:r}).opening.then((function(e){t.callbacks.onOpen(t,e)}))},OO.inheritClass(wt,OO.ui.Widget),OO.mixinClass(wt,OO.EventEmitter),wt.prototype.getValue=function(){},wt.prototype.setValue=function(t){},wt.prototype.getOrder=function(){return this.datatable.rows({order:"applied"}).data().toArray().map((function(t){return t[1]}))},wt.prototype.addButtonsToRows=function(){var t=this;$(this.table).find(".buttons-wrapper").each((function(e,r){var n=t.editors[Object.keys(t.editors)[e]];if(t.config.buttonEdit){var i=new OO.ui.ButtonWidget({icon:"edit"});i.on("click",(function(){t.config.callbacks.edit(n)})),$(this).append([i.$element])}if(t.config.buttonDelete&&t.config.callbacks.deleteButtonCond(n)){var o=new OO.ui.ButtonWidget({icon:"close",flags:["destructive"]});o.on("click",(function(){t.config.callbacks.delete(n)})),$(this).append([o.$element])}}))},wt.prototype.initializeData=function(t){if(this.data=[],this.editors={},this.columns=[],t){var e=0;for(var r in t)this.data.push([e].concat(function(t){if(Array.isArray(t))return gt(t)}(n=t[r].row)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return gt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[""])),this.editors[t[r].key]=t[r].editor,e++}var n},wt.prototype.update=function(t){this.initializeData(t),this.datatable.clear(),this.datatable.rows.add(this.data),this.datatable.draw(),this.addButtonsToRows()},wt.prototype.redraw=function(){this.datatable&&this.datatable.columns.adjust().draw()};const Ot=bt(wt),jt=JSON.parse('{"title":"New property","type":"object","required":["name","type","multiple"],"properties":{"name":{"title":"Property name","type":"string","pattern":"^[a-zA-Z_][a-zA-Z0-9_]*$","description":"Valid identifier"},"type":{"title":"type","type":"string","description":"Select the type of property","enum":["text","number","integer","date","datetime-local","time","boolean","textarea","email","color","range","tel","url","json","subitem"],"options":{"input":{"name":"RadioSelectInputWidget"},"enum_titles":["Text","Number","Integer","Date","Datetime-local","Time","Boolean","Textarea","Email","Color","Range","Tel","Url","Json","Subitem"]}},"multiple":{"title":"multiple","type":"boolean","description":"allows multiple values"}}}');function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function kt(t){this.editor=t,this.jsoneditor=t.jsoneditor,this.theme=this.jsoneditor.theme,this.schema=t.schema}function xt(t){t=t||{},xt.super.call(this,t),OO.ui.mixin.IconElement.call(this,t),OO.ui.mixin.LabelElement.call(this,t),this.$element.addClass("demo-simpleWidget").append(this.$icon,this.$label)}function Et(t){t=t||{},Et.super.call(this,t),OO.ui.mixin.DraggableGroupElement.call(this,Object.assign({$group:this.$element},t))}function St(t){t=t||{},St.super.call(this,t),OO.ui.mixin.DraggableElement.call(this,t)}function Pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Ct(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){if(t){if("string"==typeof t)return Tt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tt(t,e):void 0}}function Tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function It(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lt(n.key),n)}}function Lt(t){var e=function(t,e){if("object"!=At(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==At(e)?e:e+""}function Rt(t,e,r){return e=Ft(e),function(t,e){if(e&&("object"===At(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nt()?Reflect.construct(e,r||[],Ft(t).constructor):e.apply(t,r))}function Nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nt=function(){return!!t})()}function Bt(){return Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ft(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Bt.apply(this,arguments)}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(t)}function Dt(t,e){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dt(t,e)}kt.prototype.schemaFromPatternProperties=function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"object"!==_t(t)||Array.isArray(t))throw new TypeError("patternProperties must be an object");var i=Object.keys(t);return i.length?{title:null!==(e=n.wrapperTitle)&&void 0!==e?e:"Add property",type:"object",properties:{name:{title:null!==(r=n.title)&&void 0!==r?r:"Property name",type:"string",anyOf:i.map((function(t){return{pattern:t}})),description:n.description}}}:null},kt.prototype.buildMetaSchema=function(){var t=null,e=null,r=null,n=this.schema,i=n.patternProperties&&"object"===_t(n.patternProperties),o=n.additionalProperties&&"object"===_t(n.additionalProperties),a=!0===n.additionalProperties;if(i){t=this.schemaFromPatternProperties(n.patternProperties);var s=Object.keys(n.patternProperties);if(1===s.length){var u=this.jsoneditor.expandSchema(n.patternProperties[s[0]]);r=u,null!=u&&u.title&&(e=u.title)}}if(!t&&(a||!this.editor.hasProperties())){var c,l=null===(c=this.schema.options)||void 0===c||null===(c=c.additionalProperties)||void 0===c?void 0:c.UISchema;t=l?this.jsoneditor.expandSchema(l):jt}if(!t&&o){t={title:"New property",type:"object",required:["name"],properties:{name:{title:"Property name",type:"string",pattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",description:"Valid identifier"}}};var h=this.jsoneditor.expandSchema(n.additionalProperties);r=h,null!=h&&h.title&&(e=h.title)}return{metaSchema:t,targetSchema:r,subschemaTitle:e}},kt.prototype.schemaFromPseudoType=function(t,e,r){if(e){var n=null;"text"===t&&(n="tagmultiselect");var i={input:{name:n}};return{type:"array",items:this.schemaFromPseudoType(t,!1,i)}}switch(t){case"text":case"textarea":case"email":case"tel":case"url":case"color":case"date":case"datetime-local":case"time":case"json":return{type:"string",format:t,options:r};case"number":case"range":return{type:"number"};case"integer":return{type:"integer"};case"boolean":return{type:"boolean"};case"subitem":return{type:"object",additionalProperties:!0};default:throw new Error("Unsupported type: ".concat(t))}},kt.prototype.addProperty=function(t){var e=this,r={initialize:function(r){var n=e.theme.getContainer();r.editor=new Qs(n,{theme:"oojs",schema:t.schema||{},startval:t.startval,dialog:r,isMetaSchema:!0,ajax:!0,ajaxUrl:e.jsoneditor.options.ajaxUrl,originalEditor:t.editor}),r.$body.append(n)},setupProcess:function(t){return t.actions.setMode("done")},onOpen:function(){},actionProcess:function(e,r,n){if("done"===n){var i=e.editor;if(i.validation_results.length)return void st("there are errors",{size:"small"});var o=i.getValue();if(""===o.name.trim())return st("no name",{size:"small"}),!1;var a=t.onAddPropertySave(o);if("string"==typeof a)return void st(a,{size:"small"});e.close({action:n})}e.close({action:n})}};new vt({size:t.hasTargetSchema?"medium":"large",title:t.title},r,this)},OO.inheritClass(xt,OO.ui.Widget),OO.mixinClass(xt,OO.ui.mixin.IconElement),OO.mixinClass(xt,OO.ui.mixin.LabelElement),OO.inheritClass(Et,OO.ui.Widget),OO.mixinClass(Et,OO.ui.mixin.DraggableGroupElement),OO.inheritClass(St,xt),OO.mixinClass(St,OO.ui.mixin.DraggableElement);var Vt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rt(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}(e,t),r=e,n=[{key:"askConfirmation",value:function(){return!0!==this.jsoneditor.options.prompt_before_delete||!1!==window.confirm(this.translate("button_delete_node_warning"))}},{key:"register",value:function(){Bt(Ft(e.prototype),"register",this).call(this),this.rows&&this.rows.forEach((function(t){return t.register()}))}},{key:"unregister",value:function(){Bt(Ft(e.prototype),"unregister",this).call(this),this.rows&&this.rows.forEach((function(t){return t.unregister()}))}},{key:"getNumColumns",value:function(){var t=this.getItemInfo(0);return this.tabs_holder&&"tabs"!==this.layout.name?Math.max(Math.min(12,t.width+2),4):t.width}},{key:"enable",value:function(){var t=this;this.always_disabled||(this.setAvailability(this,!1),this.rows&&this.rows.forEach((function(e){e.enable(),t.setAvailability(e,!1)})),Bt(Ft(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){var r=this;t&&(this.always_disabled=!0),this.setAvailability(this,!0),this.rows&&this.rows.forEach((function(e){e.disable(t),r.setAvailability(e,!0)})),Bt(Ft(e.prototype),"disable",this).call(this)}},{key:"setAvailability",value:function(t,e){t.add_row_button&&(t.add_row_button.disabled=e),t.delete_button&&(t.delete_button.disabled=e)}},{key:"preBuild",value:function(){Bt(Ft(e.prototype),"preBuild",this).call(this),this.rows=[],this.row_cache=[]}},{key:"build",value:function(){this.options.compact?this.buildCompactLayout():this.buildFullLayout(),this.isTabsLayout()||(this.add_row_button=this.createAddRowButton())}},{key:"buildFullLayout",value:function(){var t=this;if(this.options.removable){var e=this.theme.getButton({label:null,icon:"close",flags:[],classes:[]});e.on("click",(function(){var e=t.jsoneditor.editors[t.path];e.parent.restoreLazyProperty(e.key)}));var r=this.theme.getContainer();r.classList.add("jsonforms-remove-object"),this.theme.append(r,e),this.theme.append(this.container,r)}if(this.title=this.theme.getHeader(this.getTitle(),3),this.theme.append(this.container,this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.theme.append(this.container,this.infoButton)),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.theme.append(this.container,this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.isTabsLayout()){var n=this,i=[{name:"new_item",icon:"add",title:"new item",onSelect:function(){n.addRowAction(),this.setActive(!1)}},{name:"remove_current",icon:"trash",title:"remove current",onSelect:function(){var t=n.theme.getTabsLayoutSelectedIndex(n.tabs_holder);Number.isInteger(t)&&t>=0&&(n.deleteRowAction(t),n.theme.refreshTabsLayoutPages(n.tabs_holder,n.rows.map((function(t,e){return{title:t.schema.title,key:e,container:t.container}}))),this.setActive(!1))}}],o=yt().create(i);this.theme.append(this.container,o.$element)}"tabs"===this.layout.name?this.buildTabsTop():"booklet"===this.layout.name?this.buildTabs():this.buildPanel()}},{key:"buildTabs",value:function(){this.tabs_holder=this.theme.getBooklet(this.layout.config),this.theme.append(this.container,this.theme.getTabsContainer(this.tabs_holder))}},{key:"buildTabsTop",value:function(){this.tabs_holder=this.theme.getIndexLayout(this.layout.config),this.theme.append(this.container,this.theme.getTabsContainer(this.tabs_holder))}},{key:"buildPanel",value:function(){this.panel=this.theme.getIndentedPanel(),this.theme.append(this.container,this.panel),this.rows_holder=document.createElement("div"),this.theme.append(this.panel,this.rows_holder),this.controls=this.theme.getButtonHolder(),this.theme.append(this.panel,this.controls)}},{key:"buildCompactLayout",value:function(){this.title=this.theme.getHeader("",this.getPathDepth()),this.theme.append(this.container,this.title),this.panel=this.theme.getIndentedPanel(),this.theme.append(this.container,this.panel),this.controls=this.theme.getHeaderButtonHolder(),this.theme.append(this.title,this.controls),this.rows_holder=document.createElement("div"),this.theme.append(this.panel,this.rows_holder)}},{key:"addRow",value:function(t,e){var r=this.rows.length,n=e.initial&&!0===e.initial,i=this.getElementEditor(r,n);if(i)return this.rows[r]=i,i.array_controls&&(this.rows[r].delete_button=this.createDeleteButton(r,i.array_controls)),void 0!==t&&this.rows[r].setValue(t,n),this.rows[r]}},{key:"deleteRowAction",value:function(t){if(!this.askConfirmation())return!1;var e=this.getValue().filter((function(e,r){return r!==t})),r=this.rows[t].getValue();this.setValue(e),this.onChange(!0),this.jsoneditor.trigger("deleteRow",r)}},{key:"createDeleteButton",value:function(t,e){var r=this,n=this.getButton({icon:"close",title:"delete row"},[this.getItemTitle()]);return n.classList.add("delete","json-editor-btntype-delete"),n.setAttribute("data-i",t),this.theme.buttonAction(n,"delete",(function(t){var e=1*n.getAttribute("data-i");r.deleteRowAction(e)})),e&&this.theme.append(e,n),n}},{key:"defaultForValue",value:function(t){return null==t?"":Array.isArray(t)?[]:"object"===At(t)?{}:"string"==typeof t?"":"number"==typeof t?0:"boolean"!=typeof t&&null}},{key:"addRowAction",value:function(){var t=this.rows.length,e=this.row_cache[t],r=e?this.reuseCachedRow(e,t):this.addRow(void 0,{initial:!1});this.refreshValue(),this.onChange(!0),this.jsoneditor.trigger("addRow",r)}},{key:"createAddRowButton",value:function(){var t,e,r=this;if(this.schema.items){var n=this.jsoneditor.expandRefs(this.schema.items);"object"===At(n)&&n.title&&(e=n.title)}var i=this.getButton({label:null!==(t=e)&&void 0!==t?t:"item",icon:"add",title:"add row"},[this.getItemTitle()]);return this.theme.buttonAction(i,"add",(function(){r.addRowAction()})),this.theme.append(this.controls,i),i}},{key:"reuseCachedRow",value:function(t,e){return this.rows[e]=t,t.setValue(t.getDefault(),!0),"function"==typeof t.deactivateNonRequiredProperties&&t.deactivateNonRequiredProperties(!0),this.theme.toggle(t.container,!0),t.register(),t}},{key:"postBuild",value:function(){Bt(Ft(e.prototype),"postBuild",this).call(this),(this.schema.readOnly||this.schema.readonly)&&this.disable()}},{key:"onChildEditorChange",value:function(t,r){this.refreshValue(),this.is_dirty=!0,Bt(Ft(e.prototype),"onChildEditorChange",this).call(this,t,r)}},{key:"getItemTitle",value:function(){if(!this.item_title){var t=this.schema.items,e=t&&!Array.isArray(t)?this.translateProperty(this.jsoneditor.expandRefs(t).title):null;this.item_title=e||this.translate("default_array_item_title")}return this.cleanText(this.item_title)}},{key:"getItemSchema",value:function(t){var e=this.schema,r=e.items,n=e.additionalItems;return Array.isArray(r)?t<r.length?a({},r[t]):!0===n?{}:n?a({},n):{}:r?a({},r):{}}},{key:"getItemInfo",value:function(t){var e,r=this.getItemSchema(t),n=JSON.stringify(r);if(null!==(e=this.item_info)&&void 0!==e||(this.item_info={}),this.item_info[n])return this.item_info[n];var i=this.jsoneditor.expandRefs(r),o={title:this.translateProperty(i.title)||this.translate("default_array_item_title"),default:i.default,width:12,child_editors:i.properties||i.items};return this.item_info[n]=o,o}},{key:"getElementEditor",value:function(t,e){var r=this.getItemInfo(t),n=this.jsoneditor.expandRefs(this.getItemSchema(t));n.title="".concat(r.title," ").concat(t+1);var i,o=this.jsoneditor.getEditorClass(n),a=o.classname,s=o.editorClass,u=this.createElementHolder(n,r,t);this.isTabsLayout()||(this.isTreeWidget(n)?(i=this.theme.getButtonHolder()).classList.add("jsonforms-array-controls"):((i=this.theme.getButtonHolder()).classList.add("jsonforms-array-controls"),this.theme.append(this.rows_holder,i),this.theme.append(this.rows_holder,u)));var c=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:n,container:u,path:"".concat(this.path,".").concat(t),pathNoIndex:this.pathNoIndex,parent:this,required:!0,classname:a,initial:e});if(this.isTabsLayout()){var l=this.theme.createTabLayoutPage(this.tabs_holder,n.title,n.title);l.id="".concat(this.path,".").concat(t),this.theme.append(l,c.container)}return c.preBuild(),c.build(),c.schemaTitle=n.title,i&&(c.array_controls=i),c.postBuild(),c}},{key:"isTreeWidget",value:function(t){return!(!this.jsoneditor.treeWidget||t&&this.isPrimitive(t))}},{key:"isTabsLayout",value:function(){return"tabs"===this.layout.name||"booklet"===this.layout.name}},{key:"createElementHolder",value:function(t,e,r){if(this.tabs_holder)return document.createElement("div");if(e.child_editors){var n=this.theme.getChildEditorHolder();return n.classList.add("aa"),n}var i=this.theme.getIndentedPanel();return i.classList.add("bb"),i}},{key:"getMax",value:function(){return Array.isArray(this.schema.items)&&!1===this.schema.additionalItems?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0}},{key:"ensureArraySize",value:function(t){var e=Array.isArray(t)?t.slice():[t],r=this.schema.minItems,n=this.getMax();if(r)for(;e.length<r;)e.push(this.getItemInfo(e.length).default);return n&&e.length>n&&(e.length=n),e}},{key:"setValue",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;if(e=this.ensureArraySize(this.applyConstFilter(e)),JSON.stringify(e)!==this.serialized){e.forEach((function(e,n){var i;t.rows[n]?(i=t.rows[n]).setValue(e,r):t.row_cache[n]?((i=t.rows[n]=t.row_cache[n]).setValue(e,r),t.theme.toggle(i.container,!0),i.register(),t.jsoneditor.trigger("addRow",i)):(i=t.addRow(e,{initial:r}),t.jsoneditor.trigger("addRow",i))}));for(var n=e.length;n<this.rows.length;n++)this.destroyRow(this.rows[n],!0),this.rows[n]=null;this.rows=this.rows.slice(0,e.length),this.refreshValue(r),this.onChange()}else r&&this.refreshValue(r)}},{key:"setButtonState",value:function(t,e){switch(this.options.button_state_mode||this.jsoneditor.options.button_state_mode){case 1:default:this.theme.toggle(t,"none"!==e);break;case 2:t.disabled=!e}}},{key:"setupButtons",value:function(t){var e=[],r=!(this.getMax()&&this.getMax()<=this.rows.length);return this.setButtonState(this.add_row_button,r),e.push(r),e.some((function(t){return t}))}},{key:"refreshValue",value:function(t){var e=this.value?this.value.length:0;if(this.value=this.rows.map((function(t){return t.getValue()})),e!==this.value.length||t){var r,n=this.schema.minItems&&this.schema.minItems>=this.rows.length,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ct(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.rows.entries());try{for(i.s();!(r=i.n()).done;){var o=Pt(r.value,2),a=o[0],s=o[1];s.delete_button&&this.setButtonState(s.delete_button,!n),this.value[a]=s.getValue()}}catch(t){i.e(t)}finally{i.f()}this.theme.toggle(this.controls,this.setupButtons(n))}this.serialized=JSON.stringify(this.value)}},{key:"showValidationErrors",value:function(t){var e=this.path,r=this.error_holder,n=this.rows,i=this.theme,o=Pt(t.reduce((function(t,r){return t[r.path===e?0:1].push(r),t}),[[],[]]),2),a=o[0],s=o[1];r&&(r.innerHTML="",a.length?(r.style.display="",a.forEach((function(t){var e=t.message;r.appendChild(i.getErrorMessage(e))}))):r.style.display="none"),n.forEach((function(t){return t.showValidationErrors(s)}))}},{key:"empty",value:function(t){var e=this;if(this.rows){var r=this.rows;if(r.forEach((function(n,i){t&&(e.destroyRow(n,!0),e.row_cache[i]=null),r[i]=null})),t){for(var n=r.length;n<this.row_cache.length;n++)this.destroyRow(this.row_cache[n],!0),this.row_cache[n]=null;this.row_cache=[]}this.rows=[]}}},{key:"destroyRow",value:function(t,e){var r=t.container;e?(t.destroy(),this.theme.remove(r)):(this.theme.toggle(r,!1),t.unregister()),this.theme.remove(t.array_controls)}},{key:"checkParent",value:function(t){return t&&t.parentNode}},{key:"destroy",value:function(){this.empty(!0),$(this.title).remove(),$(this.rows_holder).remove(),$(this.controls).remove(),$(this.panel).remove(),this.rows=this.row_cache=this.title=this.description=this.rows_holder=this.panel=this.controls=null,Bt(Ft(e.prototype),"destroy",this).call(this)}}],n&&It(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function Mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wt(n.key),n)}}function Wt(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$t(e)?e:e+""}function zt(t,e,r){return e=Ut(e),function(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ht()?Reflect.construct(e,r||[],Ut(t).constructor):e.apply(t,r))}function Ht(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ht=function(){return!!t})()}function qt(){return qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ut(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},qt.apply(this,arguments)}function Ut(t){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ut(t)}function Gt(t,e){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gt(t,e)}Vt.rules={".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-array-control-btn":"width:100%25;text-align:left;margin-bottom:3px"};var Jt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zt(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gt(t,e)}(e,t),r=e,(n=[{key:"getNumColumns",value:function(){return 4}},{key:"setFileReaderListener",value:function(t){var e=this;t.addEventListener("load",(function(t){if(e.count===e.current_item_index)e.value[e.count][e.key]=t.target.result;else{var r={};for(var n in e.parent.schema.properties)r[n]="";r[e.key]=t.target.result,e.value.splice(e.count,0,r)}e.count+=1,e.count===e.total+e.current_item_index&&e.arrayEditor.setValue(e.value)}))}},{key:"build",value:function(){var t=this;if(this.options.compact||(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.input=this.theme.getFormInputField("hidden",this),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw new Error("FileReader required for base64 editor");this.uploader=this.theme.getFormInputField("file",this),this.uploader.style.display="none",this.schema.options&&this.schema.options.multiple&&!0===this.schema.options.multiple&&this.parent&&"object"===this.parent.schema.type&&this.parent.parent&&"array"===this.parent.parent.schema.type&&this.uploader.setAttribute("multiple",""),this.uploader.addEventListener("change",(function(e){if(e.preventDefault(),e.stopPropagation(),e.currentTarget.files&&e.currentTarget.files.length)if(e.currentTarget.files.length>1&&t.schema.options&&t.schema.options.multiple&&!0===t.schema.options.multiple&&t.parent&&"object"===t.parent.schema.type&&t.parent.parent&&"array"===t.parent.parent.schema.type){t.arrayEditor=t.jsoneditor.getEditor(t.parent.parent.path),t.value=t.arrayEditor.getValue(),t.total=e.currentTarget.files.length,t.current_item_index=parseInt(t.parent.key),t.count=t.current_item_index;for(var r=0;r<t.total;r++){var n=new FileReader;t.setFileReaderListener(n),n.readAsDataURL(e.currentTarget.files[r])}}else{var i=new FileReader;i.onload=function(e){t.value=e.target.result,t.refreshPreview(),t.onChange(!0),i=null},i.readAsDataURL(e.currentTarget.files[0])}}))}this.preview=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton,this),this.container.appendChild(this.control);var e=this.getButton({label:"button_upload",icon:"upload",title:"button_upload"});e.addEventListener("click",(function(){t.uploader.click()})),this.control.appendChild(e),this.setInputAttributes(["multiple"],e)}},{key:"refreshPreview",value:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var t=this.value.match(/^data:([^;,]+)[;,]/);if(t&&(t=t[1]),t){if(this.preview.innerHTML="<strong>Type:</strong> ".concat(t,", <strong>Size:</strong> ").concat(Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)," bytes"),"image"===t.substr(0,5)){this.preview.innerHTML+="<br>";var e=document.createElement("img");e.style.maxWidth="100%",e.style.maxHeight="100px",e.src=this.value,this.preview.appendChild(e)}}else this.preview.innerHTML="<em>Invalid data URI</em>"}}},{key:"enable",value:function(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),qt(Ut(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),qt(Ut(e.prototype),"disable",this).call(this)}},{key:"setValue",value:function(t){t=this.applyConstFilter(t),this.value!==t&&(this.schema.readOnly&&this.schema.enum&&!this.schema.enum.includes(t)?this.value=this.schema.enum[0]:this.value=t,this.input.value=this.value,this.refreshPreview(),this.onChange())}},{key:"destroy",value:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),qt(Ut(e.prototype),"destroy",this).call(this)}}])&&Mt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function Yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function Kt(t){var e=function(t,e){if("object"!=Zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zt(e)?e:e+""}function Xt(t,e,r){return e=ee(e),function(t,e){if(e&&("object"===Zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qt()?Reflect.construct(e,r||[],ee(t).constructor):e.apply(t,r))}function Qt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qt=function(){return!!t})()}function te(){return te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ee(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},te.apply(this,arguments)}function ee(t){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ee(t)}function re(t,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},re(t,e)}var ne=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xt(this,e,[t,r])).active=!1,n.schema.type="null","button"===n.format&&n.parent&&n.parent.schema&&(Array.isArray(n.parent.schema.required)?n.parent.schema.required.includes(n.key)||n.parent.schema.required.push(n.key):n.parent.schema.required=[n.key]),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){var t=this;this.options.compact=!0;var e=this.expandCallbacks("button",a({},{icon:"",validated:!1,align:"left",action:function(t,e){console.warn('No button action defined for "'.concat(t.path,'"'))}},this.defaults.options.button||{},this.options.button||{})),r=this.translateProperty(e.text||this.schema.title)||this.key;this.input=this.theme.getButton(a({label:r,icon:e.icon,title:r},this.inputOptions.config)),"function"!=typeof e.action?console.warn('No button action defined for "'.concat(this.path,'"')):this.input.on("click",e.action),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["readonly"]),this.control=this.theme.getFormButtonHolder(e.align),this.theme.append(this.control,this.input),this.theme.append(this.container,this.control),this.changeHandler=function(){t.jsoneditor.validate(t.jsoneditor.getValue()).length>0?t.disable():t.enable()},e.validated&&this.jsoneditor.on("change",this.changeHandler)}},{key:"enable",value:function(){this.always_disabled||(this.input.disabled=!1,te(ee(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.input.disabled=!0,te(ee(e.prototype),"disable",this).call(this)}},{key:"getNumColumns",value:function(){return 2}},{key:"activate",value:function(){this.active=!1,this.enable()}},{key:"deactivate",value:function(){this.isRequired()||(this.active=!1,this.disable())}},{key:"destroy",value:function(){this.jsoneditor.off("change",this.changeHandler),this.changeHandler=null,te(ee(e.prototype),"destroy",this).call(this)}}])&&Yt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ae(n.key),n)}}function ae(t){var e=function(t,e){if("object"!=ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ie(e)?e:e+""}function se(t,e,r){return e=le(e),function(t,e){if(e&&("object"===ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ue()?Reflect.construct(e,r||[],le(t).constructor):e.apply(t,r))}function ue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ue=function(){return!!t})()}function ce(){return ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=le(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},ce.apply(this,arguments)}function le(t){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},le(t)}function he(t,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},he(t,e)}var pe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),se(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){var t=this,e=this.theme.getButton({label:this.getTitle()||this.key,icon:"add",flags:[],classes:["jsonforms-addproperty-button"]});e.on("click",(function(){t.parent.addLazyProperty(t.key),e.$element.remove(),t.destroy()})),this.theme.append(this.container,e)}},{key:"unregister",value:function(){}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"getNumColumns",value:function(){return 2}},{key:"activate",value:function(){this.active=!1}},{key:"deactivate",value:function(){}},{key:"destroy",value:function(){ce(le(e.prototype),"destroy",this).call(this)}}])&&oe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function de(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ye(n.key),n)}}function ye(t){var e=function(t,e){if("object"!=fe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fe(e)?e:e+""}function me(t,e,r){return e=ge(e),function(t,e){if(e&&("object"===fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ve()?Reflect.construct(e,r||[],ge(t).constructor):e.apply(t,r))}function ve(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ve=function(){return!!t})()}function be(){return be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},be.apply(this,arguments)}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}function we(t,e){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},we(t,e)}var Oe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),me(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}(e,t),r=e,(n=[{key:"setValue",value:function(t,e){t=!!(t=this.applyConstFilter(t));var r=this.getValue()!==t;this.value=t,this.input.checked=this.value,e||(this.is_dirty=!0),this.onChange(r)}},{key:"register",value:function(){be(ge(e.prototype),"register",this).call(this),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}},{key:"unregister",value:function(){be(ge(e.prototype),"unregister",this).call(this),this.input&&this.input.removeAttribute("name")}},{key:"getNumColumns",value:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))}},{key:"setOptInCheckbox",value:function(){be(ge(e.prototype),"setOptInCheckbox",this).call(this),this.optInAppended&&(this.container.insertBefore(this.optInContainer,this.container.firstChild),this.optInContainer.style.verticalAlign="top",this.control.style.marginTop="0")}},{key:"build",value:function(){var t=this;this.parent&&this.parent.options.table_row||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle(),this.isRequired()),this.label.htmlFor=this.formname),this.description=this.theme.getFormInputDescription(this.schema.description),this.options.infoText&&!this.options.compact&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getCheckbox(),this.input.id=this.formname,this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this),this.theme.toggle(this.control,!0),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",(function(e){e.preventDefault(),e.stopPropagation(),t.value=e.currentTarget.checked,t.is_dirty=!0,t.onChange(!0)})),this.theme.append(this.container,this.control)}},{key:"enable",value:function(){this.always_disabled||(this.input.disabled=!1,be(ge(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.input.disabled=!0,be(ge(e.prototype),"disable",this).call(this)}},{key:"destroy",value:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),be(ge(e.prototype),"destroy",this).call(this)}},{key:"showValidationErrors",value:function(t){var e=this,r=this.jsoneditor.options.show_errors,n="change"===r||"interaction"===r;if(("never"!==r||this.is_dirty)&&(!n||this.is_dirty)){var i=t.reduce((function(t,r){return r.path===e.path&&t.push(r.message),t}),[]);this.input.controlgroup=this.control,i.length?this.theme.addInputError(this.input,"".concat(i.join(". "),".")):this.theme.removeInputError(this.input)}}}])&&de(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}function ke(t){var e=function(t,e){if("object"!=je(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==je(e)?e:e+""}function xe(t,e,r){return e=Pe(e),function(t,e){if(e&&("object"===je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ee()?Reflect.construct(e,r||[],Pe(t).constructor):e.apply(t,r))}function Ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ee=function(){return!!t})()}function Se(){return Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pe(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Se.apply(this,arguments)}function Pe(t){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(t)}function Ce(t,e){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ce(t,e)}var Te=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ce(t,e)}(e,t),r=e,(n=[{key:"register",value:function(){if(this.editors){for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister();this.editors[this.currentEditor]&&this.editors[this.currentEditor].register()}Se(Pe(e.prototype),"register",this).call(this)}},{key:"unregister",value:function(){if(Se(Pe(e.prototype),"unregister",this).call(this),this.editors)for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister()}},{key:"getNumColumns",value:function(){return this.editors[this.currentEditor]?Math.max(this.editors[this.currentEditor].getNumColumns(),4):4}},{key:"enable",value:function(){if(this.editors)for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].enable();Se(Pe(e.prototype),"enable",this).call(this)}},{key:"disable",value:function(){if(this.editors)for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].disable();Se(Pe(e.prototype),"disable",this).call(this)}},{key:"switchEditor",value:function(){var t=this,e=this.getWatchedFieldValues();if(e){var r=document.location.origin+document.location.pathname+this.template(e);this.editors[this.refs[r]]||this.buildChildEditor(r),this.currentEditor=this.refs[r],this.register(),this.editors.forEach((function(e,r){e&&(t.currentEditor===r?e.container.style.display="":e.container.style.display="none")})),this.refreshValue(),this.onChange(!0)}}},{key:"buildChildEditor",value:function(t){this.refs[t]=this.editors.length;var e=this.theme.getChildEditorHolder();this.theme.append(this.editor_holder,e);var r=a({},this.schema,this.jsoneditor.refs[t]),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),i=n.classname,o=n.editorClass,s=this.jsoneditor.createEditor(o,{jsoneditor:this.jsoneditor,schema:r,container:e,path:this.path,pathNoIndex:this.pathNoIndex,parent:this,required:!0,classname:i});this.editors.push(s),s.preBuild(),s.build(),s.postBuild()}},{key:"preBuild",value:function(){var t;for(this.refs={},this.editors=[],this.currentEditor="",t=0;t<this.schema.links.length;t++)if("describedby"===this.schema.links[t].rel.toLowerCase()){this.template=this.jsoneditor.compileTemplate(this.schema.links[t].href,this.template_engine);break}this.schema.links=this.schema.links.slice(0,t).concat(this.schema.links.slice(t+1)),0===this.schema.links.length&&delete this.schema.links,this.baseSchema=a({},this.schema)}},{key:"build",value:function(){this.editor_holder=document.createElement("div"),this.theme.append(this.container,this.editor_holder),this.switchEditor()}},{key:"onWatchedFieldChange",value:function(){this.switchEditor()}},{key:"onChildEditorChange",value:function(t,r){this.editors[this.currentEditor]&&this.refreshValue(),Se(Pe(e.prototype),"onChildEditorChange",this).call(this,t,r)}},{key:"refreshValue",value:function(){this.editors[this.currentEditor]&&(this.value=this.editors[this.currentEditor].getValue())}},{key:"setValue",value:function(t,e){t=this.applyConstFilter(t),this.editors[this.currentEditor]&&(this.editors[this.currentEditor].setValue(t,e),this.refreshValue(),this.onChange())}},{key:"destroy",value:function(){this.editors.forEach((function(t){t&&t.destroy()})),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),Se(Pe(e.prototype),"destroy",this).call(this)}},{key:"showValidationErrors",value:function(t){this.editors.forEach((function(e){e&&e.showValidationErrors(t)}))}}])&&_e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Le(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Re(n.key),n)}}function Re(t){var e=function(t,e){if("object"!=Ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ae(e)?e:e+""}function Ne(t,e,r){return e=De(e),function(t,e){if(e&&("object"===Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Be()?Reflect.construct(e,r||[],De(t).constructor):e.apply(t,r))}function Be(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Be=function(){return!!t})()}function Fe(){return Fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=De(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Fe.apply(this,arguments)}function De(t){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},De(t)}function Ve(t,e){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ve(t,e)}var $e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}(e,t),r=e,(n=[{key:"getNumColumns",value:function(){return 4}},{key:"build",value:function(){var t=this;this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.theme.append(this.container,this.title),this.options.enum_titles=this.options.enum_titles||[],this.enforceConstEnabled&&this.schema.const?this.enum=[this.schema.const]:this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(var e=0;e<this.enum.length;e++)this.select_options[e]=this.enum[e],this.html_values[e]=this.getHTML(this.enum[e]);this.switcher=this.theme.getSwitcher(this.select_options,this),this.theme.append(this.container,this.switcher),this.display_area=this.theme.getIndentedPanel(),this.theme.append(this.container,this.display_area),this.options.hide_display&&this.theme.toggle(this.display_area,!1),this.switcher.addEventListener("change",(function(e){t.selected=t.select_options.indexOf(e.currentTarget.value),t.value=t.enum[t.selected],t.refreshValue(),t.onChange(!0)})),this.value=this.enum[0],this.refreshValue(),1===this.enum.length&&this.theme.toggle(this.switcher,!1)}},{key:"refreshValue",value:function(){var t=this;if(this.enum){this.selected=-1;var e=JSON.stringify(this.value);this.enum.forEach((function(r,n){if(e===JSON.stringify(r))return t.selected=n,!1})),this.selected<0?this.setValue(this.enum[0]):(this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected])}}},{key:"enable",value:function(){this.always_disabled||(this.switcher.disabled=!1,Fe(De(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.switcher.disabled=!0,Fe(De(e.prototype),"disable",this).call(this)}},{key:"getHTML",value:function(t){var e,r,n=this;if(null===t)return"<em>null</em>";if("object"===Ae(t)){var i="";return e=t,r=function(e,r){var o=n.getHTML(r);Array.isArray(t)||(o="<div><em>".concat(e,"</em>: ").concat(o,"</div>")),i+="<li>".concat(o,"</li>")},Array.isArray(e)||"number"==typeof e.length&&e.length>0&&e.length-1 in e?Array.from(e).forEach((function(t,e){return r(e,t)})):Object.entries(e).forEach((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Ie(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ie(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return r(o,a)})),i=Array.isArray(t)?"<ol>".concat(i,"</ol>"):"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>".concat(i,"</ul>")}return"boolean"==typeof t?t?"true":"false":"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}},{key:"setValue",value:function(t){t=this.applyConstFilter(t),this.value!==t&&(this.value=t,this.refreshValue(),this.onChange())}},{key:"destroy",value:function(){$(this.display_area).remove(),$(this.title).remove(),$(this.switcher).remove(),Fe(De(e.prototype),"destroy",this).call(this),this.display_area=null,this.title=null,this.switcher=null}}])&&Le(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function We(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ze(n.key),n)}}function ze(t){var e=function(t,e){if("object"!=Me(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Me(e)?e:e+""}function He(t,e,r){return e=Ge(e),function(t,e){if(e&&("object"===Me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qe()?Reflect.construct(e,r||[],Ge(t).constructor):e.apply(t,r))}function qe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qe=function(){return!!t})()}function Ue(){return Ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ge(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Ue.apply(this,arguments)}function Ge(t){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ge(t)}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Je(t,e)}var Ze=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),He(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}(e,t),r=e,(n=[{key:"register",value:function(){Ue(Ge(e.prototype),"register",this).call(this),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}},{key:"unregister",value:function(){Ue(Ge(e.prototype),"unregister",this).call(this),this.input&&this.input.removeAttribute("name")}},{key:"setValue",value:function(t,e,r){if(t=this.applyConstFilter(t),(!this.template||r)&&(null==t?t="":"object"===Me(t)?t=JSON.stringify(t):"string"!=typeof t&&(t="".concat(t)),t!==this.serialized)){var n=this.sanitize(t);if(this.input.value!==n){this.input.value=n;var i=r||this.getValue()!==t;this.refreshValue(),e?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(i)}}}},{key:"getNumColumns",value:function(){return 2}},{key:"enable",value:function(){Ue(Ge(e.prototype),"enable",this).call(this)}},{key:"disable",value:function(){Ue(Ge(e.prototype),"disable",this).call(this)}},{key:"refreshValue",value:function(){this.value=this.input.value,"string"!=typeof this.value&&(this.value=""),this.serialized=this.value}},{key:"destroy",value:function(){this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),Ue(Ge(e.prototype),"destroy",this).call(this)}},{key:"sanitize",value:function(t){return t}},{key:"onWatchedFieldChange",value:function(){var t;this.template&&(t=this.getWatchedFieldValues(),this.setValue(this.template(t),!1,!0)),Ue(Ge(e.prototype),"onWatchedFieldChange",this).call(this)}},{key:"build",value:function(){if(this.format=this.schema.format,!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.input_type="hidden",this.input=this.theme.getFormInputField(this.input_type,this),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.container.appendChild(this.input),this.schema.template){var t=this.expandCallbacks("template",{template:this.schema.template});"function"==typeof t.template?this.template=t.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}}])&&We(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xe(n.key),n)}}function Xe(t){var e=function(t,e){if("object"!=Ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ye(e)?e:e+""}function Qe(t,e,r){return e=er(e),function(t,e){if(e&&("object"===Ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tr()?Reflect.construct(e,r||[],er(t).constructor):e.apply(t,r))}function tr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tr=function(){return!!t})()}function er(t){return er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},er(t)}function rr(t,e){return rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rr(t,e)}var nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qe(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rr(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){var t=this;this.options.compact=!1,this.options.cssClass&&this.container.classList.add(this.options.cssClass),["title","description"].forEach((function(e){if(t.schema[e]){var r=t.theme.getInfoElementContainer();t.theme.append(r,t.schema[e]),t.theme.append(t.container,r)}}))}},{key:"getTitle",value:function(){return this.translateProperty(this.schema.title)}},{key:"getNumColumns",value:function(){return 12}},{key:"disable",value:function(){return!1}},{key:"enable",value:function(){return!1}}])&&Ke(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ne);function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ar(n.key),n)}}function ar(t){var e=function(t,e){if("object"!=ir(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ir(e)?e:e+""}function sr(t,e,r){return e=lr(e),function(t,e){if(e&&("object"===ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ur()?Reflect.construct(e,r||[],lr(t).constructor):e.apply(t,r))}function ur(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ur=function(){return!!t})()}function cr(){return cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lr(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},cr.apply(this,arguments)}function lr(t){return lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lr(t)}function hr(t,e){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hr(t,e)}var pr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sr(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hr(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){if(cr(lr(e.prototype),"build",this).call(this),void 0!==this.schema.minimum){var t=this.schema.minimum;void 0!==this.schema.exclusiveMinimum&&(t+=1),this.input.setAttribute("min",t)}if(void 0!==this.schema.maximum){var r=this.schema.maximum;void 0!==this.schema.exclusiveMaximum&&(r-=1),this.input.setAttribute("max",r)}if(void 0!==this.schema.step){var n=this.schema.step||1;this.input.setAttribute("step",n)}this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"])}},{key:"getNumColumns",value:function(){return 2}},{key:"getValue",value:function(){if(this.dependenciesFulfilled)return this.schema.default||this.jsoneditor.options.use_default_values||""!==this.value?function(t){if(null==t)return!1;var e=t.match(l),r=parseFloat(t);return null!==e&&!isNaN(r)&&isFinite(r)}(this.value)?parseFloat(this.value):this.value:void(this.shouldBeUnset()&&this.input.setValue(""))}}])&&or(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W);function fr(t){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(t)}function dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yr(n.key),n)}}function yr(t){var e=function(t,e){if("object"!=fr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fr(e)?e:e+""}function mr(t,e,r){return e=br(e),function(t,e){if(e&&("object"===fr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vr()?Reflect.construct(e,r||[],br(t).constructor):e.apply(t,r))}function vr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vr=function(){return!!t})()}function br(t){return br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},br(t)}function gr(t,e){return gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gr(t,e)}var wr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mr(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gr(t,e)}(e,t),r=e,(n=[{key:"getNumColumns",value:function(){return 2}},{key:"getValue",value:function(){if(this.dependenciesFulfilled)return this.schema.default||this.jsoneditor.options.use_default_values||""!==this.value?function(t){if(null==t)return!1;var e=t.match(h),r=parseInt(t);return null!==e&&!isNaN(r)&&isFinite(r)}(this.value)?parseInt(this.value):this.value:void this.shouldBeUnset()}}])&&dr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(pr);function Or(t){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or(t)}function jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_r(n.key),n)}}function _r(t){var e=function(t,e){if("object"!=Or(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Or(e)?e:e+""}function kr(t,e,r){return e=Sr(e),function(t,e){if(e&&("object"===Or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xr()?Reflect.construct(e,r||[],Sr(t).constructor):e.apply(t,r))}function xr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xr=function(){return!!t})()}function Er(){return Er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sr(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Er.apply(this,arguments)}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sr(t)}function Pr(t,e){return Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pr(t,e)}var Cr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kr(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pr(t,e)}(e,t),r=e,(n=[{key:"preBuild",value:function(){if(Er(Sr(e.prototype),"preBuild",this).call(this),this.schema.options||(this.schema.options={}),!this.schema.options.cleave)switch(this.format){case"ipv6":this.schema.options.cleave={delimiters:[":"],blocks:[4,4,4,4,4,4,4,4],uppercase:!0};break;case"ipv4":this.schema.options.cleave={delimiters:["."],blocks:[3,3,3,3],numericOnly:!0}}this.options=a(this.options,this.schema.options||{})}}])&&jr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W);function Tr(t){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(t)}function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ir(n.key),n)}}function Ir(t){var e=function(t,e){if("object"!=Tr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tr(e)?e:e+""}function Lr(t,e,r){return e=Br(e),function(t,e){if(e&&("object"===Tr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rr()?Reflect.construct(e,r||[],Br(t).constructor):e.apply(t,r))}function Rr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rr=function(){return!!t})()}function Nr(){return Nr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Br(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Nr.apply(this,arguments)}function Br(t){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Br(t)}function Fr(t,e){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fr(t,e)}var Dr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lr(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fr(t,e)}(e,t),r=e,(n=[{key:"setValue",value:function(t,r,n){t=this.applyConstFilter(t);var i=Nr(Br(e.prototype),"setValue",this).call(this,t,r,n);void 0!==i&&i.changed&&this.jodit_instance&&this.jodit_instance.setEditorValue(i.value)}},{key:"build",value:function(){this.options.format="textarea",Nr(Br(e.prototype),"build",this).call(this),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}},{key:"afterInputReady",value:function(){var t,r=this;window.Jodit?(t=this.expandCallbacks("jodit",a({},{height:300},this.defaults.options.jodit||{},this.options.jodit||{})),this.jodit_instance=new window.Jodit(this.input,t),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.jodit_instance.setReadOnly(!0),this.jodit_instance.events.on("change",(function(){r.value=r.jodit_instance.getEditorValue(),r.is_dirty=!0,r.onChange(!0)})),this.theme.afterInputReady(this.input)):Nr(Br(e.prototype),"afterInputReady",this).call(this)}},{key:"getNumColumns",value:function(){return 6}},{key:"enable",value:function(){!this.always_disabled&&this.jodit_instance&&this.jodit_instance.setReadOnly(!1),Nr(Br(e.prototype),"enable",this).call(this)}},{key:"disable",value:function(t){this.jodit_instance&&this.jodit_instance.setReadOnly(!0),Nr(Br(e.prototype),"disable",this).call(this,t)}},{key:"destroy",value:function(){this.jodit_instance&&(this.jodit_instance.destruct(),this.jodit_instance=null),Nr(Br(e.prototype),"destroy",this).call(this)}}])&&Ar(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W);function Vr(t,e,r,n){try{switch(t.format){case"ipv4":!function(t){var e=t.split(".");if(4!==e.length)throw new Error("error_ipv4");e.forEach((function(t){if(isNaN(+t)||+t<0||+t>255)throw new Error("error_ipv4")}))}(e);break;case"ipv6":!function(t){if(!t.match("^(?:(?:(?:[a-fA-F0-9]{1,4}:){6}|(?=(?:[a-fA-F0-9]{0,4}:){2,6}(?:[0-9]{1,3}.){3}[0-9]{1,3}$)(([0-9a-fA-F]{1,4}:){1,5}|:)((:[0-9a-fA-F]{1,4}){1,5}:|:)|::(?:[a-fA-F0-9]{1,4}:){5})(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])|(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?=(?:[a-fA-F0-9]{0,4}:){0,7}[a-fA-F0-9]{0,4}$)(([0-9a-fA-F]{1,4}:){1,7}|:)((:[0-9a-fA-F]{1,4}){1,7}|:)|(?:[a-fA-F0-9]{1,4}:){7}:|:(:[a-fA-F0-9]{1,4}){7})$"))throw new Error("error_ipv6")}(e);break;case"hostname":!function(t){if(!t.match("(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9].)+[a-zA-Z]{2,63}$)"))throw new Error("error_hostname")}(e)}return[]}catch(t){return[{path:r,property:"format",message:n(t.message)}]}}function $r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$r(Object(r),!0).forEach((function(e){var n,i,o;n=t,i=e,o=r[e],(i=Jr(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||qr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(t){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zr(t)}function Hr(t){return function(t){if(Array.isArray(t))return Ur(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(t,e){if(t){if("string"==typeof t)return Ur(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(t,e):void 0}}function Ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jr(n.key),n)}}function Jr(t){var e=function(t,e){if("object"!=zr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zr(e)?e:e+""}var Zr=function(){return t=function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsoneditor=e,this.schema=r||this.jsoneditor.schema,this.options=n||{},this.translate=this.jsoneditor.translate||i.translate,this.translateProperty=this.jsoneditor.translateProperty||i.translateProperty,this.defaults=i,this._validateSubSchema={dependentRequired:function(t,e,r){var n=[];if(void 0!==t.dependentRequired){var i=[];Object.keys(t.dependentRequired).forEach((function(r){if(void 0!==e[r]){var n=t.dependentRequired[r];i=n.filter((function(t){return!c(e,t)}))}})),i.length>0&&n.push({message:"Must have the required properties: "+i.join(", "),path:r})}return n},dependentSchemas:function(t,e,r){var n=this,i=[];return Object.keys(t.dependentSchemas).forEach((function(o){if(void 0!==e[o]){var a=t.dependentSchemas[o],s=n._validateSchema(a,e,r);i=[].concat(Hr(i),Hr(s))}})),i},contains:function(t,e,r){var n=this,i=[];if(!Array.isArray(e))return i.push({path:r,message:'Expected array for "contains", got '.concat(zr(e))}),i;var o=0;e.forEach((function(e){0===n._validateSchema(t.contains,e,r).length&&o++}));var a=0===o;return void 0!==t.minContains?o<t.minContains&&i.push({message:this.translate("error_minContains",[o,t.minContains],t),path:r}):a&&i.push({message:this.translate("error_contains",null,t),path:r}),void 0!==t.maxContains&&o>t.maxContains&&i.push({message:this.translate("error_maxContains",[o,t.maxContains],t),path:r}),i},if:function(t,e,r){if(void 0===t.then&&void 0===t.else)return[];var n=this._validateSchema(t.if,e,r),i=[],o=[];return void 0!==t.then&&(i=this._validateSchema(t.then,e,r)),void 0!==t.else&&(o=this._validateSchema(t.else,e,r)),!0===t.if?i:!1===t.if?o:0===n.length?i:n.length>0?o:[]},const:function(t,e,r){return JSON.stringify(t.const)===JSON.stringify(e)?[]:[{path:r,property:"const",message:this.translate("error_const",null,t)}]},enum:function(t,e,r){var n=JSON.stringify(e);return t.enum.some((function(t){return n===JSON.stringify(t)}))?[]:[{path:r,property:"enum",message:this.translate("error_enum",null,t)}]},extends:function(t,e,r){var n=this;return t.extends.reduce((function(t,i){return t.push.apply(t,Hr(n._validateSchema(i,e,r))),t}),[])},allOf:function(t,e,r){var n=this;return t.allOf.reduce((function(t,i){return t.push.apply(t,Hr(n._validateSchema(i,e,r))),t}),[])},anyOf_:function(t,e,r){var n=this;return t.anyOf.some((function(t){return!n._validateSchema(t,e,r).length}))?[]:[{path:r,property:"anyOf",message:this.translate("error_anyOf",null,t)}]},anyOf:function(t,e,r){var n=this,i=t.anyOf.map((function(t){return n._validateSchema(t,e,r)}));if(!i.some((function(t){return 0===t.length}))){var o,a=(null===(o=t.errorMessage)||void 0===o?void 0:o.anyOf)||this.translate("error_anyOf",null,t);return[{path:r,property:"anyOf",message:a}].concat(Hr(i.flat()))}return[]},oneOf:function(t,e,r){var n=this,i=0,o=[];t.oneOf.forEach((function(t,a){var s=n._validateSchema(t,e,r);s.length||i++,s.forEach((function(t){t.path="".concat(r,".oneOf[").concat(a,"]").concat(t.path.substr(r.length))})),o.push.apply(o,Hr(s))}));var a=[];return 1!==i&&(a.push({path:r,property:"oneOf",message:this.translate("error_oneOf",[i],t)}),a.push.apply(a,o)),a},not:function(t,e,r){return this._validateSchema(t.not,e,r).length?[]:[{path:r,property:"not",message:this.translate("error_not",null,t)}]},type:function(t,e,r){var n=this;if(Array.isArray(t.type)){if(!t.type.some((function(t){return n._checkType(t,e)})))return[{path:r,property:"type",message:this.translate("error_type_union",null,t)}]}else if(["date","time","datetime-local"].includes(t.format)&&"integer"===t.type){if(!this._checkType("string","".concat(e)))return[{path:r,property:"type",message:this.translate("error_type",[t.format],t)}]}else if(!this._checkType(t.type,e))return[{path:r,property:"type",message:this.translate("error_type",[t.type],t)}];return[]},type_:function(t,e,r){var n=this,i=[];return Array.isArray(t.type)?t.type.some((function(t){return n._checkType(t,e)}))||(i.push({path:r,property:"type",message:this.translate("error_type_union",null,t)}),t.type.forEach((function(o){return function(o){n._checkType(o,e)||i.push({path:r,property:"type",message:n.translate("error_type",[o],t)})}(o)}))):["date","time","datetime-local"].includes(t.format)&&"integer"===t.type?this._checkType("string","".concat(e))||i.push({path:r,property:"type",message:this.translate("error_type",[t.format],t)}):this._checkType(t.type,e)||i.push({path:r,property:"type",message:this.translate("error_type",[t.type],t)}),i},disallow:function(t,e,r){var n=this;if(Array.isArray(t.disallow)){if(t.disallow.some((function(t){return n._checkType(t,e)})))return[{path:r,property:"disallow",message:this.translate("error_disallow_union",null,t)}]}else if(this._checkType(t.disallow,e))return[{path:r,property:"disallow",message:this.translate("error_disallow",[t.disallow],t)}];return[]}},this._validateNumberSubSchema={multipleOf:function(t,e,r){return this._validateNumberSubSchemaMultipleDivisible(t,e,r)},divisibleBy:function(t,e,r){return this._validateNumberSubSchemaMultipleDivisible(t,e,r)},maximum:function(t,e,r){var n=t.exclusiveMaximum?e<t.maximum:e<=t.maximum;return window.math?n=window.math[t.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(e),window.math.bignumber(t.maximum)):window.Decimal&&(n=new window.Decimal(e)[t.exclusiveMaximum?"lt":"lte"](new window.Decimal(t.maximum))),n?[]:[{path:r,property:"maximum",message:this.translate(t.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[t.maximum],t)}]},minimum:function(t,e,r){var n=t.exclusiveMinimum?e>t.minimum:e>=t.minimum;return window.math?n=window.math[t.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(e),window.math.bignumber(t.minimum)):window.Decimal&&(n=new window.Decimal(e)[t.exclusiveMinimum?"gt":"gte"](new window.Decimal(t.minimum))),n?[]:[{path:r,property:"minimum",message:this.translate(t.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[t.minimum],t)}]}},this._validateStringSubSchema={maxLength:function(t,e,r){var n=[];return"".concat(e).length>t.maxLength&&n.push({path:r,property:"maxLength",message:this.translate("error_maxLength",[t.maxLength],t)}),n},minLength_:function(t,e,r){return"".concat(e).length<t.minLength?[{path:r,property:"minLength",message:this.translate(1===t.minLength?"error_notempty":"error_minLength",[t.minLength],t)}]:[]},minLength:function(t,e,r){if("".concat(e).length<t.minLength){var n,i=1===t.minLength?"error_notempty":"error_minLength";return[{path:r,property:"minLength",message:(null===(n=t.errorMessage)||void 0===n?void 0:n.minLength)||this.translate(i,[t.minLength],t)}]}return[]},pattern:function(t,e,r){return new RegExp(t.pattern).test(e)?[]:[{path:r,property:"pattern",message:t.options&&t.options.patternmessage?t.options.patternmessage:this.translate("error_pattern",[t.pattern],t)}]}},this._validateArraySubSchema={items:function(t,e,r){var n=this,i=[];if(Array.isArray(t.items))for(var o=0;o<e.length;o++)if(t.items[o])i.push.apply(i,Hr(this._validateSchema(t.items[o],e[o],"".concat(r,".").concat(o))));else{if(!0===t.additionalItems)break;if(!t.additionalItems){if(!1===t.additionalItems){i.push({path:r,property:"additionalItems",message:this.translate("error_additionalItems",null,t)});break}break}i.push.apply(i,Hr(this._validateSchema(t.additionalItems,e[o],"".concat(r,".").concat(o))))}else e.forEach((function(e,o){i.push.apply(i,Hr(n._validateSchema(t.items,e,"".concat(r,".").concat(o))))}));return i},maxItems:function(t,e,r){return e.length>t.maxItems?[{path:r,property:"maxItems",message:this.translate("error_maxItems",[t.maxItems],t)}]:[]},minItems:function(t,e,r){return e.length<t.minItems?[{path:r,property:"minItems",message:this.translate("error_minItems",[t.minItems],t)}]:[]},uniqueItems:function(t,e,r){for(var n={},i=0;i<e.length;i++){var o=JSON.stringify(e[i]);if(n[o])return[{path:r,property:"uniqueItems",message:this.translate("error_uniqueItems",null,t)}];n[o]=!0}return[]}},this._validateObjectSubSchema={maxProperties:function(t,e,r){return Object.keys(e).length>t.maxProperties?[{path:r,property:"maxProperties",message:this.translate("error_maxProperties",[t.maxProperties],t)}]:[]},minProperties:function(t,e,r){return Object.keys(e).length<t.minProperties?[{path:r,property:"minProperties",message:this.translate("error_minProperties",[t.minProperties],t)}]:[]},required:function(t,e,r){var n=this,i=[];return Array.isArray(t.required)&&t.required.forEach((function(o){if(void 0===e[o]){var a=n.jsoneditor.getEditor("".concat(r,".").concat(o));a&&!1===a.dependenciesFulfilled||a&&["button","info"].includes(a.schema.format||a.schema.type)||i.push({path:r,property:"required",message:n.translate("error_required",[t&&t.properties&&t.properties[o]&&t.properties[o].title?t.properties[o].title:o],t)})}})),i},properties:function(t,e,r,n){var i=this,o=[];return Object.entries(t.properties).forEach((function(t){var a=Wr(t,2),s=a[0],u=a[1];n[s]=!0,o.push.apply(o,Hr(i._validateSchema(u,e[s],"".concat(r,".").concat(s))))})),o},patternProperties:function(t,e,r,n){var i=this,o=[];return Object.entries(t.patternProperties).forEach((function(t){var a=Wr(t,2),s=a[0],u=a[1],c=new RegExp(s);Object.entries(e).forEach((function(t){var e=Wr(t,2),a=e[0],s=e[1];c.test(a)&&(n[a]=!0,o.push.apply(o,Hr(i._validateSchema(u,s,"".concat(r,".").concat(a)))))}))})),o}},this._validateObjectSubSchema2={propertyNames:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[];if(!e||"object"!==zr(e))return i;for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];if(!n[s])if("boolean"!=typeof t.propertyNames){if("object"===zr(t.propertyNames)){var u=t.propertyNames;"number"==typeof u.maxLength&&s.length>u.maxLength&&i.push({path:r,property:"propertyNames.maxLength",message:this.translate("error_property_names_exceeds_maxlength",[s],u)}),"number"==typeof u.minLength&&s.length<u.minLength&&i.push({path:r,property:"propertyNames.minLength",message:this.translate("error_property_names_below_minlength",[s],u)}),void 0!==u.const&&s!==u.const&&i.push({path:r,property:"propertyNames.const",message:this.translate("error_property_names_const_mismatch",[s],u)}),Array.isArray(u.enum)&&!u.enum.includes(s)&&i.push({path:r,property:"propertyNames.enum",message:this.translate("error_property_names_enum_mismatch",[s],u)}),"string"==typeof u.pattern&&(new RegExp(u.pattern).test(s)||i.push({path:r,property:"propertyNames.pattern",message:this.translate("error_property_names_pattern_mismatch",[s],u)}))}n[s]=!0}else{if(!0===t.propertyNames){n[s]=!0;continue}i.push({path:r,property:"propertyNames",message:this.translate("error_property_names_false",[s],t)})}}return i},additionalProperties:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[];if(!e||"object"!==zr(e)||"object"!==t.type)return i;for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];n[s]||(["default"].includes(s)?n[s]=!0:!1===t.additionalProperties?i.push({path:r,property:"additionalProperties",message:'Property "'.concat(s,'" is not allowed')}):!0===t.additionalProperties?n[s]=!0:"object"===zr(t.additionalProperties)&&(i.push.apply(i,Hr(this._validateSchema(t.additionalProperties,e[s],"".concat(r,".").concat(s)))),n[s]=!0))}return i}}},e=[{key:"fitTest",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e7,i={match:0,extra:0};if("object"===zr(t)&&null!==t){var o=!Array.isArray(t),a=this._getSchema(e);if(a.oneOf){var s=Mr({},i);return a.oneOf.forEach((function(e){if(!o||"array"!==e.type){var i=r.fitTest(t,e,n);(i.match>s.match||i.match===s.match&&i.extra<s.extra)&&(s=i)}})),s}if(a.anyOf){var u=Mr({},i);return a.anyOf.forEach((function(e){var i=r.fitTest(t,e,n);(i.match>u.match||i.match===u.match&&i.extra<u.extra)&&(u=i)})),u}var l=a.properties||{};for(var h in l)if(c(l,h)){if("object"===zr(t[h])&&"object"===zr(l[h])&&l[h].properties){var p=this.fitTest(t[h],l[h],n/100);i.match+=p.match,i.extra+=p.extra}void 0!==t[h]&&(i.match+=n)}else i.extra+=n}return i}},{key:"fitTest_",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e7,n={match:0,extra:0};if("object"===zr(t)&&null!==t){var i=this._getSchema(e);if(i.anyOf){var o,a=Mr({},n),s=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=qr(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(i.anyOf);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=this.fitTest(t,u,r);(l.match>a.match||l.match===a.match&&l.extra<a.extra)&&(a=l)}}catch(t){s.e(t)}finally{s.f()}return a}var h=this._getSchema(e).properties;for(var p in h)if(c(h,p)){if("object"===zr(t[p])&&"object"===zr(h[p])&&"object"===zr(h[p].properties)){var f=this.fitTest(t[p],h[p],r/100);n.match+=f.match,n.extra+=f.extra}void 0!==t[p]&&(n.match+=r)}else n.extra+=r}return n}},{key:"_getSchema",value:function(t){return void 0===t?a({},this.jsoneditor.expandRefs(this.schema)):t}},{key:"validate",value:function(t){return this._validateSchema(this.schema,t)}},{key:"_validateSchema",value:function(t,e,r){var n=this,i=[];return r=r||this.jsoneditor.root.formname,t=a({},this.jsoneditor.expandRefs(t)),void 0===e?this._validateV3Required(t,e,r):(Object.keys(t).forEach((function(o){n._validateSubSchema[o]&&i.push.apply(i,Hr(n._validateSubSchema[o].call(n,t,e,r)))})),i.push.apply(i,Hr(this._validateByValueType(t,e,r))),t.links&&t.links.forEach((function(o,a){o.rel&&"describedby"===o.rel.toLowerCase()&&(t=n._expandSchemaLink(t,a),i.push.apply(i,Hr(n._validateSchema(t,e,r,n.translate))))})),["date","time","datetime-local"].includes(t.format)&&i.push.apply(i,Hr(this._validateDateTimeSubSchema(t,e,r))),["uuid"].includes(t.format)&&i.push.apply(i,Hr(this._validateUUIDSchema(t,e,r))),i.push.apply(i,Hr(this._validateCustomValidator(t,e,r))),this._removeDuplicateErrors(i))}},{key:"_expandSchemaLink",value:function(t,e){var r=t.links[e].href,n=this.jsoneditor.root.getValue(),i=this.jsoneditor.compileTemplate(r,this.jsoneditor.template),o=document.location.origin+document.location.pathname+i(n);return t.links=t.links.slice(0,e).concat(t.links.slice(e+1)),a({},t,this.jsoneditor.refs[o])}},{key:"_validateV3Required",value:function(t,e,r){return(void 0!==t.required&&!0===t.required||void 0===t.required&&!0===this.jsoneditor.options.required_by_default)&&"info"!==t.type?[{path:r,property:"required",message:this.translate("error_notset",null,t)}]:[]}},{key:"_validateByValueType",value:function(t,e,r){var n=this,i=[];if(null===e)return i;if("number"==typeof e)Object.keys(t).forEach((function(o){n._validateNumberSubSchema[o]&&i.push.apply(i,Hr(n._validateNumberSubSchema[o].call(n,t,e,r)))}));else if("string"==typeof e)Object.keys(t).forEach((function(o){n._validateStringSubSchema[o]&&i.push.apply(i,Hr(n._validateStringSubSchema[o].call(n,t,e,r)))}));else if(Array.isArray(e))Object.keys(t).forEach((function(o){n._validateArraySubSchema[o]&&i.push.apply(i,Hr(n._validateArraySubSchema[o].call(n,t,e,r)))}));else if("object"===zr(e)){var o={};Object.keys(t).forEach((function(a){n._validateObjectSubSchema[a]&&i.push.apply(i,Hr(n._validateObjectSubSchema[a].call(n,t,e,r,o)))})),void 0!==t.additionalProperties||!this.jsoneditor.options.no_additional_properties||t.oneOf||t.anyOf||t.allOf||(t.additionalProperties=!1),Object.keys(t).forEach((function(a){void 0!==n._validateObjectSubSchema2[a]&&i.push.apply(i,Hr(n._validateObjectSubSchema2[a].call(n,t,e,r,o)))}))}return i}},{key:"_validateUUIDSchema",value:function(t,e,r){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)?[]:[{path:r,property:"format",message:this.translate("error_pattern",["^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"],t)}]}},{key:"_validateNumberSubSchemaMultipleDivisible",value:function(t,e,r){var n=t.multipleOf||t.divisibleBy,i=e/n===Math.floor(e/n);return window.math?i=window.math.mod(window.math.bignumber(e),window.math.bignumber(n)).equals(0):window.Decimal&&(i=new window.Decimal(e).mod(new window.Decimal(n)).equals(0)),i?[]:[{path:r,property:t.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[n],t)}]}},{key:"_validateDateTimeSubSchema",value:function(t,e,r){var n,i,o,a=this,s=this.jsoneditor.getEditor(r),u=s&&s.flatpickr?s.flatpickr.config.dateFormat:{date:'"YYYY-MM-DD"',time:'"HH:MM"',"datetime-local":'"YYYY-MM-DD HH:MM"'}[t.format];if("integer"===t.type)return n=t,o=r,1*(i=e)<1?[{path:o,property:"format",message:a.translate("error_invalid_epoch",null,n)}]:i!==Math.abs(parseInt(i))?[{path:o,property:"format",message:a.translate("error_".concat(n.format.replace(/-/g,"_")),[u],n)}]:[];if(s&&s.flatpickr){if(s)return function(t,e,r,n){if(""!==e){var i;if("single"!==n.flatpickr.config.mode){var o="range"===n.flatpickr.config.mode?n.flatpickr.l10n.rangeSeparator:", ";i=n.flatpickr.selectedDates.map((function(t){return n.flatpickr.formatDate(t,n.flatpickr.config.dateFormat)})).join(o)}try{if(i){if(i!==e)throw new Error("".concat(n.flatpickr.config.mode," mismatch"))}else if(n.flatpickr.formatDate(n.flatpickr.parseDate(e,n.flatpickr.config.dateFormat),n.flatpickr.config.dateFormat)!==e)throw new Error("mismatch")}catch(e){var s=void 0!==n.flatpickr.config.errorDateFormat?n.flatpickr.config.errorDateFormat:n.flatpickr.config.dateFormat;return[{path:r,property:"format",message:a.translate("error_".concat(n.format.replace(/-/g,"_")),[s],t)}]}}return[]}(t,e,r,s)}else if(!{date:/^(\d{4}\D\d{2}\D\d{2})$/,time:/^(\d{2}:\d{2}(?::\d{2})?)$/,"datetime-local":/^(\d{4}\D\d{2}\D\d{2}[ T]\d{2}:\d{2}(?::\d{2})?)$/}[t.format].test(e))return[{path:r,property:"format",message:this.translate("error_".concat(t.format.replace(/-/g,"_")),[u],t)}];return[]}},{key:"_validateCustomValidator",value:function(t,e,r){var n=this,i=[];i.push.apply(i,Hr(Vr.call(this,t,e,r,this.translate)));var o=function(o){i.push.apply(i,Hr(o.call(n,t,e,r)))};return this.defaults.custom_validators.forEach(o),this.options.custom_validators&&this.options.custom_validators.forEach(o),i}},{key:"_removeDuplicateErrors",value:function(t){return t.reduce((function(t,e){var r=!0;return t||(t=[]),t.forEach((function(t){t.message===e.message&&t.path===e.path&&t.property===e.property&&(t.errorcount++,r=!1)})),r&&(e.errorcount=1,t.push(e)),t}),[])}},{key:"_checkType",value:function(t,e){var r={string:function(t){return"string"==typeof t},number:function(t){return"number"==typeof t},integer:function(t){return"number"==typeof t&&t===Math.floor(t)},boolean:function(t){return"boolean"==typeof t},array:function(t){return Array.isArray(t)},object:function(t){return null!==t&&!Array.isArray(t)&&"object"===zr(t)},null:function(t){return null===t}};return"string"==typeof t?!r[t]||r[t](e):!this._validateSchema(t,e).length}}],e&&Gr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Yr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yr(Object(r),!0).forEach((function(e){var n,i,o;n=t,i=e,o=r[e],(i=rn(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xr(t){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(t)}function Qr(t){return function(t){if(Array.isArray(t))return tn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rn(n.key),n)}}function rn(t){var e=function(t,e){if("object"!=Xr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xr(e)?e:e+""}function nn(t,e,r){return e=sn(e),function(t,e){if(e&&("object"===Xr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,on()?Reflect.construct(e,r||[],sn(t).constructor):e.apply(t,r))}function on(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(on=function(){return!!t})()}function an(){return an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sn(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},an.apply(this,arguments)}function sn(t){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sn(t)}function un(t,e){return un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},un(t,e)}var cn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nn(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&un(t,e)}(e,t),r=e,(n=[{key:"register",value:function(){if(this.editors){for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister();this.editors[this.activeIndex]&&this.editors[this.activeIndex].register()}an(sn(e.prototype),"register",this).call(this)}},{key:"unregister",value:function(){if(an(sn(e.prototype),"unregister",this).call(this),this.editors)for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister()}},{key:"getNumColumns",value:function(){return this.editors[this.activeIndex]?Math.max(this.editors[this.activeIndex].getNumColumns(),4):4}},{key:"enable",value:function(){if(!this.always_disabled){if(this.editors)for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].enable();this.switcher.disabled=!1,an(sn(e.prototype),"enable",this).call(this)}}},{key:"disable",value:function(t){if(t&&(this.always_disabled=!0),this.editors)for(var r=0;r<this.editors.length;r++)this.editors[r]&&this.editors[r].disable(t);this.switcher.disabled=!0,an(sn(e.prototype),"disable",this).call(this)}},{key:"preBuild",value:function(){this._switching=!1,this._applyingIf=!1,this.activeIndex=0,this.types=[],this.editors=[],this.validators=[],this.keep_values=!0,this.schema.oneOf?(this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf):this.schema.anyOf?(this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf):this.schema.if?this.types=this.handleIfSchema():this.types=this.handleTypeSchema(),this.display_text=this.getDisplayText(this.types)}},{key:"handleIfSchema_tmp",value:function(){if(this.if=!0,this.ifSchema=JSON.parse(JSON.stringify(this.schema.if)),this.thenSchema=this.schema.then?JSON.parse(JSON.stringify(this.schema.then)):{},this.elseSchema=this.schema.else?JSON.parse(JSON.stringify(this.schema.else)):{},(Array.isArray(this.schema.type)&&this.schema.type.includes("array")||Array.isArray(this.schema.oneOf)&&this.schema.oneOf.some((function(t){return"array"===t.type})))&&this.schema.if&&this.schema.items)throw new Error('Ambiguous schema at "'.concat(this.path,'": "if"/"then" coexists with "items" and multiple types. ')+'Use "oneOf" to separate array vs string cases.');var t=JSON.parse(JSON.stringify(this.schema));return delete t.if,delete t.then,delete t.else,ft(this.thenSchema,t),ft(this.elseSchema,t),[this.thenSchema,this.elseSchema].forEach((function(t){delete t.if,delete t.then,delete t.else})),delete this.schema.if,[this.thenSchema,this.elseSchema]}},{key:"handleIfSchema",value:function(){if(this.if=!0,this.ifSchema=JSON.parse(JSON.stringify(this.schema.if)),this.thenSchema={title:""},this.elseSchema={title:""},(Array.isArray(this.schema.type)&&this.schema.type.includes("array")||Array.isArray(this.schema.oneOf)&&this.schema.oneOf.some((function(t){return"array"===t.type})))&&this.schema.if&&this.schema.items)throw new Error('Ambiguous schema at "'.concat(this.path,'": "if"/"then" coexists with "items" and multiple types.\nUse "oneOf" to separate array vs string cases.'));this.schema.then&&ft(this.thenSchema,this.schema,this.schema.then),this.schema.else&&ft(this.elseSchema,this.schema,this.schema.else);var t=[this.thenSchema,this.elseSchema];return t.forEach((function(t){delete t.if,delete t.then,delete t.else})),delete this.schema.if,t}},{key:"handleTypeSchema",value:function(){var t;if(this.schema.type&&"any"!==this.schema.type)t=Array.isArray(this.schema.type)?this.schema.type:[this.schema.type];else if(t=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var e=Array.isArray(this.schema.disallow)?this.schema.disallow:[this.schema.disallow];t=t.filter((function(t){return!e.includes(t)}))}return delete this.schema.type,t}},{key:"convertValueForEditor",value:function(t,e){if(null==t)switch(e){case"array":return[];case"string":return"";case"object":return{};case"number":case"integer":return null;default:return t}switch(e){case"array":if(Array.isArray(t))return t;if("string"==typeof t){if(""===t.trim())return[];try{var r=JSON.parse(t);if(Array.isArray(r))return r}catch(t){}return[t]}return p(t)?Object.values(t):[t];case"string":if(Array.isArray(t))return t.join(",");if(p(t)){var n=Object.values(t);return 0===n.length?"":n.join(",")}return"number"==typeof t||"boolean"==typeof t?String(t):t;case"object":return p(t)?t:Array.isArray(t)?Object.assign({},t):{};case"number":if("number"==typeof t)return t;if("string"==typeof t){var i=Number(t);return isNaN(i)?null:i}return Array.isArray(t)&&1===t.length?Number(t[0]):null;case"integer":if("number"==typeof t)return Math.floor(t);if("string"==typeof t){var o=Number(t);return isNaN(o)?null:Math.floor(o)}return Array.isArray(t)&&1===t.length?Math.floor(Number(t[0])):null;case"null":return null;default:return t}}},{key:"switchEditor",value:function(t){var e=this;this._switching=!0,this.previousIndex=this.activeIndex;var r=this.getValue();this.editors.forEach((function(t,n){t&&(e.activeIndex!==n||(r=t.getValue()))})),this.activeIndex=t,this.theme.switcherSelecItemIndex(this.switcher,t),this.editors[t]||this.buildChildEditor(t),this.editors[this.activeIndex]&&this.if&&(r=this.convertValueForEditor(r,this.editors[this.activeIndex].schema.type)),this.register(),this.editors.forEach((function(t,n){t&&(e.activeIndex===n?(e.jsoneditor.treeManager&&e.jsoneditor.treeManager.handleEvent("switchEditor",t),e.if&&t.setValue(r,!0),e.theme.toggle(t.container,!0)):e.theme.toggle(t.container,!1))})),this.onChange(!0,!1,{event:"switch",data:{index:this.previousIndex,path:this.editors[t].path}}),this.refreshValue(),this._switching=!1}},{key:"buildChildEditor",value:function(t){var e,r,n,i=this.types[t];if(this.options.table_row?r=this.container:(r=this.theme.getChildEditorHolder(),this.theme.append(this.editor_holder,r)),"string"==typeof i)(n=a({},this.schema)).type=i;else{n=a({},this.schema,i),n=this.jsoneditor.expandRefs(n);var o=Array.isArray(this.schema.required)?this.schema.required:[],s=Array.isArray(i.required)?i.required:[];(o.length||s.length)&&(n.required=Array.from(new Set([].concat(Qr(o),Qr(s)))))}null!==(e=n)&&void 0!==e&&null!==(e=e.options)&&void 0!==e&&e.dependencies&&delete n.options.dependencies;var u=this.jsoneditor.getEditorClass(n),c=u.classname,l=u.editorClass;this.editors[t]=this.jsoneditor.createEditor(l,$.extend(this.options,{jsoneditor:this.jsoneditor,schema:n,container:r,path:this.path,pathNoIndex:this.pathNoIndex,parent:this,required:!0,classname:c})),this.editors[t].preBuild(),this.editors[t].build(),this.editors[t].postBuild(),this.editors[t].header&&this.theme.visuallyHidden(this.editors[t].header),t!==this.activeIndex&&this.theme.toggle(r,!1)}},{key:"build",value:function(){var t,e=this;this.header=this.theme.getHeader(this.getTitle(),3),this.switcher=this.theme.getSwitcher(this.display_text,this.inputOptions,"type"),this.switcher.setAttribute("id",this.formname+"switcher"),this.if||(this.theme.append(this.container,this.header),this.theme.append(this.container,this.switcher)),this.theme.switcherSelectAction(this.switcher,(function(t){e.switchEditor(parseInt(t.data)),e.onChange(!0)})),(1===this.display_text.length||this.hasConstFilter())&&this.theme.toggle(this.switcher,!1),this.options.table_row||(this.editor_holder=document.createElement("div"),this.theme.append(this.container,this.editor_holder));var r={};this.jsoneditor.options.custom_validators&&(r.custom_validators=this.jsoneditor.options.custom_validators),this.types.forEach((function(t,n){var i;e.editors[n]=!1,"string"==typeof t?(i=a({},e.schema)).type=t:(i=a({},e.schema,t),t.required&&Array.isArray(t.required)&&e.schema.required&&Array.isArray(e.schema.required)&&(i.required=e.schema.required.concat(t.required))),e.validators[n]=new Zr(e.jsoneditor,i,r,e.defaults)})),this.jsoneditor.on("change",(function(){e.switchIf()}));var n=0;if(this.parent&&null!==(t=this.parent)&&void 0!==t&&t.rows&&this.parent.rows.length>0){var i=this.parent.rows;n=i[i.length-1].activeIndex}this.switchEditor(n),"null"!==this.editors[n].schema.type&&this.theme.toggle(this.header,!1)}},{key:"onChildEditorChange",value:function(t,r){this.editors[this.activeIndex]&&this.refreshValue(),an(sn(e.prototype),"onChildEditorChange",this).call(this,t,r)}},{key:"getDisplayText",value:function(t){var e=[],r={};t.forEach((function(t){"object"===Xr(t)&&t&&["title","description","format","type"].forEach((function(e){t[e]&&(r[t[e]]=(r[t[e]]||0)+1)}))})),t.forEach((function(t){var n;n="string"==typeof t?t:"object"===Xr(t)&&t?function(t){for(var e=0,n=["title","format","type","description"];e<n.length;e++){var i=n[e];if(t[i]&&r[t[i]]<=1)return t[i]}return null}(t)||function(t){for(var e=0,r=["title","format","type","description"];e<r.length;e++){var n=r[e];if(t[n])return t[n]}return null}(t)||(JSON.stringify(t).length<500?JSON.stringify(t):"type"):"type",e.push(n)}));var n={};return e.forEach((function(t,i){n[t]=(n[t]||0)+1,r[t]>1&&(e[i]="".concat(t," ").concat(n[t]))})),e}},{key:"refreshValue",value:function(){this.editors[this.activeIndex]&&(this.value=this.editors[this.activeIndex].getValue())}},{key:"switchIf",value:function(){if(this.ifSchema&&this.value){var t=this.getIfIndex(this.value);t!==this.previousIndex&&(this.switchEditor(t),this.editors[this.activeIndex]&&this.editors[this.activeIndex].setValue(this.value,!0),this.theme.switcherSelecItemIndex(this.switcher,this.activeIndex))}}},{key:"getIfIndex",value:function(t){return 0===this.jsoneditor.validator._validateSchema(this.ifSchema,t).length?0:1}},{key:"setValue",value:function(t,e){t=this.applyConstFilter(t);var r=this.activeIndex,n={match:0,extra:0,i:r},i={match:0,i:null};this.validators.forEach((function(e,r){var o,a,s=p(t)?(a=t,Object.fromEntries(Object.entries(a).filter((function(t){var e=et(t,1)[0];return ut.has(e)})))):t;o=e.fitTest(s),(n.match<o.match||n.match===o.match&&n.extra>o.extra)&&(n=Kr(Kr({},o),{},{i:r})),0===e.validate(t).length&&null===i.i?(i.i=r,o&&(i.match=o.match)):null!==i.i&&(n=i)}));var o=i.i;i.match<n.match&&(o=n.i),this.if&&(o=this.getIfIndex(t)),null===o?o=this.activeIndex:this.activeIndex=o,this.theme.switcherSelecItemIndex(this.switcher,o);var a=this.activeIndex!==r;a?(this.switchEditor(this.activeIndex),this.editors[this.activeIndex].setValue(t,e)):void 0!==t&&this.editors[this.activeIndex].setValue(t,e),this.refreshValue(),this.onChange(a)}},{key:"destroy",value:function(){this.editors.forEach((function(t){t&&t.destroy()})),$(this.editor_holder).remove(),$(this.switcher).remove(),an(sn(e.prototype),"destroy",this).call(this),this.editors=null,this.editor_holder=null,this.switcher=null}},{key:"showValidationErrors",value:function(t){var e=this;if(this.oneOf||this.anyOf){var r=this.oneOf?"oneOf":"anyOf";this.editors.forEach((function(n,i){if(n){var o="".concat(e.path,".").concat(r,"[").concat(i,"]");n.showValidationErrors(t.reduce((function(t,r){if(r.path.startsWith(o)||r.path===o.substr(0,r.path.length)){var n=a({},r);r.path.startsWith(o)&&(n.path=e.path+n.path.substr(o.length)),t.push(n)}return t}),[]))}}))}else this.editors.forEach((function(e){e&&e.showValidationErrors(t)}))}},{key:"addLinks",value:function(){}}])&&en(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function ln(t){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}function hn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pn(n.key),n)}}function pn(t){var e=function(t,e){if("object"!=ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ln(e)?e:e+""}function fn(t,e,r){return e=mn(e),function(t,e){if(e&&("object"===ln(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dn()?Reflect.construct(e,r||[],mn(t).constructor):e.apply(t,r))}function dn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dn=function(){return!!t})()}function yn(){return yn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mn(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},yn.apply(this,arguments)}function mn(t){return mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mn(t)}function vn(t,e){return vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vn(t,e)}var bn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fn(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vn(t,e)}(e,t),r=e,(n=[{key:"register",value:function(){yn(mn(e.prototype),"register",this).call(this),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}},{key:"unregister",value:function(){yn(mn(e.prototype),"unregister",this).call(this),this.input&&this.input.removeAttribute("name")}},{key:"getNumColumns",value:function(){var t=this,e=this.getTitle().length;return Object.keys(this.select_values).forEach((function(r){return e=Math.max(e,"".concat(t.select_values[r]).length+4)})),Math.min(12,Math.max(e/7,2))}},{key:"preBuild",value:function(){yn(mn(e.prototype),"preBuild",this).call(this);var t=this.jsoneditor.expandRefs(this.schema.items||{}),r=t.enum||[],n=t.options&&t.options.enum||[],i=t.options&&t.options.enum_titles||[];this.option_keys=[],this.option_enum=[];for(var o=0;o<r.length;o++)if(this.sanitize(r[o])===r[o]){var a=n[o]||{};"title"in a||(a.title=i[o]||r[o]),this.option_keys.push(r[o]),this.option_enum.push(a)}}},{key:"build",value:function(){var t=this;this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.inputs={};var e=this.option_keys.map((function(e,r){return{data:e,label:t.option_enum[r].title}})),r=this.inputOptions;r.config.options=e,this.input=this.theme.getMultiSelect(r),this.input.on("change",(function(e){t.value=e,t.onChange(!0)})),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this),this.inputs.controlgroup=this.inputs.controls=this.control,(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.theme.append(this.container,this.control)}},{key:"setValue",value:function(t,e){t=(t=this.applyConstFilter(t))||[],Array.isArray(t)||(t=[t]),t=t.map((function(t){return"".concat(t)})),this.input.setValue(t),this.onChange(!0)}},{key:"sanitize",value:function(t){return"boolean"===this.schema.items.type?!!t:"number"===this.schema.items.type?1*t||0:"integer"===this.schema.items.type?Math.floor(1*t||0):"".concat(t)}},{key:"enable",value:function(){var t=this;this.always_disabled||(this.input?this.input.disabled=!1:this.inputs&&Object.keys(this.inputs).forEach((function(e){return t.inputs[e].disabled=!1})),yn(mn(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){var r=this;t&&(this.always_disabled=!0),this.input?this.input.disabled=!0:this.inputs&&Object.keys(this.inputs).forEach((function(t){return r.inputs[t].disabled=!0})),yn(mn(e.prototype),"disable",this).call(this)}},{key:"destroy",value:function(){yn(mn(e.prototype),"destroy",this).call(this)}},{key:"escapeRegExp",value:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},{key:"showValidationErrors",value:function(t){var e=new RegExp("^".concat(this.escapeRegExp(this.path),"(\\.\\d+)?$")),r=t.reduce((function(t,r){return r.path.match(e)&&t.push(r.message),t}),[]);r.length?this.theme.addInputError(this.input||this.inputs,"".concat(r.join(". "),".")):this.theme.removeInputError(this.input||this.inputs)}}])&&hn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function gn(t){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(t)}function wn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,On(n.key),n)}}function On(t){var e=function(t,e){if("object"!=gn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gn(e)?e:e+""}function jn(t,e,r){return e=xn(e),function(t,e){if(e&&("object"===gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_n()?Reflect.construct(e,r||[],xn(t).constructor):e.apply(t,r))}function _n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_n=function(){return!!t})()}function kn(){return kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xn(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},kn.apply(this,arguments)}function xn(t){return xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xn(t)}function En(t,e){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},En(t,e)}var Sn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jn(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&En(t,e)}(e,t),r=e,(n=[{key:"register",value:function(){kn(xn(e.prototype),"register",this).call(this),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}},{key:"unregister",value:function(){kn(xn(e.prototype),"unregister",this).call(this),this.input&&this.input.removeAttribute("name")}},{key:"preBuild",value:function(){kn(xn(e.prototype),"preBuild",this).call(this)}},{key:"build",value:function(){var t=this;this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact");var e=this.getInputOptions(this.schema.items);this.input=this.theme.getMultiSelect(e),this.input.on("change",(function(e){t.value=t.input.getValue(),t.onChange(!0)})),(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this),this.theme.append(this.container,this.control),window.requestAnimationFrame((function(){t.afterInputReady()}))}},{key:"afterInputReady",value:function(){this.theme.afterInputReady(this.input)}},{key:"setValue",value:function(t,e){t=(t=this.applyConstFilter(t))||[],Array.isArray(t)||(t=[t]),t=t.map((function(t){return"".concat(t)})),this.input.setValue(t),this.value=t,this.onChange(!0)}},{key:"enable",value:function(){this.always_disabled||(this.input.disabled=!1,kn(xn(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.input.disabled=!0,kn(xn(e.prototype),"disable",this).call(this)}},{key:"destroy",value:function(){kn(xn(e.prototype),"destroy",this).call(this)}},{key:"escapeRegExp",value:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},{key:"showValidationErrors",value:function(t){var e=new RegExp("^".concat(this.escapeRegExp(this.path),"(\\.\\d+)?$")),r=t.reduce((function(t,r){return r.path.match(e)&&t.push(r.message),t}),[]);r.length?this.theme.addInputError(this.input||this.inputs,"".concat(r.join(". "),".")):this.theme.removeInputError(this.input||this.inputs)}}])&&wn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Pn(t){var e;t=t||{},Pn.super.call(this,t),this.$element.append(null!==(e=t.el.$element)&&void 0!==e?e:t.el)}function Cn(t){switch(t=t||{},Cn.super.call(this,t),this.id=t.id,this.editor=t.editor,OO.ui.mixin.GroupWidget.call(this,$.extend({$group:this.$element},t)),this.currentDepth=this.editor.currentDepth-1,this.layoutName=t.layout.name||"default",this.layoutName){case"tabs":this.layout=this.editor.theme.getIndexLayout(t.layout.config),this.$element.append(this.layout.$element);break;case"booklet":this.layout=this.editor.theme.getBooklet(t.layout.config),this.$element.append(this.layout.$element);break;case"horizontal":this.layout=new OO.ui.HorizontalLayout(t.layout.config),this.$element.append(this.layout.$element);break;default:this.layout=new OO.ui.FieldsetLayout({label:t.title}),t.description&&this.layout.addItems([new OO.ui.Element({content:[new OO.ui.HtmlSnippet(t.description)]})]),this.$element.append(this.layout.$element)}}function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function An(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(r),!0).forEach((function(e){In(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function In(t,e,r){return(e=Vn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ln(t){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(t)}function Rn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Bn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Nn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Bn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(t,e){if(t){if("string"==typeof t)return Fn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fn(t,e):void 0}}function Fn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vn(n.key),n)}}function Vn(t){var e=function(t,e){if("object"!=Ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ln(e)?e:e+""}function $n(t,e,r){return e=zn(e),function(t,e){if(e&&("object"===Ln(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Mn()?Reflect.construct(e,r||[],zn(t).constructor):e.apply(t,r))}function Mn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Mn=function(){return!!t})()}function Wn(){return Wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zn(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Wn.apply(this,arguments)}function zn(t){return zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zn(t)}function Hn(t,e){return Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hn(t,e)}OO.inheritClass(Pn,OO.ui.Widget),OO.inheritClass(Cn,OO.ui.Widget),OO.mixinClass(Cn,OO.ui.mixin.GroupWidget),Cn.prototype.groupTabs=function(t){var e={},r={};for(var n in t){var i=t[n];i.isPrimitive()?e[n]=i:r[n]=i}return{main:e,others:r}},Cn.prototype.replaceItems=function(t){var e=this;switch(this.layoutName){case"horizontal":this.layout.addItems(Object.values(t).map((function(t){return new Pn({el:t.container})})));break;case"booklet":case"tabs":var r="tabs"===this.layoutName?"clearTabPanels":"clearPages";this.layout[r]();var n=this.groupTabs(t),i=n.main,o=n.others,a=null;if(Object.keys(i).length){var s=this.editor.theme.createTabLayoutPage(this.layout,"main","main");for(var u in i)this.editor.theme.append(s,i[u].container);a="main"}for(var c in o){var l=this.editor.theme.createTabLayoutPage(this.layout,c,c);this.editor.theme.append(l,o[c].container),a||(a=c)}if("booklet"===this.layoutName&&this.layout.toggleOutline(Object.keys(o).length>0),Object.keys(o).length>0){var h="tabs"===this.layoutName?"setTabPanel":"setPage";this.layout[h](a)}break;case"popup":this.layout.clearItems();var p=[],f=function(){var r=t[d];if(r.isPrimitive()){var n=new OO.ui.ButtonWidget({label:"edit",icon:"edit",flags:[]});n.on("click",(function(){var t={initialize:function(t){var e=new(bt(OO.ui.PanelLayout))({scrollable:!1,framed:!1,padded:!0});e.$element.append(r.container),t.$body.append(e.$element)},setupProcess:function(t){return t.actions.setMode("save")},onOpen:function(t){},actionProcess:function(t,e,r){t.close({action:r})}};new vt({size:"large",title:r.getTitle()},t,e)}));var i=new OO.ui.FieldLayout(n,{label:r.getTitle(),helpInline:!0,help:r.description,align:"top"});p.push(i.$element)}else p.push(r.container);e.layout.addItems(p.map((function(t){return new Pn({el:t})})))};for(var d in t)f();break;default:this.layout.clearItems();var y=Object.values(t);this.layout.addItems(y.map((function(t){return new Pn({el:t.container})})))}};var qn=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=$n(this,e,[t,r])).currentDepth=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hn(t,e)}(e,t),r=e,n=[{key:"getChildEditors",value:function(){return this.editors}},{key:"register",value:function(){Wn(zn(e.prototype),"register",this).call(this),this.editors&&Object.values(this.editors).forEach((function(t){return t.register()}))}},{key:"unregister",value:function(){Wn(zn(e.prototype),"unregister",this).call(this),this.editors&&Object.values(this.editors).forEach((function(t){return t.unregister()}))}},{key:"getNumColumns",value:function(){return Math.max(Math.min(12,this.maxwidth),3)}},{key:"enable",value:function(){if(!this.always_disabled&&(Wn(zn(e.prototype),"enable",this).call(this),this.editors))for(var t=0,r=Object.values(this.editors);t<r.length;t++){var n=r[t];n.isActive()&&n.enable()}}},{key:"disable",value:function(t){if(t&&(this.always_disabled=!0),Wn(zn(e.prototype),"disable",this).call(this),this.editors)for(var r=0,n=Object.values(this.editors);r<n.length;r++){var i=n[r];i.isActive()&&i.disable(t)}}},{key:"preBuild",value:function(){if(Wn(zn(e.prototype),"preBuild",this).call(this),this.editors={},this.cached_editors={},this.schema.properties=this.schema.properties||{},this.originalProperties=Object.keys(this.schema.properties),this.lazyProperties=[],this.minwidth=0,this.maxwidth=0,this.options.table_row){for(var t=0,r=Object.entries(this.schema.properties);t<r.length;t++){var n=Nn(r[t],2),i=n[0],o=n[1],a=this.jsoneditor.getEditorClass(o),s=a.classname,u=a.editorClass;this.editors[i]=this.jsoneditor.createEditor(u,{jsoneditor:this.jsoneditor,schema:o,path:"".concat(this.path,".").concat(i),pathNoIndex:"".concat(this.pathNoIndex,".").concat(i),parent:this,compact:!0,required:!0,ignore:!0,classname:s},this.currentDepth+1),this.editors[i].preBuild();var c=this.editors[i].options.hidden?0:this.editors[i].options.grid_columns||this.editors[i].getNumColumns();this.minwidth+=c,this.maxwidth+=c}this.no_link_holder=!0}else{if(this.options.table)throw new Error("Not supported yet");this.computeVisibleProperties()}}},{key:"computeVisibleProperties",value:function(){for(var t=this,e=Object.keys(this.schema.properties||{}),r=new Set,n=new Set,i=new Set,o=0,a=e;o<a.length;o++){var s,u=a[o],c=this.probeEditor(u);null!==(s=c.options)&&void 0!==s&&s.hidden||"hidden"===c.schema.format?i.add(u):null!=c&&c.dependencyPaths&&0!==c.dependencyPaths.length&&(r.add(u),c.dependencyPaths.forEach((function(t){var r=t.split(".").pop();parent&&e.includes(r)&&n.add(r)})))}var l=Array.from(n).filter((function(t){return!r.has(t)})),h=e.filter((function(e){return t.isRequiredProperty(e)}));if(this.schema.defaultProperties){var p,f=Rn(h);try{for(f.s();!(p=f.n()).done;){var d=p.value;this.schema.defaultProperties.includes(d)||this.schema.defaultProperties.push(d)}}catch(t){f.e(t)}finally{f.f()}}else h.length?this.schema.defaultProperties=h:this.schema.defaultProperties=e;this.lazyProperties=e.filter((function(e){return!(t.schema.defaultProperties.includes(e)||l.includes(e)||r.has(e)||i.has(e))}));var y,m=Rn(l);try{for(m.s();!(y=m.n()).done;){var v=y.value;this.schema.defaultProperties.push(v)}}catch(t){m.e(t)}finally{m.f()}var b,g=Rn(r);try{for(g.s();!(b=g.n()).done;){var w=b.value;this.schema.defaultProperties.push(w)}}catch(t){g.e(t)}finally{g.f()}var O,j=Rn(i);try{for(j.s();!(O=j.n()).done;){var _=O.value;this.schema.defaultProperties.push(_)}}catch(t){j.e(t)}finally{j.f()}for(var k in this.schema.properties)this.propertyHasStartValue(k)&&(this.lazyProperties.includes(k)&&ct(this.lazyProperties,k),this.schema.defaultProperties.includes(k)||this.schema.defaultProperties.push(k));this.schema.defaultProperties=Array.from(new Set(this.schema.defaultProperties)).sort((function(t,r){return e.indexOf(t)-e.indexOf(r)}));var x,E=Rn(this.schema.defaultProperties);try{for(E.s();!(x=E.n()).done;){var S=x.value;this.addObjectProperty(S,{prebuildOnly:!0})}}catch(t){E.e(t)}finally{E.f()}this.lazyProperties=this.lazyProperties.sort((function(t,r){return e.indexOf(t)-e.indexOf(r)}))}},{key:"propertyHasStartValue",value:function(t){var e,r,n,i=null===(e=this.options)||void 0===e?void 0:e.startval;if(!p(i)||!c(i,t))return!1;var o=null!==(r=null!==(n=this.jsoneditor.options.remove_empty_properties)&&void 0!==n?n:this.options.remove_empty_properties)&&void 0!==r&&r,a=i[t];return!o||!this.isEmptyObject(a)}},{key:"editorHasBorder",value:function(){for(var t,e,r=this.parent;r&&lt(r,"activeIndex");)r=r.parent;return!(["booklet","tabs"].includes(null===(t=r)||void 0===t||null===(t=t.layout)||void 0===t?void 0:t.name)||"array"!==(null===(e=this.parent)||void 0===e?void 0:e.schema.type)&&this.jsoneditor.treeWidget)}},{key:"build",value:function(){var t=this;if(this.options.compact&&this.container.classList.add("compact"),this.options.cssClass&&this.container.classList.add(this.options.cssClass),this.options.table_row)this.buildTableRow(),this.editor_holder=this.container;else{if(this.options.table)throw new Error("Not supported yet");if(this.container.classList.add("je-object__container","jsonforms-panel"+(this.editorHasBorder()?"-border":"")),this.options.removable){var e=this.theme.getButton({label:null,icon:"close",flags:[],classes:[]});e.on("click",(function(){var e=t.jsoneditor.editors[t.path];e.parent.restoreLazyProperty(e.key)}));var r=this.theme.getContainer();r.classList.add("jsonforms-remove-object"),this.theme.append(r,e),this.theme.append(this.container,r)}this.getTitle()&&(this.title=this.theme.getHeader(this.getTitle(),2),this.theme.append(this.container,this.title)),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.theme.append(this.container,this.description)),this.error_holder=document.createElement("div"),this.theme.append(this.container,this.error_holder),this.editor_holder=new Cn({editor:this,layout:this.layout,id:this.getValidId(this.translateProperty(this.schema.title)),description:""}),this.theme.append(this.container,this.editor_holder),this.buildEditorsLoop()}if((this.schema.readOnly||this.schema.readonly)&&this.disable(),this.additionalproperties_holder=document.createElement("div"),this.theme.append(this.container,this.additionalproperties_holder),this.canAddProperties()){var n=new kt(this),i=n.buildMetaSchema(),o=i.metaSchema,a=i.targetSchema,s=i.subschemaTitle;if(o){var u=this.theme.getButton({label:s?"new ".concat(s):"new property",icon:"add",flags:[],classes:["jsonforms-addproperty-button"]});u.on("click",(function(){var e;n.addProperty({editor:null!==(e=t.options.originalEditor)&&void 0!==e?e:t,schema:o,startval:{},onAddPropertySave:function(e){var r,i=e.name;return lt(t.schema.properties,i)?"property exists":(!a&&e.type&&((r=n.schemaFromPseudoType(e.type,e.multiple)).title=i),a&&(a.title=i),t.schema.properties[i]=a||r,t.addObjectProperty(i,{removable:!0}),t.refreshValue(),t.layoutEditors(),t.onChange(!0),!0)},hasTargetSchema:p(a)})})),this.theme.append(this.container,u.$element)}else console.warn("no metaschema defined",this.path)}}},{key:"buildAdditionalProperties",value:function(){var t=this,e=this.value||{},r=Object.keys(e).sort().join("|");if(this._lastAdditionalKeys!==r){this._lastAdditionalKeys=r,$(this.additionalproperties_holder).empty(),this.lazyProperties=this.lazyProperties.filter((function(e){return!(e in t.editors)}));var n,i=Rn(this.lazyProperties);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this.addObjectProperty(o,{lazyProperty:!0,prebuildOnly:!0});this.theme.append(this.additionalproperties_holder,a.container)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"buildTableRow",value:function(){this.editor_holder=this.container;for(var t=0,e=Object.entries(this.editors);t<e.length;t++){var r=Nn(e[t],2),n=r[0],i=r[1],o=this.theme.getTableCell();this.theme.append(this.editor_holder,o),i.setContainer(o),i.build(),i.postBuild(),this.editors[n].options.hidden&&this.theme.toggle(o,!1),this.editors[n].options.input_width&&(o.style.width=this.editors[n].options.input_width)}}},{key:"buildEditorsLoop",value:function(){for(var t=this,e=0,r=Object.entries(this.editors);e<r.length;e++){var n=Nn(r[e],2),i=(n[0],n[1]),o=this.theme.getChildEditorHolder();i.setContainer(o),i.build()}setTimeout((function(){p(t.editors)?Object.values(t.editors).forEach((function(t){t.postBuild()})):console.warn("editors have been destroyed",t)}),100)}},{key:"layoutEditors",value:function(){this.options.table_row||this.options.table||(this.layout.name,this.layoutNormal()),this.buildAdditionalProperties()}},{key:"buildStrictGridRows",value:function(){for(var t=[],e=0,r=[],n=0,i=Object.entries(this.editors);n<i.length;n++){var o=Nn(i[n],2),a=o[0],s=o[1];if(this.isActiveProperty(a)){var u=s.options.hidden?0:s.options.grid_columns||s.getNumColumns(),c=s.options.hidden?0:s.options.grid_offset||0,l=!s.options.hidden&&(s.options.grid_break||!1),h=s.options.hidden?0:s.container.offsetHeight;r.push({key:a,width:u,offset:c,height:h}),t[e]=r,l&&(e++,r=[])}}return t}},{key:"buildFlexibleGridRows",value:function(){for(var t=[],e=0,r=Object.entries(this.editors);e<r.length;e++){var n=Nn(r[e],2),i=n[0],o=n[1];if(this.isActiveProperty(i)){for(var a=o.options.hidden?0:o.options.grid_columns||o.getNumColumns(),s=o.options.hidden?0:o.container.offsetHeight,u=!1,c=0;c<t.length;c++){var l=t[c],h=l.width+a<=12,p=!s||.5*l.minh<s&&2*l.maxh>s;h&&p&&(u=c)}!1===u&&(t.push({width:0,minh:999999,maxh:0,editors:[]}),u=t.length-1);var f=t[u];f.editors.push({key:i,width:a,height:s}),f.width+=a,f.minh=Math.min(f.minh,s),f.maxh=Math.max(f.maxh,s)}}return this.normalizeGridRows(t)}},{key:"normalizeGridRows",value:function(t){return t.forEach((function(t){if(t.width<12){var e=!1,r=0;t.editors.forEach((function(n,i){(!1===e||n.width>t.editors[e].width)&&(e=i),n.width=Math.floor(n.width*(12/t.width)),r+=n.width})),r<12&&(t.editors[e].width+=12-r),t.width=12}})),t}},{key:"renderGridRows",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";if(this.layout===JSON.stringify(t))return!1;this.layout=JSON.stringify(t);var n=document.createElement("div");return t.forEach((function(t){var i=e.theme.getGridRow();e.theme.append(n,i),("strict"===r?t:t.editors).forEach((function(t){var r=e.editors[t.key];if(r.options.hidden)e.theme.toggle(r.container,!1);else{var n=t.width,o=t.offset||0;e.theme.setGridColumnSize(r.container,n,o)}e.theme.append(i,r.container)}))})),n}},{key:"layoutNormal",value:function(){for(var t={},e=0,r=Object.entries(this.editors);e<r.length;e++){var n=Nn(r[e],2),i=n[0],o=n[1];this.isActiveProperty(i)&&(o.options.hidden&&this.theme.toggle(o.container,!1),this.jsoneditor.treeManager&&this.jsoneditor.treeManager.editorHasPage(o.path)||(t[i]=o))}this.editor_holder.replaceItems(t)}},{key:"isActiveProperty",value:function(t){return t in this.editors}},{key:"isRequiredProperty",value:function(t){if(t in this.cached_editors){var e=this.cached_editors[t];return this.isRequiredObject(e)}return!(!this.schema.required||!Array.isArray(this.schema.required))&&this.schema.required.includes(t)}},{key:"hasNonRequiredProperties",value:function(){for(var t in this.schema.properties)if(!this.isRequiredProperty(t))return!0;return!1}},{key:"hasRequiredProperties",value:function(){for(var t in this.schema.properties)if(this.isRequiredProperty(t))return!0;return!1}},{key:"getPropertySchema",value:function(t,e){var r=this.schema||{},n=r.properties||{},i=r.patternProperties,o=r.additionalProperties,s=n[t]?a({},n[t]):{};!s.type&&e&&(Array.isArray(e)?s.type=1===e.length?e[0]:e:s.type=e);var u=!!n[t];if(i)for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&new RegExp(c).test(t)&&(s.allOf||(s.allOf=[]),s.allOf.push(i[c]),u=!0);return!u&&o&&"object"===Ln(o)&&(s=a({},o)),s}},{key:"addLazyProperty",value:function(t){ct(this.lazyProperties,t),this.addObjectProperty(t,{removable:!0,userDefined:!0});var e=this.cached_editors[t];this.jsoneditor.treeManager&&this.jsoneditor.treeManager.handleEvent("objectAdded",e),this.refreshValue(),this.layoutEditors(),this.onChange(!0)}},{key:"restoreLazyProperty",value:function(t){lt(this.editors,t)&&(this.removeObjectProperty(t),delete this.cached_editors[t],this.originalProperties.includes(t)?this.lazyProperties.push(t):delete this.schema.properties[t],this._lastAdditionalKeys=null,this.refreshValue(),this.layoutEditors(),this.onChange(!0),this.jsoneditor.treeManager&&this.jsoneditor.treeManager.handleEvent("restoreLazyProperty",this,t))}},{key:"removeObjectProperty",value:function(t){this.editors[t]&&(this.editors[t].unregister(),delete this.editors[t],this.refreshValue())}},{key:"getSchemaOnMaxDepth",value:function(t){return Object.keys(t).reduce((function(e,r){switch(r){case"$ref":return e;case"properties":case"items":return An(An({},e),{},In({},r,{}));case"additionalProperties":case"propertyNames":return An(An({},e),{},In({},r,!0));default:return An(An({},e),{},In({},r,t[r]))}}),{})}},{key:"probeEditor",value:function(t){var e=this.getPropertySchema(t,null);e={type:"null",format:e.format,options:e.options};var r=this.jsoneditor.getEditorClass(e),n=r.classname,i=r.editorClass,o={jsoneditor:this.jsoneditor,schema:e,path:"".concat(this.path,".").concat(t),pathNoIndex:"".concat(this.pathNoIndex,".").concat(t),parent:this,classname:n,ignore:!0};return this.jsoneditor.createEditor(i,o,this.currentDepth+1)}},{key:"addObjectProperty",value:function(t,e){if(e=e||{},!this.editors[t]){var r=!0===e.prebuildOnly,n=!0===e.lazyProperty,i=!0===e.removable;if(this.cached_editors[t])return this.editors[t]=this.cached_editors[t],void(r||this.editors[t].register());if(!this.canAddProperty(t))return console.log("warning, cannot add property ".concat(t," in ").concat(this.path)),void console.log("this.schema",this.schema);var o=this.getPropertySchema(t,null),a=this.options.startval&&c(this.options.startval,t)?this.options.startval[t]:void 0;this.isMetaSchema&&p(a)&&(this.path,m=this.schema,!(!(v=m)||"object"!==rt(v)||v.type&&"object"!==v.type||!0!==v.additionalProperties&&"object"!==rt(v.additionalProperties)&&!(v.patternProperties&&Object.keys(v.patternProperties).length>0)))&&(a.name=t),o=this.adjustSchemaForDepth(o),a&&this.jsoneditor.validator._validateSchema(o,a).length&&(a=void 0),n&&(o={title:o.title,format:"lazyButton",type:"null",propertySchema:o,options:o.options});var s=this.jsoneditor.getEditorClass(o),u=s.classname,l=s.editorClass,h={jsoneditor:this.jsoneditor,schema:o,path:"".concat(this.path,".").concat(t),pathNoIndex:"".concat(this.pathNoIndex,".").concat(t),parent:this,startval:a,removable:i,classname:u,ignore:n},f=this.jsoneditor.createEditor(l,h,this.currentDepth+1);if(f.preBuild(),!r){var d=this.theme.getChildEditorHolder();f.setContainer(d),f.build(),f.postBuild(),f.activate()}if(n){var y=this.theme.getLazyButtonHolder();return f.setContainer(y),f.build(),f}return this.editors[t]=f,this.cached_editors[t]=f,f}var m,v;this.cached_editors[t]=this.editors[t]}},{key:"canAddProperty",value:function(t){return!!this.canHaveAdditionalProperties()||!!lt(this.schema.properties,t)||!!this.schema.patternProperties&&Object.keys(this.schema.patternProperties).some((function(e){return new RegExp(e).test(t)}))}},{key:"adjustSchemaForDepth",value:function(t){var e=this.jsoneditor.options.max_depth;return e&&this.currentDepth>=e?this.getSchemaOnMaxDepth(t):t}},{key:"onChildEditorChange",value:function(t,r){this.refreshValue(),Wn(zn(e.prototype),"onChildEditorChange",this).call(this,t,r)}},{key:"canHaveAdditionalProperties",value:function(){return"object"===Ln(this.schema.patternProperties)&&null!==this.schema.patternProperties||("boolean"==typeof this.schema.additionalProperties?this.schema.additionalProperties:"object"===Ln(this.schema.additionalProperties)&&null!==this.schema.additionalProperties||!this.hasProperties())}},{key:"hasProperties",value:function(){return"properties"in this.schema&&Object.keys(this.schema.properties).length>0}},{key:"isEmptyObject",value:function(t){return void 0===t||""===t||Array.isArray(t)&&0===t.length||t.constructor===Object&&0===Object.keys(t).length}},{key:"getValue",value:function(){var t=this;if(this.dependenciesFulfilled){var r=Wn(zn(e.prototype),"getValue",this).call(this);if(!r)return r;var n=this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties;return r&&n&&Object.keys(r).forEach((function(e){t.isEmptyObject(r[e])&&delete r[e]})),(this.jsoneditor.options.remove_false_properties||this.options.remove_false_properties)&&Object.keys(r).forEach((function(t){!1===r[t]&&delete r[t]})),r}}},{key:"refreshValue",value:function(){if(this.value={},this.editors){for(var t=0,e=Object.keys(this.editors);t<e.length;t++){var r=e[t];this.editors[r].isActive()&&(this.editors[r].refreshValue(),this.value[r]=this.editors[r].getValue())}for(var n=0,i=Object.keys(this.editors);n<i.length;n++){var o=i[n];this.editors[o].isActive()&&this.activateDependentRequired(this.editors[o].key)}}}},{key:"activateDependentRequired",value:function(t){var e,r=this,n=Rn(this.getDependentRequired(t));try{var i=function(){var t=e.value,n=Object.values(r.cached_editors).find((function(e){return e.key===t}));n&&!n.isActive()&&n.activate()};for(n.s();!(e=n.n()).done;)i()}catch(t){n.e(t)}finally{n.f()}}},{key:"getDependentRequired",value:function(t){return this.schema.dependentRequired&&c(this.schema.dependentRequired,t)?this.schema.dependentRequired[t]:[]}},{key:"canAddProperties",value:function(){return!!this.canHaveAdditionalProperties()&&(void 0===this.schema.maxProperties||Object.keys(this.editors).length<this.schema.maxProperties)}},{key:"isRequiredObject",value:function(t){return!!t&&("boolean"==typeof t.schema.required?t.schema.required:!!Array.isArray(this.schema.required)&&this.schema.required.includes(t.key))}},{key:"setValue",value:function(t,e){var r,n;("object"!==Ln(t=this.applyConstFilter(t)||{})||Array.isArray(t))&&(t={});for(var i=0,o=Object.entries(this.editors);i<o.length;i++){var a=Nn(o[i],2),s=a[0],u=a[1],c=this.isRequiredObject(u);void 0!==t[s]?(this.addObjectProperty(s),u.setValue(t[s],e),u.activate(),this.disabled&&u.disable()):e||c?u.setValue(u.getDefault(),e):this.removeObjectProperty(s)}var l=null!==(r=null!==(n=this.jsoneditor.options.remove_empty_properties)&&void 0!==n?n:this.options.remove_empty_properties)&&void 0!==r&&r;for(var h in t)if((!l||!this.isEmptyObject(t[h]))&&!this.editors[h]&&(this.addObjectProperty(h),this.editors[h])){var p=!!this.editors[h].template;this.editors[h].setValue(t[h],e,p)}this.refreshValue(),this.layoutEditors(),this.onChange()}},{key:"showValidationErrors",value:function(t){var e,r=this,n=[],i=[],o=Rn(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;a.path===this.path?n.push(a):i.push(a)}}catch(t){o.e(t)}finally{o.f()}n.length>1&&(n=n.filter((function(t){return"oneOf"!==t.property}))),this.error_holder&&(n.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",n.forEach((function(t){var e=t.errorcount&&t.errorcount>1?"".concat(t.message," (").concat(t.errorcount," errors)"):t.message;r.error_holder.appendChild(r.theme.getErrorMessage(e))}))):this.error_holder.style.display="none"),this.options.table_row&&(n.length?this.theme.addTableRowError:this.theme.removeTableRowError).call(this.theme,this.container);for(var s=0,u=Object.values(this.editors);s<u.length;s++)u[s].showValidationErrors(i)}},{key:"destroy",value:function(){Object.values(this.cached_editors||[]).forEach((function(t){return t.destroy()})),this.editor_holder&&$(this.editor_holder).empty(),this.title&&$(this.title).remove(),this.error_holder&&$(this.error_holder).remove(),this.editors=null,this.cached_editors=null,this.editor_holder&&$(this.editor_holder).remove(),this.editor_holder=null,Wn(zn(e.prototype),"destroy",this).call(this)}}],n&&Dn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Un(t){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(t)}function Gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jn(n.key),n)}}function Jn(t){var e=function(t,e){if("object"!=Un(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Un(e)?e:e+""}function Zn(t,e,r){return e=Xn(e),function(t,e){if(e&&("object"===Un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yn()?Reflect.construct(e,r||[],Xn(t).constructor):e.apply(t,r))}function Yn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yn=function(){return!!t})()}function Kn(){return Kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xn(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Kn.apply(this,arguments)}function Xn(t){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xn(t)}function Qn(t,e){return Qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qn(t,e)}qn.rules={".je-object__title":"display:inline-block",".je-object__controls":"margin:0%200%200%2010px",".je-object__container":"position:relative",".je-object__property-checkbox":"margin:0;height:auto",".property-selector":"width:295px;max-height:160px;padding:5px%200;overflow-y:auto;overflow-x:hidden;padding-left:5px",".property-selector-input":"width:220px;margin-bottom:0;display:inline-block",".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-edit-json--textarea":"height:170px;width:300px;display:block",".workflows-trigger-entity":"position:relative;word-wrap:break-word;background-color:%23e9e9ee;margin:1.16%25;width:31%25;border-radius:5px;padding:16px",".workflows-trigger-entity.trigger-edit:hover":"background-color:%23dbdbe3",".workflows-trigger-entity.trigger-inactive .trigger-name":"color:grey",".workflows-trigger-entity .trigger-actions":"position:absolute;top:0;padding:14px;right:0",".workflows-trigger-entity .trigger-name":"font-weight:bold;line-height:1.5;padding:5px%205px%200%205px;font-size:1.2rem;display:block",".workflows-trigger-entity.trigger-edit .trigger-name":"max-width:72%25",".workflows-trigger-entity .trigger-type-label":"padding-left:5px",".workflows-trigger-entity .trigger-type-desc":"padding-left:5px;color:%23474747;font-size:0.8rem"};var ti=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Zn(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qn(t,e)}(e,t),r=e,(n=[{key:"addObjectProperty",value:function(t,e,r){if(!this.editors[t]){if(this.cached_editors[t])return this.editors[t]=this.cached_editors[t],void(r||this.editors[t].register());if(this.canAddProperty(t)){var n=this.getPropertySchema(t,e),i=this.jsoneditor.getEditorClass(n),o=i.classname,a=i.editorClass,s={jsoneditor:this.jsoneditor,schema:this.adjustSchemaForDepth(n),path:"".concat(this.path,".").concat(t),pathNoIndex:"".concat(this.pathNoIndex,".").concat(t),parent:this,classname:o};if(this.editors[t]=this.jsoneditor.createEditor(a,s,this.currentDepth+1),this.editors[t].preBuild(),!r){var u=this.theme.getChildEditorHolder(),c=this.editors[t];c.setContainer(u),c.build(),c.postBuild(),c.activate()}this.cached_editors[t]=this.editors[t]}}}},{key:"getEditor",value:function(t){var e=this.schema;e.format="normal";var r=this.getValue(),n=this.jsoneditor.getEditorClass(this.schema),i=n.classname,o=n.editorClass;this.editor=this.jsoneditor.createEditor(o,{jsoneditor:this.jsoneditor,schema:e,path:this.path,pathNoIndex:this.pathNoIndex,parent:this.parent,container:t,classname:i},this.currentDepth),this.editor.preBuild(),this.editor.build(),this.editor.postBuild(),this.editor.setValue(r,!0)}},{key:"build",value:function(){Kn(Xn(e.prototype),"build",this).call(this)}},{key:"enable",value:function(){}},{key:"disable",value:function(t){}},{key:"destroy",value:function(){Kn(Xn(e.prototype),"destroy",this).call(this)}},{key:"getNumColumns",value:function(){return 2}}])&&Gn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(qn);function ei(t){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ei(t)}function ri(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ni(n.key),n)}}function ni(t){var e=function(t,e){if("object"!=ei(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ei(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ei(e)?e:e+""}function ii(t,e,r){return e=si(e),function(t,e){if(e&&("object"===ei(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oi()?Reflect.construct(e,r||[],si(t).constructor):e.apply(t,r))}function oi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oi=function(){return!!t})()}function ai(){return ai="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=si(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},ai.apply(this,arguments)}function si(t){return si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},si(t)}function ui(t,e){return ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ui(t,e)}var ci=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ii(this,e,[t,r])).currentDepth=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ui(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){this.table=this.theme.getTable(),this.theme.append(this.container,this.table),new Ot({el:this.table,rows:[{a:1,b:2},{a:1,b:2}],callbacks:{edit:function(){},delete:function(){}}}),this.refreshValue()}},{key:"enable",value:function(){}},{key:"disable",value:function(t){}},{key:"destroy",value:function(){ai(si(e.prototype),"destroy",this).call(this)}},{key:"getNumColumns",value:function(){return 2}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(){}}])&&ri(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function li(t){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(t)}function hi(t){return function(t){if(Array.isArray(t))return fi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||pi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(t,e){if(t){if("string"==typeof t)return fi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fi(t,e):void 0}}function fi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function di(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yi(n.key),n)}}function yi(t){var e=function(t,e){if("object"!=li(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==li(e)?e:e+""}function mi(t,e,r){return e=gi(e),function(t,e){if(e&&("object"===li(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vi()?Reflect.construct(e,r||[],gi(t).constructor):e.apply(t,r))}function vi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vi=function(){return!!t})()}function bi(){return bi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gi(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},bi.apply(this,arguments)}function gi(t){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gi(t)}function wi(t,e){return wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wi(t,e)}r(6033);var Oi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mi(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wi(t,e)}(e,t),r=e,n=[{key:"isLeaf",value:function(t){return!t.properties||0===Object.keys(t.properties).length}},{key:"extractNode",value:function(t,e){var r=this;if(!t||!t.properties)return[];var n=new Map;return Object.entries(t.properties).forEach((function(t){var i,o,a=(o=2,function(t){if(Array.isArray(t))return t}(i=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(i,o)||pi(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],u=a[1],c=!u.properties,l=[];c||(l=r.extractNode(u,e)),u.layout===e||c&&"column"===e?n.has(s)||n.set(s,{id:s,label:s,children:l,schema:u}):l.length&&l.forEach((function(t){n.has(t.id)||n.set(t.id,t)}))})),Array.from(n.values())}},{key:"countLeafs",value:function(t){var e=this;return t&&0!==t.length?t.reduce((function(t,r){return r.children&&r.children.length?t+e.countLeafs(r.children):t+1}),0):0}},{key:"getColumnDepth",value:function(t){var e=this;return t&&0!==t.length?1+Math.max.apply(Math,hi(t.map((function(t){return e.getColumnDepth(t.children||[])})))):0}},{key:"getColumnLeafPaths",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[];return t&&t.length?(t.forEach((function(t){var o,a=[].concat(hi(r),[t.id]),s=t.schema;!s&&null!=n&&null!==(o=n.properties)&&void 0!==o&&o[t.id]&&(s=n.properties[t.id]);var u=Array.isArray(null==n?void 0:n.required)&&n.required.includes(t.id);t.children&&t.children.length?i.push.apply(i,hi(e.getColumnLeafPaths(t.children,a,s||n))):i.push({path:a,schema:s||{},isRequired:u})})),i):i}},{key:"buildColumnHeaderRows",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t&&0!==t.length&&(n[r]||(n[r]=this.table.insertRow()),t.forEach((function(t){var i=e.theme.getTableHeader();i.textContent=t.label,i.classList.add("jsonforms-survey-header-cell");var o=e.countLeafs(t.children||[]);i.colSpan=o||1;var a=t.children&&0!==t.children.length?1:e.getColumnDepth(e.columnsTree)-r;i.rowSpan=a,e.theme.append(n[r],i),t.children&&t.children.length&&e.buildColumnHeaderRows(t.children,r+1,n,!1)})),i&&n[0].cells.length)){var o=this.theme.getTableHeader();o.classList.add("jsonforms-survey-header-cell-span"),o.rowSpan=this.getColumnDepth(this.columnsTree),o.colSpan=this.getColumnDepth(this.rowsTree),this.theme.prepend(n[0],o)}}},{key:"getSchemaInputOptions",value:function(t){return t.options&&t.options.input?a({name:null,config:{}},t.options.input):{name:null,config:{}}}},{key:"renderInputs",value:function(t,e){var r=this;this.columnLeafPaths.forEach((function(n){var i=n.path,o=n.schema,a=n.isRequired,s=r.theme.insertTableCell(t);s.classList.add("jsonforms-survey-leaf-cell");var u={isRequired:function(){return a},inputOptions:r.getSchemaInputOptions(o)},c=o.type||"text";["button","checkbox","color","date","datetime","date-time","datetime-local","email","file","hidden","image","month","number","password","radio","reset","search","submit","tel","text","time","url","uri","week"].includes(o.format)&&(c=o.format);var l=r.theme.getFormInputField(c,u);l.setAttribute("data-rowPath",e.join(".")),l.setAttribute("data-colPath",i.join(".")),r.inputs.push(l),l.on("change",(function(t){r.setValue(),r.onChange(!0)})),r.theme.append(s,l)}))}},{key:"renderRows",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.rowsTree.forEach((function(r){var n=t.countLeafs([r]);if(r.children&&r.children.length){var i=[],o=function t(e,r){e.children&&0!==e.children.length?e.children.forEach((function(n){return t(n,[].concat(hi(r),[e.id]))})):i.push({node:e,path:r})};r.children.forEach((function(t){return o(t,[r.id])})),i.forEach((function(i,o){var a=i.node,s=i.path,u=t.table.insertRow();if(0===o){var c=t.theme.insertTableCell(u);c.classList.add("jsonforms-survey-row-header"),c.textContent=r.label,c.rowSpan=n}var l=t.theme.insertTableCell(u);l.classList.add("jsonforms-survey-row-header"),l.textContent=a.label,t.renderInputs(u,[].concat(hi(e),hi(s),[a.id]))}))}else{var a=t.theme.insertTableRow(t.table),s=t.theme.insertTableCell(a);s.classList.add("jsonforms-survey-leaf-cell"),s.textContent=r.label,s.rowSpan=n,t.renderInputs(a,[].concat(hi(e),[r.id]))}}))}},{key:"renderTable",value:function(t){this.table=this.theme.getTable(),this.table.classList.add("jsonforms-survey-table"),this.rowsTree=this.extractNode(t,"row"),this.columnsTree=this.extractNode(t,"column"),this.buildColumnHeaderRows(this.columnsTree),this.columnLeafPaths=this.getColumnLeafPaths(this.columnsTree,[],this.schema),this.renderRows()}},{key:"reconstructTreeFromInputs",value:function(){var t=this.inputs,e={};return t.forEach((function(t){var r=t.getAttribute("data-rowPath").split("."),n=t.getAttribute("data-colPath").split("."),i=e;r.forEach((function(t,e){i[t]||(i[t]={}),i=i[t]})),n.forEach((function(e,r){r===n.length-1?i[e]=t.getValue():(i[e]||(i[e]={}),i=i[e])}))})),e}},{key:"setValue",value:function(){var t=this.reconstructTreeFromInputs();this.value=t}},{key:"preBuild",value:function(){this.inputs=[]}},{key:"build",value:function(){var t=ht(this.jsoneditor.expandSchema,this.schema);this.renderTable(t),this.theme.append(this.container,this.table)}},{key:"destroy",value:function(){bi(gi(e.prototype),"destroy",this).call(this)}},{key:"getNumColumns",value:function(){return 2}}],n&&di(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function ji(t){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(t)}function _i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ki(n.key),n)}}function ki(t){var e=function(t,e){if("object"!=ji(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ji(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ji(e)?e:e+""}function xi(t,e,r){return e=Pi(e),function(t,e){if(e&&("object"===ji(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ei()?Reflect.construct(e,r||[],Pi(t).constructor):e.apply(t,r))}function Ei(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ei=function(){return!!t})()}function Si(){return Si="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pi(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Si.apply(this,arguments)}function Pi(t){return Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pi(t)}function Ci(t,e){return Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ci(t,e)}var Ti=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xi(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ci(t,e)}(e,t),r=e,(n=[{key:"register",value:function(){Si(Pi(e.prototype),"register",this).call(this),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}},{key:"unregister",value:function(){Si(Pi(e.prototype),"unregister",this).call(this),this.input&&this.input.removeAttribute("name")}},{key:"build",value:function(){var t=this;Si(Pi(e.prototype),"build",this).call(this),this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.input=this.theme.getFormInputField(this.schema.type,this),this.input.isToggle?this.input.on("toggled",(function(e){t.value=e,t.onChange(!0)})):this.input.on("change",(function(e){console.log("toggled",e),t.value=e,t.onChange(!0)})),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this),this.theme.append(this.container,this.control)}},{key:"getNumColumns",value:function(){return 2}},{key:"typecast",value:function(t){return"undefined"===t||void 0===t?void 0:!!t}},{key:"getValue",value:function(){if(this.dependenciesFulfilled)return this.typecast(this.value)}},{key:"setValue",value:function(t,e){void 0!==t&&(this.value=this.typecast(t),e||(this.is_dirty=!0),this.input.setValue(this.value),this.onChange(!e))}}])&&_i(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Ai(t){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(t)}function Ii(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Li(n.key),n)}}function Li(t){var e=function(t,e){if("object"!=Ai(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ai(e)?e:e+""}function Ri(t,e,r){return e=Bi(e),function(t,e){if(e&&("object"===Ai(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ni()?Reflect.construct(e,r||[],Bi(t).constructor):e.apply(t,r))}function Ni(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ni=function(){return!!t})()}function Bi(t){return Bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bi(t)}function Fi(t,e){return Fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fi(t,e)}var Di=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ri(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fi(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){this.container}},{key:"getValue",value:function(){if(this.dependenciesFulfilled)return null}},{key:"setValue",value:function(){this.onChange()}},{key:"getNumColumns",value:function(){return 2}}])&&Ii(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I);function Vi(){Vi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new T(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",m={};function v(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(A([])));j&&j!==r&&n.call(j,a)&&(w=j);var _=g.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==qi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=p;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var c=h(e,r,n);if("normal"===c.type){if(i=n.done?y:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(qi(e)+" is not iterable")}return b.prototype=g,i(_,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},k(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new x(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function $i(t){return function(t){if(Array.isArray(t))return zi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Wi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Wi(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Wi(t,e){if(t){if("string"==typeof t)return zi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zi(t,e):void 0}}function zi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hi(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function qi(t){return qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qi(t)}function Ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gi(n.key),n)}}function Gi(t){var e=function(t,e){if("object"!=qi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qi(e)?e:e+""}function Ji(t,e,r){return e=Ki(e),function(t,e){if(e&&("object"===qi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zi()?Reflect.construct(e,r||[],Ki(t).constructor):e.apply(t,r))}function Zi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zi=function(){return!!t})()}function Yi(){return Yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ki(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Yi.apply(this,arguments)}function Ki(t){return Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ki(t)}function Xi(t,e){return Xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xi(t,e)}r(761);var Qi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ji(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xi(t,e)}(e,t),r=e,n=[{key:"register",value:function(){Yi(Ki(e.prototype),"register",this).call(this),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}},{key:"unregister",value:function(){Yi(Ki(e.prototype),"unregister",this).call(this),this.input&&this.input.removeAttribute("name")}},{key:"getNumColumns",value:function(){if(!this.enum_options)return 3;for(var t=this.getTitle().length,e=0;e<this.enum_options.length;e++)t=Math.max(t,this.enum_options[e].length+4);return Math.min(12,Math.max(t/7,2))}},{key:"typecast",value:function(t){var e=this.schema,r=e.type,n=e.enum;if(void 0!==t)switch(r){case"boolean":return"false"!==t&&0!==t&&"0"!==t&&Boolean(t);case"number":var i=Number(t);return Number.isFinite(i)?i:0;case"integer":var o=Number(t);return Number.isFinite(o)?Math.trunc(o):0;default:return n?t:String(t)}}},{key:"getValue",value:function(){if(this.dependenciesFulfilled)return this.typecast(this.value)}},{key:"setValue",value:function(t,e){t=this.applyConstFilter(t);var r=this.typecast(t);this.value!==r&&(this.input.setValue(r),this.value=r,e||(this.is_dirty=!0),this.onChange(!0))}},{key:"preBuild",value:function(){var t,e,r;if(this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[],null!==(t=this.schema)&&void 0!==t&&null!==(t=t.options)&&void 0!==t&&t.has_placeholder_option&&!this.schema.default&&(this.schema.default=""),this.enforceConst&&void 0!==this.schema.const)this.initConstEnum(this.schema.const);else if(this.schema.enum)this.initStaticEnum(this.schema.enum,null!==(e=null===(r=this.schema.options)||void 0===r?void 0:r.enum_titles)&&void 0!==e?e:[]);else if("boolean"!==this.schema.type){if(!this.schema.enumSource)throw new Error("'select' editor requires the enum property to be set.");this.initDynamicEnumSource()}else this.initBooleanEnum()}},{key:"initConstEnum",value:function(t){this.enum_options=["".concat(t)],this.enum_display=["".concat(this.translateProperty(t)||t)],this.enum_values=[this.typecast(t)]}},{key:"initStaticEnum",value:function(t,e){var r=this;t.forEach((function(t,n){r.enum_options[n]="".concat(t),r.enum_display[n]="".concat(r.translateProperty(e[n])||t),r.enum_values[n]=r.typecast(t)}))}},{key:"initBooleanEnum",value:function(){var t,e;this.enum_display=null!==(t=null===(e=this.schema.options)||void 0===e?void 0:e.enum_titles)&&void 0!==t?t:["true","false"],this.enum_options=["1",""],this.enum_values=[!0,!1],this.isRequired()||(this.enum_display.unshift(" "),this.enum_options.unshift("undefined"),this.enum_values.unshift(void 0))}},{key:"initDynamicEnumSource",value:function(){var t=this;this.enumSource=this.normalizeEnumSource(this.schema.enumSource),this.enum_options=[],this.enum_display=[],this.enum_values=[],this.enumSource=this.enumSource.map((function(e){return t.prepareEnumSourceCallbacks(e)}))}},{key:"normalizeEnumSource",value:function(t){return Array.isArray(t)?t.map((function(t){return"string"==typeof t||"function"==typeof t?{source:t}:Array.isArray(t)?t:a({},t)})):[this.schema.enumValue?{source:t,value:this.schema.enumValue}:{source:t}]}},{key:"prepareEnumSourceCallbacks",value:function(t){var e=this,r=function(t){var r=e.expandCallbacks("template",{template:t});return"function"==typeof r.template?r.template:e.jsoneditor.compileTemplate(r.template,e.template_engine)};return t.source&&(t.source=r(t.source)),t.value&&(t.value=r(t.value)),t.title&&(t.title=r(t.title)),t.filter&&(t.filter=r(t.filter)),t}},{key:"setDefaultOption",value:function(t){this.enum_values.length&&(""!==this.schema.default&&null!==this.schema.default||(void 0!==this.enum_values[0]||t)&&(this.enum_display.unshift(" "),this.enum_options.unshift(""),this.enum_values.unshift(void 0)))}},{key:"build",value:function(){var t=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.setDefaultOption(),this.input=this.theme.getSelectInput([],this.inputOptions),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.setDisabled(!0)),this.setInputAttributes([]),this.input.on("change",(function(e,r){t.onInputChange()})),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this),this.theme.append(this.container,this.control)}},{key:"afterInputReady",value:function(){this.theme.afterInputReady(this.input)}},{key:"onInputChange",value:function(){var t=this.typecast(this.input.getValue());t!==this.value&&(this.is_dirty=!0,this.value=t,this.onChange(!0))}},{key:"resolveEnumItems",value:function(t,e,r){if(null==t)return null;if("string"==typeof t){var n=null==e?void 0:e[t];if(Array.isArray(n))return n;if(n&&"object"===qi(n))for(var i=0,o=["items","results","rows","data","values","list"];i<o.length;i++){var a=o[i];if(Array.isArray(n[a]))return n[a]}return null}if("object"===qi(t))for(var s=0,u=["items","results","rows","data","values","list"];s<u.length;s++){var c=u[s];if(Array.isArray(t[c]))return t[c]}return null}},{key:"setOptions",value:function(t){var e,r,n=this.value;if(p(t)?(e=Object.keys(t),r=Object.values(t)):e=r=t,this.enum_options=e,this.enum_display=r,this.enum_values=e.slice(),this.setDefaultOption(!0),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),this.enum_options.includes(n))this.input.setValue(n),this.value=n;else{var i=this.typecast(this.enum_values[0]||"");this.setValue(i)}}},{key:"onWatchedFieldChange",value:(i=Vi().mark((function t(){var r,n,i,o,a,s,u=this;return Vi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.enumSource){t.next=3;break}return Yi(Ki(e.prototype),"onWatchedFieldChange",this).call(this),t.abrupt("return");case 3:r=this.getWatchedFieldValues(),n=[],i=[],o=Mi(this.enumSource),t.prev=7,s=Vi().mark((function t(){var e,o,s,c,l,h,f,d,y;return Vi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.value,!Array.isArray(e)){t.next=5;break}return n.push.apply(n,$i(e)),i.push.apply(i,$i(e)),t.abrupt("return",0);case 5:if("function"!=typeof e.source){t.next=20;break}if("function"!=typeof(s=e.source({editor:u,watched:r}))){t.next=13;break}return t.next=10,s();case 10:t.t0=t.sent,t.next=16;break;case 13:return t.next=15,s;case 15:t.t0=t.sent;case 16:p(o=t.t0)&&dt(o)&&(c=Object.entries(o),o=c.map((function(t){var e,r,n=(r=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,r)||Wi(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{value:n[0],title:n[1]}})),e.value||(e.value=function(t){return t.i,t.item.value}),e.title||(e.title=function(t){return t.i,t.item.title})),t.next=21;break;case 20:o=Array.isArray(e.source)?e.source:r[e.source];case 21:if(Array.isArray(o)||(o=u.resolveEnumItems(o,r,e)),Array.isArray(o)){t.next=25;break}return console.warn("enumSource.source did not return an array",o),t.abrupt("return",0);case 25:e.slice&&(o=(l=o).slice.apply(l,$i(e.slice))),e.filter&&(o=o.filter((function(t,n){return e.filter({i:n,item:t,watched:r})}))),h=o.map((function(t,n){if(e.value){var i=e.value({i:n,item:t,watched:r});return void 0!==i?u.typecast(i):t}return t})),f=o.map((function(t,n){var i=null!==t&&"object"===qi(t)?new Proxy(t,{get:function(t,e){return e in t?t[e]:""}}):t;if(e.title){var o=e.title({i:n,item:i,watched:r});return void 0!==o?o:h[n]}return i&&"object"===qi(i)&&"title"in i?i.title:h[n]})),e.sort?(d="desc"===e.sort?1:-1,y=h.map((function(t,e){return{v:t,t:f[e]}})).sort((function(t,e){return t.v<e.v?-d:t.v>e.v?d:0})),n.push.apply(n,$i(y.map((function(t){return t.v})))),i.push.apply(i,$i(y.map((function(t){return t.t}))))):(n.push.apply(n,$i(h)),i.push.apply(i,$i(f)));case 30:case"end":return t.stop()}}),t)})),o.s();case 10:if((a=o.n()).done){t.next=17;break}return t.delegateYield(s(),"t0",12);case 12:if(0!==t.t0){t.next=15;break}return t.abrupt("continue",15);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(7),o.e(t.t1);case 22:return t.prev=22,o.f(),t.finish(22);case 25:this.setOptions(Object.fromEntries(n.map((function(t,e){return[t,i[e]]})))),Yi(Ki(e.prototype),"onWatchedFieldChange",this).call(this);case 27:case"end":return t.stop()}}),t,this,[[7,19,22,25]])})),o=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){Hi(o,r,n,a,s,"next",t)}function s(t){Hi(o,r,n,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"enable",value:function(){this.always_disabled||(this.input.setDisabled(!1),Yi(Ki(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.input.setDisabled(!0),Yi(Ki(e.prototype),"disable",this).call(this,t)}},{key:"destroy",value:function(){$(this.label).remove(),$(this.input).remove(),Yi(Ki(e.prototype),"destroy",this).call(this)}},{key:"showValidationErrors",value:function(t){var e=this,r=this.jsoneditor.options.show_errors,n="change"===r||"interaction"===r;if(("never"!==r||this.is_dirty)&&(!n||this.is_dirty)){var i=t.reduce((function(t,r){return r.path===e.path&&t.push(r.message),t}),[]);i.length?this.theme.addFieldError(this.control,"".concat(i.join(". "),".")):this.theme.addFieldError(this.control)}}}],n&&Ui(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i,o}(I);function to(t){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},to(t)}function eo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ro(n.key),n)}}function ro(t){var e=function(t,e){if("object"!=to(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=to(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==to(e)?e:e+""}function no(t,e,r){return e=ao(e),function(t,e){if(e&&("object"===to(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,io()?Reflect.construct(e,r||[],ao(t).constructor):e.apply(t,r))}function io(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(io=function(){return!!t})()}function oo(){return oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ao(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},oo.apply(this,arguments)}function ao(t){return ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ao(t)}function so(t,e){return so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},so(t,e)}var uo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),no(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&so(t,e)}(e,t),r=e,(n=[{key:"preBuild",value:function(){oo(ao(e.prototype),"preBuild",this).call(this)}},{key:"build",value:function(){var t=this;this.label="",this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.radioContainer=document.createElement("div"),this.radioGroup=[];for(var e=function(e){t.setValue(e.currentTarget.value),t.onChange(!0),t.radioGroup.forEach((function(e){e.checked=e.value===t.getValue()}))},r=0;r<this.enum_values.length;r++){var n={id:"".concat(this.formname,"[").concat(r,"]"),value:this.enum_values[r]};this.jsoneditor.options.use_name_attributes&&(n.name=this.formname),this.input=this.theme.getFormRadio(n),this.setInputAttributes(["id","value","name"]),this.input.addEventListener("change",e,!1),this.radioGroup.push(this.input);var i=this.theme.getFormRadioLabel(this.enum_display[r]);i.htmlFor=this.input.id;var o=this.theme.getFormRadioControl(i,this.input,!("horizontal"!==this.options.layout&&!this.options.compact));this.radioContainer.appendChild(o)}if(this.schema.readOnly||this.schema.readonly){this.disable(!0);for(var a=0;a<this.radioGroup.length;a++)this.radioGroup[a].disabled=!0;this.radioContainer.classList.add("readonly")}var s=this.theme.getContainer();s.appendChild(this.radioContainer),s.dataset.containerFor="radio",this.input=s,this.control=this.theme.getFormControl(this.label,s,this.description,this.infoButton,this),this.container.appendChild(this.control),window.requestAnimationFrame((function(){t.input.parentNode&&t.afterInputReady()}))}},{key:"enable",value:function(){if(!this.always_disabled){for(var t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!1;this.radioContainer.classList.remove("readonly"),oo(ao(e.prototype),"enable",this).call(this)}}},{key:"disable",value:function(t){t&&(this.always_disabled=!0);for(var r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.radioContainer.classList.add("readonly"),oo(ao(e.prototype),"disable",this).call(this)}},{key:"destroy",value:function(){this.radioContainer.parentNode&&this.radioContainer.parentNode.parentNode&&this.radioContainer.parentNode.parentNode.removeChild(this.radioContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),oo(ao(e.prototype),"destroy",this).call(this)}},{key:"getNumColumns",value:function(){return 2}},{key:"setValue",value:function(t){"string"!=typeof(t=this.applyConstFilter(t))&&(t=String(t));for(var e=0;e<this.radioGroup.length;e++){if(this.radioGroup[e].value===t){this.radioGroup[e].checked=!0;break}this.radioGroup[e].checked=!1}this.value=t,this.onChange()}}])&&eo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Qi);function co(t){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(t)}function lo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ho(n.key),n)}}function ho(t){var e=function(t,e){if("object"!=co(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==co(e)?e:e+""}function po(t,e,r){return e=mo(e),function(t,e){if(e&&("object"===co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fo()?Reflect.construct(e,r||[],mo(t).constructor):e.apply(t,r))}function fo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fo=function(){return!!t})()}function yo(){return yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mo(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},yo.apply(this,arguments)}function mo(t){return mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mo(t)}function vo(t,e){return vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vo(t,e)}var bo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),po(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vo(t,e)}(e,t),r=e,(n=[{key:"setValue",value:function(t,r,n){t=this.applyConstFilter(t);var i=yo(mo(e.prototype),"setValue",this).call(this,t,r,n);void 0!==i&&i.changed&&this.sceditor_instance&&this.sceditor_instance.val(i.value)}},{key:"build",value:function(){this.options.format="textarea",yo(mo(e.prototype),"build",this).call(this),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}},{key:"afterInputReady",value:function(){var t=this;if(window.sceditor){var r=this.expandCallbacks("sceditor",a({},{format:this.input_type,emoticonsEnabled:!1,width:"100%",height:300,readOnly:this.schema.readOnly||this.schema.readonly||this.schema.template},this.defaults.options.sceditor||{},this.options.sceditor||{},{element:this.input})),n=window.sceditor.instance(this.input);void 0===n&&window.sceditor.create(this.input,r),this.sceditor_instance=n||window.sceditor.instance(this.input),this.sceditor_instance.blur((function(){t.value=t.sceditor_instance.val(),t.sceditor_instance.updateOriginal(),t.is_dirty=!0,t.onChange(!0)})),this.theme.afterInputReady(this.input)}else yo(mo(e.prototype),"afterInputReady",this).call(this)}},{key:"getNumColumns",value:function(){return 6}},{key:"enable",value:function(){!this.always_disabled&&this.sceditor_instance&&this.sceditor_instance.readOnly(!1),yo(mo(e.prototype),"enable",this).call(this)}},{key:"disable",value:function(t){this.sceditor_instance&&this.sceditor_instance.readOnly(!0),yo(mo(e.prototype),"disable",this).call(this,t)}},{key:"destroy",value:function(){this.sceditor_instance&&(this.sceditor_instance.destroy(),this.sceditor_instance=null),yo(mo(e.prototype),"destroy",this).call(this)}}])&&lo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W);function go(t){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(t)}function wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oo(n.key),n)}}function Oo(t){var e=function(t,e){if("object"!=go(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==go(e)?e:e+""}function jo(t,e,r){return e=ko(e),function(t,e){if(e&&("object"===go(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_o()?Reflect.construct(e,r||[],ko(t).constructor):e.apply(t,r))}function _o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_o=function(){return!!t})()}function ko(t){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ko(t)}function xo(t,e){return xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xo(t,e)}var Eo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jo(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){var t=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));var e=this.formname.replace(/\W/g,"");if("function"==typeof SignaturePad){this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input);var r=document.createElement("div");r.classList.add("signature-container");var n=document.createElement("canvas");this.jsoneditor.options.use_name_attributes&&n.setAttribute("name",e),n.classList.add("signature"),r.appendChild(n),this.signaturePad=new window.SignaturePad(n),this.signaturePad.onEnd=function(){t.signaturePad.isEmpty()?t.input.value="":t.input.value=t.signaturePad.toDataURL(),t.is_dirty=!0,t.refreshValue(),t.watch_listener(),t.jsoneditor.notifyWatchers(t.path),t.parent?t.parent.onChildEditorChange(t):t.jsoneditor.onChange()};var i=document.createElement("div"),o=document.createElement("button");o.classList.add("tiny","button"),o.innerHTML="Clear signature",i.appendChild(o),r.appendChild(i),this.options.compact&&this.container.setAttribute("class","".concat(this.container.getAttribute("class")," compact")),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),Array.from(this.inputs).forEach((function(t){n.setAttribute("readOnly","readOnly"),t.disabled=!0}))),o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.signaturePad.clear(),t.signaturePad.strokeEnd()})),this.control=this.theme.getFormControl(this.label,r,this.description,null,this),this.container.appendChild(this.control),this.refreshValue(),n.width=r.offsetWidth,this.options&&this.options.canvas_height?n.height=this.options.canvas_height:n.height="300"}else{var a=document.createElement("p");a.innerHTML="Signature pad is not available, please include SignaturePad from https://github.com/szimek/signature_pad",this.container.appendChild(a)}}},{key:"setValue",value:function(t){if(t=this.applyConstFilter(t),"function"==typeof SignaturePad){var e=this.sanitize(t);if(this.value===e)return;return this.value=e,this.input.value=this.value,this.signaturePad.clear(),t&&""!==t&&this.signaturePad.fromDataURL(t),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),!1}}},{key:"destroy",value:function(){this.signaturePad.off(),delete this.signaturePad}}])&&wo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W);function So(t){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},So(t)}function Po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Co(n.key),n)}}function Co(t){var e=function(t,e){if("object"!=So(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==So(e)?e:e+""}function To(t,e,r){return e=Lo(e),function(t,e){if(e&&("object"===So(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ao()?Reflect.construct(e,r||[],Lo(t).constructor):e.apply(t,r))}function Ao(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ao=function(){return!!t})()}function Io(){return Io="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lo(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Io.apply(this,arguments)}function Lo(t){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lo(t)}function Ro(t,e){return Ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ro(t,e)}var No=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),To(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ro(t,e)}(e,t),r=e,(n=[{key:"setValue",value:function(t,r,n){t=this.applyConstFilter(t);var i=Io(Lo(e.prototype),"setValue",this).call(this,t,r,n);void 0!==i&&i.changed&&this.simplemde_instance&&this.simplemde_instance.value(i.value)}},{key:"build",value:function(){this.options.format="textarea",Io(Lo(e.prototype),"build",this).call(this),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}},{key:"afterInputReady",value:function(){var t,r=this;window.SimpleMDE?(t=this.expandCallbacks("simplemde",a({},{height:300},this.defaults.options.simplemde||{},this.options.simplemde||{},{element:this.input,forceSync:!0})),this.simplemde_instance=new window.SimpleMDE(t),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.simplemde_instance.codemirror.options.readOnly=!0),this.simplemde_instance.codemirror.on("change",(function(){r.value=r.simplemde_instance.value(),r.is_dirty=!0,r.onChange(!0)})),t.autorefresh&&this.startListening(this.simplemde_instance.codemirror,this.simplemde_instance.codemirror.state.autoRefresh={delay:250}),this.theme.afterInputReady(this.input)):Io(Lo(e.prototype),"afterInputReady",this).call(this)}},{key:"getNumColumns",value:function(){return 6}},{key:"enable",value:function(){!this.always_disabled&&this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!1),Io(Lo(e.prototype),"enable",this).call(this)}},{key:"disable",value:function(t){this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!0),Io(Lo(e.prototype),"disable",this).call(this,t)}},{key:"destroy",value:function(){this.simplemde_instance&&(this.simplemde_instance.toTextArea(),this.simplemde_instance=null),Io(Lo(e.prototype),"destroy",this).call(this)}},{key:"startListening",value:function(t,e){var r=this,n=function n(){t.display.wrapper.offsetHeight?(r.stopListening(t,e),t.display.lastWrapHeight!==t.display.wrapper.clientHeight&&t.refresh()):e.timeout=window.setTimeout(n,e.delay)};e.timeout=window.setTimeout(n,e.delay),e.hurry=function(){window.clearTimeout(e.timeout),e.timeout=window.setTimeout(n,50)},t.on(window,"mouseup",e.hurry),t.on(window,"keyup",e.hurry)}},{key:"stopListening",value:function(t,e){window.clearTimeout(e.timeout),t.off(window,"mouseup",e.hurry),t.off(window,"keyup",e.hurry)}}])&&Po(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W);function Bo(t){"classes"in(t=t||{})||(t.classes=[]),t.classes.push("jsonforms-rating-widget"),this.config=t,Bo.super.call(this,t);var e=$('<div class="jsonforms-rating">');this.$input=e,this.isChecked=0;for(var r=this,n=1;n<=t.ratingLength;n++){var i=$("<input>").attr({type:"radio",value:n,id:"rating-"+n,name:t.name,"data-i":n});n===t.value&&(i.prop("checked",!0),this.isChecked=n),i.on("click",(function(){var e=$(this).data("i");r.isChecked==e?(r.isChecked=e-1,$(this).prop("checked",!1),$(":input[name='"+t.name+"'][data-i='"+(e-1)+"']").prop("checked",!0)):r.isChecked=e,r.emit("change",r.getValue())})),e.append([i,$("<label>").attr({for:"rating-"+n})])}this.$element.append(e)}OO.inheritClass(Bo,OO.ui.Widget),OO.mixinClass(Bo,OO.EventEmitter),Bo.prototype.getValue=function(){return this.isChecked+""},Bo.prototype.setValue=function(t){var e=parseInt(t,10),r=isNaN(e)||e<0?0:Math.min(e,this.config.ratingLength);$(":input[name='"+this.config.name+"']").prop("checked",!1),r>0&&$(":input[name='"+this.config.name+"'][data-i='"+r+"']").prop("checked",!0),self.isChecked=r};const Fo=bt(Bo);function Do(t){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Do(t)}function Vo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$o(n.key),n)}}function $o(t){var e=function(t,e){if("object"!=Do(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Do(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Do(e)?e:e+""}function Mo(t,e,r){return e=Ho(e),function(t,e){if(e&&("object"===Do(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wo()?Reflect.construct(e,r||[],Ho(t).constructor):e.apply(t,r))}function Wo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wo=function(){return!!t})()}function zo(){return zo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ho(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},zo.apply(this,arguments)}function Ho(t){return Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ho(t)}function qo(t,e){return qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qo(t,e)}var Uo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mo(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qo(t,e)}(e,t),r=e,(n=[{key:"build",value:function(){var t=this;if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),void 0===this.schema.enum){var e=this.schema.maximum?this.schema.maximum:5;this.schema.exclusiveMaximum&&e--,this.enum_values=[];for(var r=0;r<e;r++)this.enum_values.push(r+1)}else this.enum_values=this.schema.enum;this.ratingContainer=document.createElement("div"),this.ratingContainer.classList.add("starrating"),this.input=new Fo({name:"rating",ratingLength:this.enum_values.length}),this.input.on("change",(function(e){t.setValue(e)})),this.theme.append(this.ratingContainer,this.input),this.options.displayValue&&(this.displayRating=document.createElement("div"),this.displayRating.classList.add("starrating-display"),this.displayRating.innerText=this.enum_values[0],this.theme.append(this.ratingContainer,this.displayRating)),this.theme.append(this.container,this.ratingContainer);var n=this.theme.getContainerOrig();this.theme.append(n,this.ratingContainer),this.control=this.theme.getFormControl(this.label,n,this.description,this.infoButton,this),this.theme.append(this.container,this.control),this.refreshValue()}},{key:"enable",value:function(){}},{key:"disable",value:function(t){}},{key:"destroy",value:function(){this.ratingContainer.parentNode&&this.ratingContainer.parentNode.parentNode&&this.ratingContainer.parentNode.parentNode.removeChild(this.ratingContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),zo(Ho(e.prototype),"destroy",this).call(this)}},{key:"getNumColumns",value:function(){return 2}},{key:"getValue",value:function(){if(this.dependenciesFulfilled)return"integer"===this.schema.type?""===this.value?0:parseInt(this.value):this.value}}])&&Vo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(wr);function Go(t){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Go(t)}function Jo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zo(n.key),n)}}function Zo(t){var e=function(t,e){if("object"!=Go(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Go(e)?e:e+""}function Yo(t,e,r){return e=Qo(e),function(t,e){if(e&&("object"===Go(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ko()?Reflect.construct(e,r||[],Qo(t).constructor):e.apply(t,r))}function Ko(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ko=function(){return!!t})()}function Xo(){return Xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qo(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Xo.apply(this,arguments)}function Qo(t){return Qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qo(t)}function ta(t,e){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ta(t,e)}var ea=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yo(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ta(t,e)}(e,t),r=e,n=[{key:"register",value:function(){if(Xo(Qo(e.prototype),"register",this).call(this),this.rows)for(var t=0;t<this.rows.length;t++)this.rows[t].register()}},{key:"unregister",value:function(){if(Xo(Qo(e.prototype),"unregister",this).call(this),this.rows)for(var t=0;t<this.rows.length;t++)this.rows[t].unregister()}},{key:"getNumColumns",value:function(){return Math.max(Math.min(12,this.width),3)}},{key:"preBuild",value:function(){var t=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=t.title||"row",this.item_default=t.default||null,this.item_has_child_editors=t.properties||t.items,this.width=12,Xo(Qo(e.prototype),"preBuild",this).call(this)}},{key:"build",value:function(){this.buildTable();var t=this.getElementEditor(0,!0);this.item_default=t.getDefault(),this.width=t.getNumColumns()+2,this.buildPanelAndHeader(t),this.buildTableHeaders(t),t.destroy(),this.row_holder.innerHTML="",this.add_row_button=this.createAddRowButton()}},{key:"buildTable",value:function(){this.tableContainer=this.theme.getTableContainer(),this.table=this.theme.getTable(),this.row_holder=this.theme.getTableBody(),this.theme.append(this.tableContainer,this.table),this.theme.append(this.container,this.tableContainer),this.theme.append(this.table,this.row_holder)}},{key:"buildPanelAndHeader",value:function(t){var e=this;if(this.options.removable){var r=this.theme.getButton({label:null,icon:"close",flags:[],classes:[]});r.on("click",(function(){var t=e.jsoneditor.editors[e.path];t.parent.restoreLazyProperty(t.key)}));var n=this.theme.getContainer();n.classList.add("jsonforms-remove-object"),this.theme.append(n,r),this.theme.append(this.container,n)}this.options.compact?(this.panel=document.createElement("div"),this.theme.append(this.container,this.panel)):(this.title=this.theme.getHeader(this.getTitle(),2),this.theme.append(this.container,this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.theme.append(this.container,this.infoButton)),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description),this.theme.append(this.container,this.description)),this.panel=this.theme.getIndentedPanel(),this.theme.append(this.container,this.panel),this.error_holder=document.createElement("div"),this.theme.append(this.panel,this.error_holder)),this.theme.append(this.panel,this.tableContainer),this.controls=this.theme.getButtonHolder(),this.theme.append(this.panel,this.controls)}},{key:"buildTableHeaders",value:function(t){var e=this;if(this.item_has_child_editors){var r=this.theme.getTableHead();this.header_row=this.theme.getTableRow(),this.table.appendChild(r),r.appendChild(this.header_row);var n=t.getChildEditors();(t.property_order||Object.keys(n)).forEach((function(t){var r=n[t],i=e.theme.getTableHeaderCell(r.getTitle());r.options.hidden&&(i.style.display="none"),e.theme.append(e.header_row,i)}))}}},{key:"buildControlsColumn",value:function(){this.controls_header_cell=this.theme.getTableHeaderCell(this.translate("table_controls")),this.controls_header_cell.setAttribute("aria-hidden","true"),this.controls_header_cell.style.visibility="hidden",this.theme.append(this.header_row,this.controls_header_cell)}},{key:"onChildEditorChange",value:function(t,r){this.refreshValue(),Xo(Qo(e.prototype),"onChildEditorChange",this).call(this,t,r)}},{key:"getItemDefault",value:function(){return a({},{default:this.item_default}).default}},{key:"getItemTitle",value:function(){return this.item_title}},{key:"getElementEditor",value:function(t,e){var r=a({},this.schema.items),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),i=n.classname,o=n.editorClass,s=this.theme.append(this.row_holder,this.theme.getTableRow()),u=s;this.item_has_child_editors||(u=this.theme.getTableCell(),this.theme.append(s,u));var c=this.jsoneditor.createEditor(o,{jsoneditor:this.jsoneditor,schema:r,container:u,path:"".concat(this.path,".").concat(t),pathNoIndex:this.pathNoIndex,parent:this,compact:!0,table_row:!0,ignore:e,classname:i});return c.preBuild(),e||(c.build(),c.postBuild(),c.controls_cell=this.theme.append(s,this.theme.getTableCell()),c.row=s,c.table_controls=this.theme.getButtonHolder(),this.theme.append(c.controls_cell,c.table_controls),c.table_controls.style.margin=0,c.table_controls.style.padding=0),c}},{key:"ensureArraySize",value:function(t){if(Array.isArray(t)||(t=[t]),this.schema.minItems)for(;t.length<this.schema.minItems;)t.push(this.getItemDefault());return this.schema.maxItems&&t.length>this.schema.maxItems&&(t=t.slice(0,this.schema.maxItems)),t}},{key:"setValue",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;if(e=this.ensureArraySize(this.applyConstFilter(e)),JSON.stringify(e)!==this.serialized){var n=!1;e.forEach((function(e,r){var i=t.rows[r];if(i){var o=i.getValue();JSON.stringify(o)!==JSON.stringify(e)&&i.setValue(e)}else t.addRow(e),n=!0}));for(var i=e.length;i<this.rows.length;i++){var o=this.rows[i];this.item_has_child_editors||$(o.row).remove(),o.destroy(),$(o.container).remove(),this.rows[i]=null,n=!0}this.rows.length=e.length,this.refreshValue(),(n||r)&&this.refreshRowButtons(),this.onChange()}}},{key:"refreshRowButtons",value:function(){var t=this,e=this.rows.length,r=this.schema.minItems&&this.schema.minItems>=e,n=this.schema.maxItems&&this.schema.maxItems<=e,i=!1;this.rows.forEach((function(e){if(e.delete_button){var n=!r;t.setButtonState(e.delete_button,n),i||(i=n)}})),this.rows.forEach((function(e){t.setButtonState(e.controls_cell,i)})),this.setButtonState(this.controls_header_cell,i),this.setButtonState(this.table,this.value.length);var o=!n&&!this.hide_add_button;this.setButtonState(this.add_row_button,o),this.setButtonState(this.controls,o)}},{key:"refreshValue",value:function(){var t=this;this.value=[],this.rows.forEach((function(e,r){t.value[r]=e.getValue()})),this.serialized=JSON.stringify(this.value)}},{key:"addRow",value:function(t){var e=this.rows.length;this.rows[e]=this.getElementEditor(e);var r=this.rows[e].table_controls;return this.hide_delete_buttons||(this.rows[e].delete_button=this.createDeleteButton(e,r)),void 0!==t&&this.rows[e].setValue(t),this.rows[e]}},{key:"createDeleteButton",value:function(t,e){var r=this,n=this.getButton({icon:"trash",title:"delete item"});return n.classList.add("delete","json-editor-btntype-delete"),n.setAttribute("data-i",t),this.theme.buttonAction(n,"delete",(function(){if(r.askConfirmation()){var t=Number(n.getAttribute("data-i")),e=r.getValue(),i=e[t];e.splice(t,1),r.setValue(e),r.onChange(!0),r.jsoneditor.trigger("deleteRow",i)}})),this.theme.append(e,n),n}},{key:"createAddRowButton",value:function(){var t=this,e=this.getItemTitle(),r=this.getButton({icon:"add"},[e]);return r.classList.add("json-editor-btntype-add"),this.theme.buttonAction(r,"add",(function(){var e=t.addRow();t.refreshValue(),t.refreshRowButtons(),t.onChange(!0),t.jsoneditor.trigger("addRow",e)})),this.theme.append(this.controls,r),r}},{key:"destroy",value:function(){this.innerHTML="",this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.table)&&this.table.parentNode.removeChild(this.table),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,Xo(Qo(e.prototype),"destroy",this).call(this)}}],n&&Jo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Vt);function ra(t){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(t)}function na(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ia(n.key),n)}}function ia(t){var e=function(t,e){if("object"!=ra(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ra(e)?e:e+""}function oa(t,e,r){return e=ua(e),function(t,e){if(e&&("object"===ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aa()?Reflect.construct(e,r||[],ua(t).constructor):e.apply(t,r))}function aa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aa=function(){return!!t})()}function sa(){return sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ua(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},sa.apply(this,arguments)}function ua(t){return ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ua(t)}function ca(t,e){return ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ca(t,e)}function la(t){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la(t)}function ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pa(n.key),n)}}function pa(t){var e=function(t,e){if("object"!=la(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=la(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==la(e)?e:e+""}function fa(t,e,r){return e=ma(e),function(t,e){if(e&&("object"===la(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,da()?Reflect.construct(e,r||[],ma(t).constructor):e.apply(t,r))}function da(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(da=function(){return!!t})()}function ya(){return ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ma(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},ya.apply(this,arguments)}function ma(t){return ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ma(t)}function va(t,e){return va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},va(t,e)}function ba(t){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wa(n.key),n)}}function wa(t){var e=function(t,e){if("object"!=ba(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ba(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ba(e)?e:e+""}function Oa(t,e,r){return e=ka(e),function(t,e){if(e&&("object"===ba(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ja()?Reflect.construct(e,r||[],ka(t).constructor):e.apply(t,r))}function ja(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ja=function(){return!!t})()}function _a(){return _a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ka(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},_a.apply(this,arguments)}function ka(t){return ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(t)}function xa(t,e){return xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xa(t,e)}r(9868);var Ea={ace:K,array:Vt,base64:Jt,button:ne,lazyButton:pe,checkbox:Oe,describedBy:Te,enum:$e,hidden:Ze,info:nr,integer:wr,ip:Cr,jodit:Dr,multiple:cn,multiselect:bn,boolean:Ti,tagmultiselect:Sn,popup:ti,survey:Oi,datatable:ci,null:Di,number:pr,object:qn,radio:uo,sceditor:bo,select:Qi,signature:Eo,simplemde:No,starrating:Uo,string:W,table:ea,upload:function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oa(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ca(t,e)}(e,t),r=e,(n=[{key:"getNumColumns",value:function(){return 4}},{key:"build",value:function(){var t=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.hidden&&(this.container.style.display="none"),this.options=this.expandCallbacks("upload",a({},{title:"Browse",icon:"",auto_upload:!1,hide_input:!1,enable_drag_drop:!1,drop_zone_text:"Drag & Drop file here",drop_zone_top:!1,alt_drop_zone:"",mime_type:"",max_upload_size:0,upload_handler:function(t,e,r,n){window.alert('No upload_handler defined for "'.concat(t.path,'". You must create your own handler to enable upload to server'))}},this.defaults.options.upload||{},this.options.upload||{})),this.options.mime_type=this.options.mime_type?[].concat(this.options.mime_type):[],this.input=this.theme.getFormInputField("hidden",this),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if("function"!=typeof this.options.upload_handler)throw new Error("Upload handler required for upload editor");if(this.uploader=this.theme.getFormInputField("file",this),this.uploader.style.display="none",this.options.mime_type.length&&this.uploader.setAttribute("accept",this.options.mime_type),!0===this.options.enable_drag_drop&&!0===this.options.hide_input||(this.clickHandler=function(e){t.uploader.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},this.browseButton=this.getButton({label:this.options.title,icon:this.options.icon,title:this.options.title}),this.browseButton.addEventListener("click",this.clickHandler),this.fileDisplay=this.theme.getFormInputField("text",this),this.fileDisplay.setAttribute("readonly",!0),this.fileDisplay.value="No file selected.",this.fileDisplay.addEventListener("dblclick",this.clickHandler),this.fileUploadGroup=this.theme.getInputGroup(this.fileDisplay,[this.browseButton]),this.fileUploadGroup||(this.fileUploadGroup=document.createElement("div"),this.fileUploadGroup.appendChild(this.fileDisplay),this.fileUploadGroup.appendChild(this.browseButton))),!0===this.options.enable_drag_drop){if(""!==this.options.alt_drop_zone){if(this.altDropZone=document.querySelector(this.options.alt_drop_zone),!this.altDropZone)throw new Error('Error: alt_drop_zone selector "'.concat(this.options.alt_drop_zone,'" not found!'));this.dropZone=this.altDropZone}else this.dropZone=this.theme.getDropZone(this.options.drop_zone_text);this.dropZone&&(this.dropZone.classList.add("upload-dropzone"),this.dropZone.addEventListener("dblclick",this.clickHandler))}this.uploadHandler=function(e){e.preventDefault(),e.stopPropagation();var r=e.target.files||e.dataTransfer.files;if(r&&r.length)if(0!==t.options.max_upload_size&&r[0].size>t.options.max_upload_size)t.theme.addInputError(t.uploader,"".concat(t.translate("upload_max_size")," ").concat(t.options.max_upload_size));else if(0===t.options.mime_type.length||t.isValidMimeType(r[0].type,t.options.mime_type)){t.fileDisplay&&(t.fileDisplay.value=r[0].name);var n=new window.FileReader;n.onload=function(e){t.preview_value=e.target.result,t.refreshPreview(r),t.onChange(!0),n=null},n.readAsDataURL(r[0])}else t.theme.addInputError(t.uploader,"".concat(t.translate("upload_wrong_file_format")," ").concat(t.options.mime_type.toString()))},this.uploader.addEventListener("change",this.uploadHandler),this.dragHandler=function(e){var r=e.dataTransfer.items||e.dataTransfer.files,n=r&&r.length&&(0===t.options.mime_type.length||t.isValidMimeType(r[0].type,t.options.mime_type)),i=e.currentTarget.classList&&e.currentTarget.classList.contains("upload-dropzone")&&n;switch((e.currentTarget===window?"w_":"e_")+e.type){case"w_drop":case"w_dragover":i||(e.dataTransfer.dropEffect="none");break;case"e_dragenter":i?(t.dropZone.classList.add("valid-dropzone"),e.dataTransfer.dropEffect="copy"):t.dropZone.classList.add("invalid-dropzone");break;case"e_dragover":i&&(e.dataTransfer.dropEffect="copy");break;case"e_dragleave":t.dropZone.classList.remove("valid-dropzone","invalid-dropzone");break;case"e_drop":t.dropZone.classList.remove("valid-dropzone","invalid-dropzone"),i&&t.uploadHandler(e)}i||e.preventDefault()},!0===this.options.enable_drag_drop&&(["dragover","drop"].forEach((function(e){window.addEventListener(e,t.dragHandler,!0)})),["dragenter","dragover","dragleave","drop"].forEach((function(e){t.dropZone.addEventListener(e,t.dragHandler,!0)})))}this.preview=document.createElement("div"),this.control=this.input.controlgroup=this.theme.getFormControl(this.label,this.uploader||this.input,this.description,this.infoButton,this),this.uploader&&(this.uploader.controlgroup=this.control);var e=this.uploader||this.input,r=document.createElement("div");this.dropZone&&!this.altDropZone&&!0===this.options.drop_zone_top&&r.appendChild(this.dropZone),this.fileUploadGroup&&r.appendChild(this.fileUploadGroup),this.dropZone&&!this.altDropZone&&!0!==this.options.drop_zone_top&&r.appendChild(this.dropZone),r.appendChild(this.preview),e.parentNode.insertBefore(r,e.nextSibling),this.container.appendChild(this.control),window.requestAnimationFrame((function(){t.afterInputReady()}))}},{key:"afterInputReady",value:function(){var t=this;if(this.value){var e=document.createElement("img");e.style.maxWidth="100%",e.style.maxHeight="100px",e.onload=function(r){t.preview.appendChild(e)},e.onerror=function(t){console.error("upload error",t,t.currentTarget)},e.src=this.container.querySelector("a").href}this.theme.afterInputReady(this.input)}},{key:"refreshPreview",value:function(t){var e=this;if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)){var r=t[0],n=this.preview_value.match(/^data:([^;,]+)[;,]/);if(r.mimeType=n?n[1]:"unknown",r.size>0){var i=Math.floor(Math.log(r.size)/Math.log(1024));r.formattedSize="".concat(parseFloat((r.size/Math.pow(1024,i)).toFixed(2))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i])}else r.formattedSize="0 Bytes";var o=this.getButton({label:"button_upload",icon:"upload",title:"button_upload"});o.addEventListener("click",(function(t){t.preventDefault(),o.setAttribute("disabled","disabled"),e.theme.removeInputError(e.uploader),e.theme.getProgressBar&&(e.progressBar=e.theme.getProgressBar(),e.preview.appendChild(e.progressBar)),e.options.upload_handler(e.path,r,{success:function(t){e.setValue(t),e.parent?e.parent.onChildEditorChange(e):e.jsoneditor.onChange(),e.progressBar&&e.preview.removeChild(e.progressBar),o.removeAttribute("disabled")},failure:function(t){e.theme.addInputError(e.uploader,t),e.progressBar&&e.preview.removeChild(e.progressBar),o.removeAttribute("disabled")},updateProgress:function(t){e.progressBar&&(t?e.theme.updateProgressBar(e.progressBar,t):e.theme.updateProgressBarUnknown(e.progressBar))}})})),this.preview.appendChild(this.theme.getUploadPreview(r,o,this.preview_value)),this.options.auto_upload&&(o.dispatchEvent(new window.MouseEvent("click")),o.parentNode.removeChild(o))}}},{key:"enable",value:function(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),sa(ua(e.prototype),"enable",this).call(this))}},{key:"disable",value:function(t){t&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),sa(ua(e.prototype),"disable",this).call(this)}},{key:"setValue",value:function(t){t=this.applyConstFilter(t),this.value!==t&&(this.value=t,this.input.value=this.value,this.onChange())}},{key:"destroy",value:function(){var t=this;!0===this.options.enable_drag_drop&&(["dragover","drop"].forEach((function(e){window.removeEventListener(e,t.dragHandler,!0)})),["dragenter","dragover","dragleave","drop"].forEach((function(e){t.dropZone.removeEventListener(e,t.dragHandler,!0)})),this.dropZone.removeEventListener("dblclick",this.clickHandler),this.dropZone&&this.dropZone.parentNode&&this.dropZone.parentNode.removeChild(this.dropZone)),this.uploader&&this.uploader.parentNode&&(this.uploader.removeEventListener("change",this.uploadHandler),this.uploader.parentNode.removeChild(this.uploader)),this.browseButton&&this.browseButton.parentNode&&(this.browseButton.removeEventListener("click",this.clickHandler),this.browseButton.parentNode.removeChild(this.browseButton)),this.fileDisplay&&this.fileDisplay.parentNode&&(this.fileDisplay.removeEventListener("dblclick",this.clickHandler),this.fileDisplay.parentNode.removeChild(this.fileDisplay)),this.fileUploadGroup&&this.fileUploadGroup.parentNode&&this.fileUploadGroup.parentNode.removeChild(this.fileUploadGroup),this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.header&&this.header.parentNode&&this.header.parentNode.removeChild(this.header),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),sa(ua(e.prototype),"destroy",this).call(this)}},{key:"isValidMimeType",value:function(t,e){return e.reduce((function(e,r){return e||new RegExp(r.replace(/\*/g,".*"),"gi").test(t)}),!1)}}])&&na(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(I),uuid:function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fa(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&va(t,e)}(e,t),r=e,(n=[{key:"preBuild",value:function(){ya(ma(e.prototype),"preBuild",this).call(this),this.schema.default=this.uuid=this.getUuid(),this.schema.options||(this.schema.options={}),this.schema.options.cleave||(this.schema.options.cleave={delimiters:["-"],blocks:[8,4,4,4,12]})}},{key:"build",value:function(){ya(ma(e.prototype),"build",this).call(this),this.disable(!0),this.input.setAttribute("readonly","true")}},{key:"sanitize",value:function(t){return this.testUuid(t)||(t=this.uuid),t}},{key:"setValue",value:function(t,r,n){t=this.applyConstFilter(t),this.testUuid(t)||(t=this.uuid),this.uuid=t,ya(ma(e.prototype),"setValue",this).call(this,t,r,n)}},{key:"getUuid",value:function(){return t=(new Date).getTime(),"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:3&r|8).toString(16)}));var t}},{key:"testUuid",value:function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}}])&&ha(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W),colorpicker:function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Oa(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xa(t,e)}(e,t),r=e,(n=[{key:"postBuild",value:function(){window.Picker&&(this.input.type="text"),this.input.style.padding="3px"}},{key:"setValue",value:function(t,r,n){t=this.applyConstFilter(t);var i=_a(ka(e.prototype),"setValue",this).call(this,t,r,n);return this.picker_instance&&this.picker_instance.domElement&&i&&i.changed&&this.picker_instance.setColor(i.value,!0),i}},{key:"getNumColumns",value:function(){return 2}},{key:"afterInputReady",value:function(){_a(ka(e.prototype),"afterInputReady",this).call(this),this.createPicker(!0)}},{key:"disable",value:function(){if(_a(ka(e.prototype),"disable",this).call(this),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="none";for(var t=this.picker_instance.domElement.querySelectorAll("button"),r=0;r<t.length;r++)t[r].disabled=!0}}},{key:"enable",value:function(){if(_a(ka(e.prototype),"enable",this).call(this),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="auto";for(var t=this.picker_instance.domElement.querySelectorAll("button"),r=0;r<t.length;r++)t[r].disabled=!1}}},{key:"destroy",value:function(){this.createPicker(!1),_a(ka(e.prototype),"destroy",this).call(this)}},{key:"createPicker",value:function(t){var e=this;if(t){if(window.Picker&&!this.picker_instance){var r=this.expandCallbacks("colorpicker",a({},{editor:!1,alpha:!1,color:this.value,popup:"bottom"},this.defaults.options.colorpicker||{},this.options.colorpicker||{},{parent:this.container})),n=function(t){var r=e.picker_instance.settings.editorFormat,n=e.picker_instance.settings.alpha;e.setValue("hex"===r?n?t.hex:t.hex.slice(0,7):t["".concat(r+(n?"a":""),"String")])};r.popup||"function"==typeof r.onChange?r.popup&&"function"!=typeof r.onDone&&(r.onDone=n):r.onChange=n,this.picker_instance=new window.Picker(r),r.popup||(this.input.style.display="none",this.theme.afterInputReady(this.picker_instance.domElement))}}else this.picker_instance&&(this.picker_instance.destroy(),this.picker_instance=null,this.input.style.display="")}}])&&ga(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(W)};function Sa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Pa={},Ca="en",Ta=Ca;Pa.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_const:"Value must be the constant value",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_contains:"No items match contains",error_minContains:"Contains match count {{0}} is less than minimum contains count of {{1}}",error_maxContains:"Contains match count {{0}} exceeds maximum contains count of {{1}}",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_property_names_exceeds_maxlength:"Property name {{0}} exceeds maxLength",error_property_names_enum_mismatch:"Property name {{0}} does not match any enum values",error_property_names_const_mismatch:"Property name {{0}} does not match the const value",error_property_names_pattern_mismatch:"Property name {{0}} does not match pattern",error_property_names_false:"Property name {{0}} fails when propertyName is false",error_property_names_maxlength:"Property name {{0}} cannot match invalid maxLength",error_property_names_enum:"Property name {{0}} cannot match invalid enum",error_property_names_pattern:"Property name {{0}} cannot match invalid pattern",error_property_names_unsupported:"Unsupported propertyName {{0}}",error_dependency:"Must have property {{0}}",error_date:"Date must be in the format {{0}}",error_time:"Time must be in the format {{0}}",error_datetime_local:"Datetime must be in the format {{0}}",error_invalid_epoch:"Date must be greater than 1 January 1970",error_ipv4:"Value must be a valid IPv4 address in the form of 4 numbers between 0 and 255, separated by dots",error_ipv6:"Value must be a valid IPv6 address",error_hostname:"The hostname has the wrong format",upload_max_size:"Filesize too large. Max size is ",upload_wrong_file_format:"Wrong file format. Allowed format(s): ",button_save:"Save",button_copy:"Copy",button_cancel:"Cancel",button_add:"Add",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_properties:"Properties",button_object_properties:"Object Properties",button_copy_row_title:"Copy {{0}}",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_copy_row_title_short:"Copy",button_collapse:"Collapse",button_expand:"Expand",button_edit_json:"Edit JSON",button_upload:"Upload",flatpickr_toggle_button:"Toggle",flatpickr_clear_button:"Clear",choices_placeholder_text:"Start typing to add value",default_array_item_title:"item",button_delete_node_warning:"Are you sure you want to remove this item?",table_controls:"Controls",paste_max_length_reached:"Pasted text exceeded maximum length of {{0}} and will be clipped."},Object.entries(Ea).forEach((function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Sa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sa(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),r=e[0],n=e[1];Ea[r].options=n.options||{}}));var Aa={options:{upload:function(t,e,r){console.log("Upload handler required for upload editor")},use_name_attributes:!0,prompt_before_delete:!0,use_default_values:!0,max_depth:0,button_state_mode:1,case_sensitive_property_search:!0,show_errors:"interaction",prompt_paste_max_length_reached:!1,remove_false_properties:!1,enforce_const:!1,opt_in_widget:"checkbox"},theme:"html",template:"default",themes:{},callbacks:{},templates:{},iconlibs:{},editors:Ea,languages:Pa,resolvers:t,custom_validators:[],default_language:Ca,language:Ta,translate:function(t,e,r){var n={};r&&r.options&&r.options.error_messages&&r.options.error_messages[Aa.language]&&(n=r.options.error_messages[Aa.language]);var i=Aa.languages[Aa.language];if(!i)throw new Error("Unknown language ".concat(Aa.language));var o=n[t]||i[t]||Aa.languages[Ca][t]||t;if(e)for(var a=0;a<e.length;a++)o=o.replace(new RegExp("\\{\\{".concat(a,"}}"),"g"),e[a]);return o},translateProperty:function(t,e){return t}};function Ia(){Ia=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new T(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",m={};function v(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(A([])));j&&j!==r&&n.call(j,a)&&(w=j);var _=g.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Fa(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=p;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var c=h(e,r,n);if("normal"===c.type){if(i=n.done?y:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Fa(e)+" is not iterable")}return b.prototype=g,i(_,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},k(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new x(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function La(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function Ra(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){La(o,n,i,a,s,"next",t)}function s(t){La(o,n,i,a,s,"throw",t)}a(void 0)}))}}function Na(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ba(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ba(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fa(t){return Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fa(t)}function Da(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Va(n.key),n)}}function Va(t){var e=function(t,e){if("object"!=Fa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fa(e)?e:e+""}r(1688);var $a=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e||{},this.schema={},this.refs=this.options.refs||{},this.refs_with_info={},this.refs_prefix="#/counter/",this.refs_counter=1,this._subSchema1={type:function(t){"object"===Fa(t.type)&&(t.type=this._expandSubSchema(t.type))},disallow:function(t){"object"===Fa(t.disallow)&&(t.disallow=this._expandSubSchema(t.disallow))},anyOf:function(t){var e=this;Object.entries(t.anyOf).forEach((function(r){var n=Na(r,2),i=n[0],o=n[1];t.anyOf[i]=e.expandSchema(o)}))},dependencies:function(t){var e=this;Object.entries(t.dependencies).forEach((function(r){var n=Na(r,2),i=n[0],o=n[1];"object"!==Fa(o)||Array.isArray(o)||(t.dependencies[i]=e.expandSchema(o))}))},not:function(t){t.not=this.expandSchema(t.not)}},this._subSchema2={allOf:function(t,e){var r=this,n=a({},e);return Object.entries(t.allOf).forEach((function(e){var i=Na(e,2),o=i[0],a=i[1];t.allOf[o]=r.expandRefs(a,!0),n=r.extendSchemas(n,r.expandSchema(a))})),delete n.allOf,n},extends:function(t,e){var r,n=this;return delete(r=Array.isArray(t.extends)?t.extends.reduce((function(t,e,r){return n.extendSchemas(t,n.expandSchema(e))}),e):this.extendSchemas(e,this.expandSchema(t.extends))).extends,r},oneOf:function(t,e){var r=this,n=a({},e);return delete n.oneOf,t.oneOf.reduce((function(t,e,i){return t.oneOf[i]=r.extendSchemas(r.expandSchema(e),n),t}),e),e}}},e=[{key:"load",value:(n=Ra(Ia().mark((function t(e,r,n){return Ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.schema=e,t.next=3,this._asyncloadExternalRefs(e,r,this._getFileBase(n),!0);case 3:return t.abrupt("return",this.expandRefs(e));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"expandRefs_",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=a({},t);if(!n.$ref)return n;if(r.has(n.$ref))return n;r.add(n.$ref);var i,o=n.$ref.split("#"),s=o[0],u=o[1]?"#"+o[1]:"";if(n.$ref.startsWith(this.refs_prefix)){var c=this.refs_with_info[n.$ref];if(!c)return n;var l=this.refs[c.$ref]||this.schema;i=u?this.expandRecursivePointer(l,u):l}else if(s){var h=this.refs[s];if(!h)return n;i=u?this.expandRecursivePointer(h,u):h}else i=u?this.expandRecursivePointer(this.schema,u):this.schema;var p=this.expandSchema(i,e,r);return this.extendSchemas(n,p)}},{key:"expandRefs",value:function(t,e){var r=this,n=a({},t);if(!n.$ref)return n;var i=n.$ref.split("#");if(2===i.length&&!this.refs_with_info[n.$ref]){var o=this.expandRecursivePointer(this.schema,i[1]),s=this.extendSchemas(n,this.expandSchema(o));return delete s.$ref,s}var u=i.length>2?this.refs_with_info["#"+i[1]]:this.refs_with_info[n.$ref];delete n.$ref;var l=u.$ref.startsWith("#")?u.fetchUrl:"",h=this._getRef(l,u);if(this.refs[h]){if(e&&c(this.refs[h],"allOf")){var p=this.refs[h].allOf;Object.keys(p).forEach((function(t){p[t]=r.expandRefs(p[t],!0)}))}}else console.warn("reference:'".concat(h,"' not found!"));return i.length>2?this.extendSchemas(n,this.expandSchema(this.expandRecursivePointer(this.refs[h],i[2]))):this.extendSchemas(n,this.expandSchema(this.refs[h]))}},{key:"expandRecursivePointer",value:function(t,e){var r=t;return e.split("/").slice(1).forEach((function(t){r[t]&&(r=r[t])})),r.$refs&&r.$ref.startsWith("#")?this.expandRecursivePointer(t,r.$ref):r}},{key:"expandSchema",value:function(t){var e=this;Object.entries(this._subSchema1).forEach((function(r){var n=Na(r,2),i=n[0],o=n[1];t[i]&&o.call(e,t)}));var r=a({},t);return Object.entries(this._subSchema2).forEach((function(n){var i=Na(n,2),o=i[0],a=i[1];t[o]&&(r=a.call(e,t,r))})),this.expandRefs(r)}},{key:"_getRef",value:function(t,e){var r=t+e;return this.refs[r]?r:t+decodeURIComponent(e.$ref)}},{key:"_expandSubSchema",value:function(t){var e=this;return Array.isArray(t)?t.map((function(t){return"object"===Fa(t)?e.expandSchema(t):t})):this.expandSchema(t)}},{key:"_manageRecursivePointer",value:function(t,e){Object.keys(t).forEach((function(r){null!==t[r]&&t[r].$ref&&0===t[r].$ref.indexOf("#")&&(t[r].$ref=e+t[r].$ref)}))}},{key:"_getExternalRefs",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n||this._manageRecursivePointer(t,e);var i={},o=function(t){return Object.keys(t).forEach((function(t){i[t]=!0}))};if(t.$ref&&"object"!==Fa(t.$ref)&&(0!==t.$ref.indexOf("#")||!n)){var a=t.$ref,s="";a.indexOf("#")>0&&(a=a.substr(0,a.indexOf("#"))),a!==t.$ref&&(s=t.$ref.substr(t.$ref.indexOf("#")));var u=this.refs_prefix+this.refs_counter++,c=u+s;"#"===t.$ref.substr(0,1)||this.refs[t.$ref]||(i[a]=!0),this.refs_with_info[u]={fetchUrl:e,$ref:a},t.$ref=c}return Object.values(t).forEach((function(t){t&&"object"===Fa(t)&&(Array.isArray(t)?Object.values(t).forEach((function(t){t&&"object"===Fa(t)&&o(r._getExternalRefs(t,e,n))})):t.$ref&&"string"==typeof t.$ref&&t.$ref.startsWith("#")||o(r._getExternalRefs(t,e,n)))})),t.id&&"string"==typeof t.id&&"urn:"===t.id.substr(0,4)?this.refs[t.id]=t:t.$id&&"string"==typeof t.$id&&"urn:"===t.$id.substr(0,4)&&(this.refs[t.$id]=t),i}},{key:"_getFileBase",value:function(t){if(!t)return"/";var e=this.options.ajaxBase;return void 0===e?this._getFileBaseFromFileLocation(t):e}},{key:"_getFileBaseFromFileLocation",value:function(t){var e=t.split("/");return e.pop(),"".concat(e.join("/"),"/")}},{key:"_joinUrl",value:function(t,e){var r=t;return"http://"!==t.substr(0,7)&&"https://"!==t.substr(0,8)&&"blob:"!==t.substr(0,5)&&"data:"!==t.substr(0,5)&&"#"!==t.substr(0,1)&&"/"!==t.substr(0,1)&&(r=e+t),r.indexOf("#")>0&&(r=r.substr(0,r.indexOf("#"))),r}},{key:"_isUniformResourceName",value:function(t){return"urn:"===t.substr(0,4)}},{key:"_hasProtocol",value:function(t){return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//")||t.startsWith("blob:")||t.startsWith("data:")||t.startsWith("#")||t.startsWith("/")}},{key:"_asyncloadExternalRefs",value:(r=Ra(Ia().mark((function t(e,r,n){var i,o,a,s,u,c,l=this,h=arguments;return Ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=h.length>3&&void 0!==h[3]&&h[3],o=this._getExternalRefs(e,r,i),a=0,s=Ia().mark((function t(){var e,r,i,o,s,h,p,f,d,y,m,v,b;return Ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(e=c[u])){t.next=3;break}return t.abrupt("return",0);case 3:if(!l.refs[e]){t.next=5;break}return t.abrupt("return",0);case 5:if(!l._isUniformResourceName(e)){t.next=40;break}if(l.refs[e]="loading",a++,r=l.options.urn_resolver,i=e,"function"==typeof r){t.next=13;break}throw console.log('No "urn_resolver" callback defined to resolve "'.concat(i,'"')),new Error("Must set urn_resolver option to a callback to resolve ".concat(i));case 13:return i.indexOf("#")>0&&(i=i.substr(0,i.indexOf("#"))),t.prev=14,t.next=17,r(i);case 17:o=t.sent,t.prev=18,s=JSON.parse(o),t.next=26;break;case 22:throw t.prev=22,t.t0=t.catch(18),console.log(t.t0),new Error("Failed to parse external ref ".concat(i));case 26:if(!("boolean"!=typeof s&&"object"!==Fa(s)||null===s||Array.isArray(s))){t.next=28;break}throw new Error("External ref does not contain a valid schema - ".concat(i));case 28:return l.refs[e]=s,t.next=31,l._asyncloadExternalRefs(s,e,n);case 31:t.next=37;break;case 33:throw t.prev=33,t.t1=t.catch(14),console.log(t.t1),new Error("Failed to parse external ref ".concat(i));case 37:if("boolean"!=typeof o){t.next=39;break}throw new Error("External ref does not contain a valid schema - ".concat(i));case 39:return t.abrupt("return",0);case 40:if(l.options.ajax){t.next=42;break}throw new Error("Must set ajax option to true to load external ref ".concat(e));case 42:if(a++,p=!1,"function"!=typeof l.options.ajaxUrl||l._hasProtocol(e)||(f=l.options.ajaxUrl(e,n))!==e&&(h=f,p=!0),p||(h=l._joinUrl(e,n)),l.options.ajax_cache_responses&&(y=l.cacheGet(h))&&(d=y),d){t.next=63;break}return t.next=50,new Promise((function(t){var e=new XMLHttpRequest;l.options.ajaxCredentials&&(e.withCredentials=l.options.ajaxCredentials),e.overrideMimeType("application/json"),e.open("GET",h,!0),e.onload=function(){t(e)},e.onerror=function(e){t(void 0)},e.send()}));case 50:if(void 0!==(m=t.sent)){t.next=53;break}throw new Error("Failed to fetch ref via ajax - ".concat(e));case 53:t.prev=53,d=JSON.parse(m.responseText),l.onSchemaLoaded({schema:d,schemaUrl:h}),l.options.ajax_cache_responses&&l.cacheSet(h,d),t.next=63;break;case 59:throw t.prev=59,t.t2=t.catch(53),console.log(t.t2),new Error("Failed to parse external ref ".concat(h));case 63:if(!("boolean"!=typeof d&&"object"!==Fa(d)||null===d||Array.isArray(d))){t.next=65;break}throw new Error("External ref does not contain a valid schema - ".concat(h));case 65:return l.refs[e]=d,v=p?n:l._getFileBaseFromFileLocation(h),p||h===e||(b=h.split("/"),h=("/"===e.substr(0,1)?"/":"")+b.pop()),t.next=70,l._asyncloadExternalRefs(d,h,v);case 70:case"end":return t.stop()}}),t,null,[[14,33],[18,22],[53,59]])})),u=0,c=Object.keys(o);case 5:if(!(u<c.length)){t.next=13;break}return t.delegateYield(s(),"t0",7);case 7:if(0!==t.t0){t.next=10;break}return t.abrupt("continue",10);case 10:u++,t.next=5;break;case 13:if(a){t.next=15;break}return t.abrupt("return",!0);case 15:this.onAllSchemasLoaded();case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})},{key:"onSchemaLoaded",value:function(t){}},{key:"onAllSchemasLoaded",value:function(){}},{key:"extendSchemas",value:function(t,e){var r=this;t=a({},t),e=a({},e);var n={},i=function(t){"string"==typeof t&&(t=[t]),"string"==typeof e.type&&(e.type=[e.type]),e.type&&e.type.length?n.type=t.filter((function(t){return e.type.includes(t)})):n.type=t,1===n.type.length&&"string"==typeof n.type[0]?n.type=n.type[0]:0===n.type.length&&delete n.type};return Object.entries(t).forEach((function(t){var o=Na(t,2),a=o[0],s=o[1];void 0!==e[a]?function(t,o){!function(t,e){return("required"===t||"defaultProperties"===t)&&"object"===Fa(e)&&Array.isArray(e)}(t,o)?"type"!==t||"string"!=typeof o&&!Array.isArray(o)?"object"!==Fa(o)||Array.isArray(o)||null===o?n[t]=o:n[t]=r.extendSchemas(o,e[t]):i(o):n[t]=o.concat(e[t]).reduce((function(t,e){return t.includes(e)||t.push(e),t}),[])}(a,s):n[a]=s})),Object.entries(e).forEach((function(e){var r=Na(e,2),i=r[0],o=r[1];void 0===t[i]&&(n[i]=o)})),n}},{key:"getCacheKey",value:function(t){return["je-cache",t].join("::")}},{key:"getCacheBuster",value:function(){return this.options.ajax_cache_buster||(new Date).toISOString().slice(0,10)}},{key:"cacheSet",value:function(t,e){try{window.localStorage.setItem(this.getCacheKey(t),JSON.stringify({cacheBuster:this.getCacheBuster(),schema:e}))}catch(t){console.error(t)}}},{key:"cacheGet",value:function(t){try{var e=window.localStorage.getItem(this.getCacheKey(t));if(e){var r=JSON.parse(e);if(r.cacheBuster&&r.schema&&r.cacheBuster===this.getCacheBuster())return r.schema;this.cacheDelete(t)}}catch(t){console.error(t)}}},{key:"cacheDelete",value:function(t){window.localStorage.removeItem(this.getCacheKey(t))}}],e&&Da(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}(),Ma={default:function(){return{compile:function(t){var e=t.match(/{{\s*([a-zA-Z0-9\-_ .]+)\s*}}/g),r=e&&e.length;if(!r)return function(){return t};for(var n=[],i=function(t){var r,i,o=e[t].replace(/[{}]+/g,"").trim().split("."),a=o.length;a>1?r=function(e){for(i=e,t=0;t<a&&(i=i[o[t]]);t++);return i}:(o=o[0],r=function(t){return t[o]}),n.push({s:e[t],r})},o=0;o<r;o++)i(o);return function(e){for(var i,o="".concat(t),a=0;a<r;a++)i=n[a],o=o.replace(i.s,i.r(e));return o}}}},ejs:function(){return!!window.EJS&&{compile:function(t){var e=new window.EJS({text:t});return function(t){return e.render(t)}}}},handlebars:function(){return window.Handlebars},hogan:function(){return!!window.Hogan&&{compile:function(t){var e=window.Hogan.compile(t);return function(t){return e.render(t)}}}},lodash:function(){return!!window._&&{compile:function(t){return function(e){return window._.template(t)(e)}}}},markup:function(){return!(!window.Mark||!window.Mark.up)&&{compile:function(t){return function(e){return window.Mark.up(t,e)}}}},mustache:function(){return!!window.Mustache&&{compile:function(t){return function(e){return window.Mustache.render(t,e)}}}},swig:function(){return window.swig},underscore:function(){return!!window._&&{compile:function(t){return function(e){return window._.template(t)(e)}}}}};function Wa(t){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wa(t)}function za(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ha(n.key),n)}}function Ha(t){var e=function(t,e){if("object"!=Wa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Wa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wa(e)?e:e+""}var qa=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find((function(t){return t in document.documentElement})),Ua=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disable_theme_rules:!1};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsoneditor=e,Object.keys(r).forEach((function(t){void 0!==e.options[t]&&(r[t]=e.options[t])})),this.options=r},e=[{key:"getContainer",value:function(){return document.createElement("div")}},{key:"getOptInCheckbox",value:function(t){var e=document.createElement("span"),r=this.getHiddenLabel(t+" opt-in");r.setAttribute("for",t+"-opt-in"),r.textContent=t+"-opt-in";var n=document.createElement("input");return n.setAttribute("type","checkbox"),n.setAttribute("style","margin: 0 10px 0 0;"),n.setAttribute("id",t+"-opt-in"),n.classList.add("json-editor-opt-in"),e.appendChild(n),e.appendChild(r),{label:r,checkbox:n,container:e}}},{key:"getOptInSwitch",value:function(t){return this.getOptInCheckbox()}},{key:"getFloatRightLinkHolder",value:function(){var t=document.createElement("div");return t.classList.add("je-float-right-linkholder"),t}},{key:"getModal",value:function(){var t=document.createElement("div");return t.style.display="none",t.classList.add("je-modal"),t}},{key:"getGridContainer",value:function(){return document.createElement("div")}},{key:"getGridRow",value:function(){var t=document.createElement("div");return t.classList.add("row"),t}},{key:"getGridColumn",value:function(){return document.createElement("div")}},{key:"setGridColumnSize",value:function(t,e){}},{key:"getLink",value:function(t){var e=document.createElement("a");return e.setAttribute("href","#"),e.appendChild(document.createTextNode(t)),e}},{key:"disableHeader",value:function(t){t.style.color="#ccc"}},{key:"disableLabel",value:function(t){t.style.color="#ccc"}},{key:"enableHeader",value:function(t){t.style.color=""}},{key:"enableLabel",value:function(t){t.style.color=""}},{key:"getInfoButton",value:function(t){var e=document.createElement("span");e.innerText="ⓘ",e.classList.add("je-infobutton-icon");var r=document.createElement("span");return r.classList.add("je-infobutton-tooltip"),r.innerText=t,e.onmouseover=function(){r.style.visibility="visible"},e.onmouseleave=function(){r.style.visibility="hidden"},e.appendChild(r),e}},{key:"getFormInputLabel",value:function(t,e){var r=document.createElement("label");return r.appendChild(document.createTextNode(t)),e&&r.classList.add("required"),r}},{key:"getLabelLike",value:function(t,e){var r=document.createElement("b");return r.appendChild(document.createTextNode(t)),e&&r.classList.add("required"),r}},{key:"getHeader",value:function(t,e){var r=document.createElement("span");return"string"==typeof t?r.textContent=t:r.appendChild(t),r.classList.add("je-header"),r}},{key:"getCheckbox",value:function(){var t=this.getFormInputField("checkbox");return t.classList.add("je-checkbox"),t}},{key:"getCheckboxLabel",value:function(t,e){var r=document.createElement("label");return r.appendChild(document.createTextNode(" ".concat(t))),e&&r.classList.add("required"),r}},{key:"getMultiCheckboxHolder",value:function(t,e,r,n){var i=document.createElement("div");return i.classList.add("control-group"),e&&(e.style.display="block",i.appendChild(e),n&&e.appendChild(n)),Object.values(t).forEach((function(t){t.style.display="inline-block",t.style.marginRight="20px",i.appendChild(t)})),r&&i.appendChild(r),i}},{key:"getFormCheckboxControl",value:function(t,e,r){var n=document.createElement("div");return n.appendChild(t),e.style.width="auto",t.insertBefore(e,t.firstChild),r&&n.classList.add("je-checkbox-control--compact"),n}},{key:"getFormRadio",value:function(t){var e=this.getFormInputField("radio");return Object.keys(t).forEach((function(r){return e.setAttribute(r,t[r])})),e.classList.add("je-radio"),e}},{key:"getFormRadioLabel",value:function(t,e){var r=document.createElement("label");return r.appendChild(document.createTextNode(" ".concat(t))),e&&r.classList.add("required"),r}},{key:"getFormRadioControl",value:function(t,e,r,n){var i=document.createElement("div");return i.appendChild(t),e.style.width="auto",t.insertBefore(e,t.firstChild),r&&i.classList.add("je-radio-control--compact"),"div"!==e.tagName.toLowerCase()&&n&&t&&e&&(e.setAttribute("id",n),e.setAttribute("aria-labelledby",n),t.setAttribute("for",n)),i}},{key:"getSelectInput",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("select");return t&&this.setSelectOptions(n,t,[],r),n}},{key:"getSwitcher",value:function(t){var e=this.getSelectInput(t,!1);return e.classList.add("je-switcher"),e}},{key:"getSwitcherOptions",value:function(t){return t.getElementsByTagName("option")}},{key:"setSwitcherOptions",value:function(t,e,r){this.setSelectOptions(t,e,r)}},{key:"setSelectOptions",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ";if(t.innerHTML="",n){var o=document.createElement("option");o.setAttribute("value","_placeholder_"),o.textContent=i,o.setAttribute("disabled",""),o.setAttribute("hidden",""),t.appendChild(o)}for(var a=0;a<e.length;a++){var s=document.createElement("option");s.setAttribute("value",e[a]),s.textContent=r[a]||e[a],t.appendChild(s)}}},{key:"getTextareaInput",value:function(){var t=document.createElement("textarea");return t.classList.add("je-textarea"),t}},{key:"getHiddenLabel",value:function(t){var e=document.createElement("label");return e.textContent=t,e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),e}},{key:"visuallyHidden",value:function(t){t&&t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;")}},{key:"getHiddenText",value:function(t){var e=document.createElement("span");return e.textContent=t,e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),e}},{key:"getRangeInput",value:function(t,e,r,n,i){var o=this.getFormInputField("range");return o.setAttribute("min",t),o.setAttribute("max",e),o.setAttribute("step",r),n&&(n.setAttribute("id",i+"-description"),o.setAttribute("aria-describedby",i+"-description")),o}},{key:"getStepperButtons",value:function(t){var e=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("stepper-down");var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("stepper-up"),t.getAttribute("readonly")&&(r.setAttribute("disabled",!0),n.setAttribute("disabled",!0)),r.textContent="-",n.textContent="+";var i=function(t,e){t.value=Number(e||t.value),t.setAttribute("initialized","1")},o=t.getAttribute("min"),a=t.getAttribute("max");return r.addEventListener("click",(function(){t.getAttribute("initialized")?o?Number(t.value)>Number(o)&&t.stepDown():t.stepDown():i(t,o),s(t,"change")})),n.addEventListener("click",(function(){t.getAttribute("initialized")?a?Number(t.value)<Number(a)&&t.stepUp():t.stepUp():i(t,o),s(t,"change")})),e.appendChild(r),e.appendChild(n),e}},{key:"getRangeOutput",value:function(t){var e=document.createElement("output"),r=function(t){e.value=t.currentTarget.value};return t.addEventListener("change",r,!1),t.addEventListener("input",r,!1),e}},{key:"getRangeControl",value:function(t,e){var r=document.createElement("div");return r.classList.add("je-range-control"),e&&r.appendChild(e),r.appendChild(t),r}},{key:"getFormInputField",value:function(t){var e=document.createElement("input");return e.setAttribute("type",t),e}},{key:"afterInputReady",value:function(t){}},{key:"getFormControl",value:function(t,e,r,n,i){var o=document.createElement("div");return o.classList.add("form-control"),t&&(o.appendChild(t),i&&t.setAttribute("for",i)),"checkbox"!==e.type&&"radio"!==e.type||!t?(n&&t&&t.appendChild(n),o.appendChild(e)):(e.style.width="auto",t.insertBefore(e,t.firstChild),n&&t.appendChild(n)),"div"!==e.tagName.toLowerCase()&&e&&t&&i&&(t.setAttribute("for",i),e.setAttribute("id",i)),"div"!==e.tagName.toLowerCase()&&e&&r&&(r.setAttribute("id",i+"-description"),e.setAttribute("aria-describedby",i+"-description")),r&&o.appendChild(r),o}},{key:"getIndentedPanel",value:function(){var t=document.createElement("div");return t.classList.add("je-indented-panel"),t}},{key:"getTopIndentedPanel",value:function(){var t=document.createElement("div");return t.classList.add("je-indented-panel--top"),t}},{key:"getChildEditorHolder",value:function(){return document.createElement("div")}},{key:"getDescription",value:function(t){var e=document.createElement("p");return window.DOMPurify?e.innerHTML=window.DOMPurify.sanitize(t):e.textContent=this.cleanText(t),e}},{key:"getCheckboxDescription",value:function(t){return this.getDescription(t)}},{key:"getFormInputDescription",value:function(t){return this.getDescription(t)}},{key:"getButtonHolder",value:function(){return document.createElement("span")}},{key:"getHeaderButtonHolder",value:function(){return this.getButtonHolder()}},{key:"getFormButtonHolder",value:function(t){return this.getButtonHolder()}},{key:"getButton",value:function(t,e,r){var n=document.createElement("button");return n.type="button",this.setButtonText(n,t,e,r),n}},{key:"getFormButton",value:function(t,e,r){return this.getButton(t,e,r)}},{key:"setButtonText",value:function(t,e,r,n){for(;t.firstChild;)t.removeChild(t.firstChild);if(r&&(t.appendChild(r),e=" ".concat(e)),!this.jsoneditor.options.iconlib||!this.jsoneditor.options.remove_button_labels||!r){var i=document.createElement("span");i.appendChild(document.createTextNode(e)),t.appendChild(i)}n&&t.setAttribute("title",n)}},{key:"getTableContainer",value:function(){return document.createElement("div")}},{key:"getTable",value:function(){return document.createElement("table")}},{key:"getTableRow",value:function(){return document.createElement("tr")}},{key:"getTableHead",value:function(){return document.createElement("thead")}},{key:"getTableBody",value:function(){return document.createElement("tbody")}},{key:"getTableHeaderCell",value:function(t){var e=document.createElement("th");return e.textContent=t,e}},{key:"getTableCell",value:function(){return document.createElement("td")}},{key:"getErrorMessage",value:function(t){var e=document.createElement("p");return e.style=e.style||{},e.style.color="red",e.appendChild(document.createTextNode(t)),e}},{key:"addInputError",value:function(t,e){t.errmsg.setAttribute("role","alert")}},{key:"removeInputError",value:function(t){}},{key:"addTableRowError",value:function(t){}},{key:"removeTableRowError",value:function(t){}},{key:"getTabHolder",value:function(t){var e=void 0===t?"":t,r=document.createElement("div");return r.innerHTML="<div class='je-tabholder tabs'></div><div class='content' id='".concat(e,"'></div><div class='je-tabholder--clear'></div>"),r}},{key:"getTopTabHolder",value:function(t){var e=void 0===t?"":t,r=document.createElement("div");return r.innerHTML="<div class='tabs je-tabholder--top'></div><div class='je-tabholder--clear'></div><div class='content' id='".concat(e,"'></div>"),r}},{key:"applyStyles",value:function(t,e){Object.keys(e).forEach((function(r){return t.style[r]=e[r]}))}},{key:"closest",value:function(t,e){for(;t&&t!==document;){if(!t[qa])return!1;if(t[qa](e))return t;t=t.parentNode}return!1}},{key:"insertBasicTopTab",value:function(t,e){e.firstChild.insertBefore(t,e.firstChild.firstChild)}},{key:"getTab",value:function(t,e){var r=document.createElement("div");return r.appendChild(t),r.id=e,r.classList.add("je-tab"),r}},{key:"getTopTab",value:function(t,e){var r=document.createElement("div");return r.appendChild(t),r.id=e,r.classList.add("je-tab--top"),r}},{key:"getTabContentHolder",value:function(t){return t.children[1]}},{key:"getTopTabContentHolder",value:function(t){return t.children[1]}},{key:"getTabContent",value:function(){return this.getIndentedPanel()}},{key:"getTopTabContent",value:function(){return this.getTopIndentedPanel()}},{key:"markTabActive",value:function(t){this.applyStyles(t.tab,{opacity:1,background:"white"}),void 0!==t.rowPane?t.rowPane.style.display="":t.container.style.display=""}},{key:"markTabInactive",value:function(t){this.applyStyles(t.tab,{opacity:.5,background:""}),void 0!==t.rowPane?t.rowPane.style.display="none":t.container.style.display="none"}},{key:"addTab",value:function(t,e){t.children[0].appendChild(e)}},{key:"addTopTab",value:function(t,e){t.children[0].appendChild(e)}},{key:"getBlockLink",value:function(){var t=document.createElement("a");return t.classList.add("je-block-link"),t}},{key:"getBlockLinkHolder",value:function(){return document.createElement("div")}},{key:"getLinksHolder",value:function(){return document.createElement("div")}},{key:"createMediaLink",value:function(t,e,r){t.appendChild(e),r.classList.add("je-media"),t.appendChild(r)}},{key:"createImageLink",value:function(t,e,r){t.appendChild(e),e.appendChild(r)}},{key:"getFirstTab",value:function(t){return t.firstChild.firstChild}},{key:"getInputGroup",value:function(t,e){}},{key:"cleanText",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText}},{key:"getDropZone",value:function(t){var e=document.createElement("div");return e.setAttribute("data-text",t),e.classList.add("je-dropzone"),e}},{key:"getUploadPreview",value:function(t,e,r){var n=document.createElement("div");if(n.classList.add("je-upload-preview"),"image"===t.mimeType.substr(0,5)){var i=document.createElement("img");i.src=r,n.appendChild(i)}var o=document.createElement("div");o.innerHTML+="<strong>Name:</strong> ".concat(t.name,"<br><strong>Type:</strong> ").concat(t.type,"<br><strong>Size:</strong> ").concat(t.formattedSize),n.appendChild(o),n.appendChild(e);var a=document.createElement("div");return a.style.clear="left",n.appendChild(a),n}},{key:"getProgressBar",value:function(){var t=document.createElement("progress");return t.setAttribute("max",100),t.setAttribute("value",0),t}},{key:"updateProgressBar",value:function(t,e){t&&t.setAttribute("value",e)}},{key:"updateProgressBarUnknown",value:function(t){t&&t.removeAttribute("value")}}],e&&za(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Ga(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.labelWidget=e.labelWidget||null,Ga.super.call(this,t,e),this.setupLabelElement()}function Ja(t,e){Ja.super.apply(this,arguments),this.label=e.label,this.level=e.level,this.icon=e.icon}function Za(t){Za.super.apply(this,arguments)}function Ya(t){Ya.super.apply(this,arguments)}function Ka(t){Ka.super.apply(this,arguments),this.isToggle=!0}function Xa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xa.super.call(this,e),this.config=e||{},this.config.baseClass="autocomplete",this.input=document.createElement("input"),this.input.type="text",this.input.className="autocomplete-input oo-ui-inputWidget-input",this.dropdown=document.createElement("ul"),this.dropdown.className="autocomplete-dropdown",this.wrapper=document.createElement("div"),this.wrapper.className="oo-ui-textInputWidget",this.wrapper.appendChild(this.input),this.wrapper.appendChild(this.dropdown),this.$element.append(this.wrapper),this.config.baseClass&&(this.wrapper.classList.add(this.config.baseClass),this.dropdown.classList.add("".concat(this.config.baseClass,"-result-list"))),window.Autocomplete&&(this.autocomplete=new window.Autocomplete(this.wrapper,t))}function Qa(t,e){OO.ui.TextInputWidget.call(this,e),OO.ui.mixin.LookupElement.call(this,e),this.autocomplete=t}function ts(t){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ts(t)}function es(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rs(){rs=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new T(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",m={};function v(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(A([])));j&&j!==r&&n.call(j,a)&&(w=j);var _=g.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==ts(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=p;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var c=h(e,r,n);if("normal"===c.type){if(i=n.done?y:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ts(e)+" is not iterable")}return b.prototype=g,i(_,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},k(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new x(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ns(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function is(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){ns(o,n,i,a,s,"next",t)}function s(t){ns(o,n,i,a,s,"throw",t)}a(void 0)}))}}function os(t){"classes"in(t=t||{})||(t.classes=[]),this.config=t,os.super.call(this,t),this.textarea=$('<textarea rows="8">').attr("name",t.name).attr("class","jsonforms-visualeditor toolbarOnTop");var e=this.config.value||"";this.textarea.val(e),this.VEInstance=$("<span>").attr("class","ve-area-wrapper"),this.$element.append(this.VEInstance.append(this.textarea)),this.Editor=null,this.initializing=!1,this.destroyEditor(),this.initialize()}function as(t){return as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},as(t)}function ss(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function us(){us=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new T(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",m={};function v(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(A([])));j&&j!==r&&n.call(j,a)&&(w=j);var _=g.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==as(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=p;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var c=h(e,r,n);if("normal"===c.type){if(i=n.done?y:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(as(e)+" is not iterable")}return b.prototype=g,i(_,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},k(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new x(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function cs(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function ls(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){cs(o,n,i,a,s,"next",t)}function s(t){cs(o,n,i,a,s,"throw",t)}a(void 0)}))}}function hs(t){var e=this;"classes"in(t=t||{})||(t.classes=[]),hs.super.call(this,t),this.el=$("<div>").attr("class","jsonforms-jsoneditor"),this.$element.css("width","100%"),this.$element.append(this.el),this.config=t,this.config.editor=t.editor||{},this.editor=null,this.initializing=!1,this.destroyEditor(),this._resolveEditorReady=null,this._editorReady=new Promise((function(t){e._resolveEditorReady=t})),this.loadEditor().then((function(){e.initialize()}))}function ps(t){return ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ps(t)}function fs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ds(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fs(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=ps(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==ps(a)?a:a+"")in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ys(){ys=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new T(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",m={};function v(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(A([])));j&&j!==r&&n.call(j,a)&&(w=j);var _=g.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==ps(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=p;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var c=h(e,r,n);if("normal"===c.type){if(i=n.done?y:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ps(e)+" is not iterable")}return b.prototype=g,i(_,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},k(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new x(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ms(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function vs(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){ms(o,n,i,a,s,"next",t)}function s(t){ms(o,n,i,a,s,"throw",t)}a(void 0)}))}}function bs(t,e){"classes"in(t=t||{})||(t.classes=[]),bs.super.call(this,t),this.originalEditor=e,this.editor=null,this.initializing=!1,this._editorReady=null,this._resolveEditorReady=null,t.startval=this.originalEditor.getValue(),this.initialize(t)}function gs(t){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(t)}function ws(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Os(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Os(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Os(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function js(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_s(n.key),n)}}function _s(t){var e=function(t,e){if("object"!=gs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gs(e)?e:e+""}function ks(t,e,r){return e=Es(e),function(t,e){if(e&&("object"===gs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xs()?Reflect.construct(e,r||[],Es(t).constructor):e.apply(t,r))}function xs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xs=function(){return!!t})()}function Es(t){return Es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Es(t)}function Ss(t,e){return Ss=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ss(t,e)}OO.inheritClass(Ga,OO.ui.FieldLayout),Ga.prototype.setupLabelElement=function(){var t=this;this.labelWidget?(this.$label=this.labelWidget.$element,this.$header.empty().append(this.$label),this.$label.on("click",(function(){t.fieldWidget.focus&&t.fieldWidget.focus()}))):this.label.match(/^\s*$/)&&this.$header.empty()},OO.inheritClass(Ja,bt(OO.ui.PageLayout)),Ja.prototype.setupOutlineItem=function(){Ja.super.prototype.setupOutlineItem.call(this),this.outlineItem.setLevel(this.level).setLabel(this.label)},OO.inheritClass(Za,OO.ui.OutlineOptionWidget),Za.prototype.toggle=function(t){OO.ui.OutlineOptionWidget.prototype.toggle.call(this,t)},Za.static.levels=16,OO.inheritClass(Ya,bt(OO.ui.BookletLayout)),Ya.prototype.addPages=function(t,e){var r,n,i,o,a=this.stackLayout.getItems(),s=[],u=[];for(r=0,n=t.length;r<n;r++)if(o=(i=t[r]).getName(),Object.prototype.hasOwnProperty.call(this.pages,o)){var c=a.indexOf(this.pages[o]);-1!==c&&c+1<e&&e--,s.push(this.pages[o])}for(s.length&&this.removePages(s),r=0,n=t.length;r<n;r++)if(o=(i=t[r]).getName(),this.pages[i.getName()]=i,this.outlined){var l=new Za({data:o});l.toggle(!1),i.setOutlineItem(l),u.push(l)}return this.outlined&&this.outlineSelectWidget.addItems(u,e),this.stackLayout.addItems(t,e),this.emit("add",t,e),this},OO.inheritClass(Ka,OO.ui.ToggleSwitchWidget),OO.ui.ToggleSwitchWidget.prototype.onClick=function(t){if(!this.isDisabled()&&t.which===OO.ui.MouseButtons.LEFT){var e=!this.value;this.setValue(e),this.emit("toggled",e)}return!1},OO.ui.ToggleSwitchWidget.prototype.onKeyPress=function(t){if(!this.isDisabled()&&(t.which===OO.ui.Keys.SPACE||t.which===OO.ui.Keys.ENTER)){var e=!this.value;return this.setValue(e),this.emit("toggled",e),!1}},OO.inheritClass(Xa,OO.ui.Widget),Xa.prototype.getValue=function(){return this.input.value},Xa.prototype.setValue=function(t){this.input.value=null!=t?t:""},Xa.prototype.destroy=function(){this.autocomplete&&(this.autocomplete=null),this.$element.empty()},r(5746),OO.inheritClass(Qa,OO.ui.TextInputWidget),OO.mixinClass(Qa,OO.ui.mixin.LookupElement),Qa.prototype.getLookupRequest=function(){this.requestCache={};var t=this.getValue(),e=$.Deferred();return this.autocomplete.search(t).then((function(t){e.resolve(t||[])})).catch((function(){e.resolve([])})),e.promise({abort:function(){}})},Qa.prototype.getLookupCacheDataFromResponse=function(t){return t||[]},Qa.prototype.getLookupMenuOptionsFromData=function(t){for(var e=[],r=0;r<t.length;r++){this.autocomplete.getResultValue(t[r]);var n=this.autocomplete.renderResult(t[r],{}),i=new OO.ui.MenuOptionWidget({data:t[r]});i.$element.append(n),e.push(i)}return e},Qa.prototype.onLookupMenuChoose=function(t){var e=t.getData();this.autocomplete.onSubmit&&this.autocomplete.onSubmit(e),this.autocomplete.getResultValue?this.setValue(this.autocomplete.getResultValue(e)):this.setValue(String(e)),this.emit("change",this.getValue())},OO.inheritClass(os,OO.ui.Widget),OO.mixinClass(os,OO.EventEmitter),os.prototype.initialize=is(rs().mark((function t(){var e;return rs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isInitialized()&&!this.initializing){t.next=2;break}return t.abrupt("return",!0);case 2:return this.initializing=!0,t.next=5,this.loadVEForAll();case 5:if(e=this.getNewEditor()){t.next=8;break}throw new Error("VEForAll no editor");case 8:return this.Editor=e,t.next=11,new Promise((function(t){e.initCallbacks.push(t)}));case 11:return t.next=13,this.waitForEditorReady(e);case 13:return t.sent&&this.attachChangeListener(e),this.initializing=!1,t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,this)}))),os.prototype.attachChangeListener=function(t){var e,r=this,n=t.target;n.getSurface().getModel().getDocument().on("transact",(function(){clearTimeout(e),e=setTimeout(is(rs().mark((function e(){var i;return rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.target.$node.addClass("ve-for-all-waiting-for-update"),e.next=4,n.updateContent();case 4:i=r.getValue(),r.emit("change",i),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),r.emit("change",r.getValue());case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),150)}))},os.prototype.waitForEditorReady=function(t){return new Promise((function(e){var r=t.target;r?r.getSurface&&r.getSurface()?e(r):r.once("editor-ready",(function(){e(r)})):e()}))},os.prototype.loadVEForAll=is(rs().mark((function t(){var e;return rs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,mw.loader.using("ext.veforall.main");case 3:if("function"==typeof e.textarea.applyVisualEditor){t.next=5;break}throw new Error("VEForAll jQuery plugin not found");case 5:e.textarea.applyVisualEditor();case 6:case"end":return t.stop()}}),t,this)}))),os.prototype.destroyEditor=function(){if("function"==typeof $.fn.getVEInstances)for(var t=$.fn.getVEInstances(),e=t.length-1;e>=0;e--){var r=t[e];$(r.$node).attr("name")===this.config.name&&(r.destroy(),t.splice(e,1))}},os.prototype.getNewEditor=function(){if(!("getVEInstances"in $.fn))return null;var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return es(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?es(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}($.fn.getVEInstances());try{for(e.s();!(t=e.n()).done;){var r=t.value;if($(r.$node).attr("name")===this.config.name)return r}}catch(t){e.e(t)}finally{e.f()}},os.prototype.getEditor=function(){return this.Editor},os.prototype.isInitialized=function(){var t=this.getEditor();return!!(t&&t.target&&t.target.getSurface&&t.target.getSurface())},os.prototype.getValue=function(){return this.textarea.val()},os.prototype.setValue=function(t){this.textarea.val(t)},OO.inheritClass(hs,OO.ui.Widget),OO.mixinClass(hs,OO.EventEmitter),hs.static.tagName="div",hs.prototype.isInitialized=function(){return null!==this.editor&&!1===this.initializing},hs.prototype.getEditor=ls(us().mark((function t(){return us().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.editor||this.initializing){t.next=2;break}return t.abrupt("return",this.editor);case 2:return t.abrupt("return",this._editorReady);case 3:case"end":return t.stop()}}),t,this)}))),hs.prototype.loadEditor=ls(us().mark((function t(){return us().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initializing){t.next=2;break}return t.abrupt("return");case 2:return this.initializing=!0,t.next=5,mw.loader.using("ext.JsonForms.jsoneditor");case 5:case"end":return t.stop()}}),t,this)}))),hs.prototype.initialize=function(){var t=this;this.config.editor=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ss(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=as(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=as(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==as(a)?a:a+"")in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ss(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({mode:"code",modes:["code","form","text","tree","view","preview"],ace,onChange:function(){t.emit("change",t.editor.getText())}},this.config.editor),this.editor=new JSONEditor(this.el.get(0),this.config.editor),this.initializing=!1,this._resolveEditorReady&&this._resolveEditorReady(this.editor),this.emit("ready",this.editor)},hs.prototype.destroyEditor=function(){this.editor=null},hs.prototype.getValue=function(){if(this.isInitialized())return this.editor.getText()},hs.prototype.setValue=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return}this.editor&&!this.initializing?this.editor.set(t):this.getEditor().then((function(e){e.set(t)}))},OO.inheritClass(bs,OO.ui.Widget),OO.mixinClass(bs,OO.EventEmitter),bs.static.tagName="div",bs.prototype.isInitialized=function(){return null!==this.editor&&!1===this.initializing},bs.prototype.getEditor=vs(ys().mark((function t(){return ys().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.editor||this.initializing){t.next=2;break}return t.abrupt("return",this.editor);case 2:return t.abrupt("return",this._editorReady);case 3:case"end":return t.stop()}}),t,this)}))),bs.prototype.initialize=function(){var t=vs(ys().mark((function t(e){var r,n,i,o=this;return ys().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initializing){t.next=2;break}return t.abrupt("return");case 2:if(this.destroyEditor(),this._editorReady=new Promise((function(t){o._resolveEditorReady=t})),"string"!=typeof e.schema){t.next=13;break}return t.next=7,fetch(mw.util.getUrl(e.schema,{action:"raw"}));case 7:if(!(r=t.sent).ok){t.next=13;break}return t.next=11,r.text();case 11:if(n=t.sent)try{e.schema=JSON.parse(n)}catch(t){console.warn("cannot load",e.schema)}case 13:this.$element.empty(),i=$("<div>").attr("class","jsonforms-jsoneditor"),this.$element.css("width","100%"),this.$element.append(i),this.editor=new JFEditor(i.get(0),ds(ds({},e),{},{startval:e.startVal||{},ajax:!0,ajaxUrl:this.originalEditor.jsoneditor.options.ajaxUrl})),this.editor.on("change",(function(){o.emit("change",o.getValue())})),this.editor.on("ready",(function(){o.initializing=!1,o._resolveEditorReady&&o._resolveEditorReady(o.editor),o.emit("ready",o.editor)}));case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),bs.prototype.destroyEditor=function(){this.editor&&this.editor.destroy(),this.editor=null,this.initializing=!0},bs.prototype.getValue=function(){if(!this.isInitialized()||!this.editor)return"";var t=this.editor.getValue();return null==t?"":"object"===ps(t)?JSON.stringify(t):String(t)},bs.prototype.setValue=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return}this.editor&&!this.initializing?this.editor.setValue(t):this.getEditor().then((function(e){e.setValue(t)}))};var Ps={},Cs=!1;OO.ui.OutlineOptionWidget.static.levels=16;var Ts={oojs:function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ks(this,e,[t,Ps])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ss(t,e)}(e,t),r=e,n=[{key:"append",value:function(t,e){if(t&&e)return t.$element&&(t=t.$element),e.$element&&(e=e.$element),$(t).append(e),e}},{key:"prepend",value:function(t,e){if(t&&e)return t.$element&&(t=t.$element),e.$element&&(e=e.$element),$(t).prepend(e),e}},{key:"closest",value:function(t,e){return $(t).closest(e)[0]||!1}},{key:"first",value:function(t){return $(t).children().first()}},{key:"firstChild",value:function(t){return this.first(t)}},{key:"parent",value:function(t){return $(t).parent()}},{key:"remove",value:function(t){$(t).remove()}},{key:"insertBefore",value:function(t,e){t&&e&&(t.$element&&(t=t.$element),e.$element&&(e=e.$element),$(t).insertBefore(e))}},{key:"setButtonText",value:function(t,e,r,n){t.setLabel(e)}},{key:"toggleDisplay",value:function(t,e){if("string"==typeof t&&(t=document.querySelector(t)),t instanceof jQuery&&(t=t[0]),t){var r=getComputedStyle(t).display;!0===e?t.style.display=t.dataset.display||("none"===r?"block":r):!1===e?(t.dataset.display="none"===r?t.dataset.display||"block":r,t.style.display="none"):"none"===r?t.style.display=t.dataset.display||"block":(t.dataset.display=r,t.style.display="none")}}},{key:"toggle",value:function(t,e){t&&(t.$element&&(t=t.$element),t instanceof OO.ui.Widget?t.toggle(e):this.toggleDisplay(t,e))}},{key:"isVisible",value:function(t){if(t)return t instanceof OO.ui.Widget?t.isVisible():"none"!==t.style.display}},{key:"buttonAction",value:function(t,e,r){t.on("click",(function(){r()}))}},{key:"getTextFromTitle",value:function(t){return t.getLabel()}},{key:"visuallyHidden",value:function(t){t.$element&&(t=t.$element),t&&t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;")}},{key:"getHeader",value:function(t,e){return $("<h"+(null!=e?e:3)+' class="jsonforms-header">').text(t).get(0)}},{key:"updateHeaderText",value:function(t,e){$(t).text(e)}},{key:"getButton",value:function(t,e){return new(bt(OO.ui.ButtonWidget))(t)}},{key:"getFormButton",value:function(t,e,r){return this.getButton({label:t,icon:e,title:r})}},{key:"getFormInputDescription",value:function(t){return this.getDescription(t)}},{key:"getDescription",value:function(t){return t}},{key:"switcherSelectAction",value:function(t,e){t instanceof OO.ui.ButtonSelectWidget?t.on("choose",(function(t,r){e(t)})):t instanceof OO.ui.ButtonMenuSelectWidget&&t.getMenu().on("choose",(function(t,r){e(t)}))}},{key:"switcherSelecItemIndex",value:function(t,e){if(t instanceof OO.ui.ButtonSelectWidget){var r=t.getItems();t.selectItem(r[e])}else if(t instanceof OO.ui.ButtonMenuSelectWidget){var n=t.getMenu().getItems();t.getMenu().selectItem(n[e])}}},{key:"getSwitcher",value:function(t,e,r){var n,i;if(e.name||(e.name="button-menu"),"button-select"===e.name){for(var o in n=new(bt(OO.ui.ButtonSelectWidget))(e.config),i=[],t)i.push(new OO.ui.ButtonOptionWidget({data:o,label:t[o]}));n.addItems(i),n.selectItem(i[0])}else{for(var s in n=new(bt(OO.ui.ButtonMenuSelectWidget))(a({icon:"verticalEllipsis",framed:!1,classes:["jsonforms-switcher"],$overlay:!this.jsoneditor.options.dialog||this.jsoneditor.options.dialog.$overlay},e.config)),i=[],t)i.push(new OO.ui.MenuOptionWidget({data:s,label:t[s]}));n.getMenu().addItems(i),n.getMenu().selectItem(i[0])}return n}},{key:"setSelectOptions",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.setOptions(e.map((function(t,e){var n;return{data:t,label:null!==(n=r[e])&&void 0!==n?n:t}})))}},{key:"getAutocompleteInput",value:function(t,e){return e.name||(e.name="LookupElement"),new(bt("autocomplete"===this.normalizeInputName(e.name)?Xa:Qa))(t,e.config)}},{key:"getSelectInput",value:function(t,e){var r,n=e.config;switch(this.normalizeInputName(e.name)){case"radio":r=OO.ui.RadioSelectInputWidget;break;case"button":r=OO.ui.ButtonSelectWidget;break;default:r=OO.ui.DropdownInputWidget}return new(bt(r))(a({framed:!1,options:t},n))}},{key:"normalizeInputName",value:function(t){if(!t)return"";for(var e=t.toLowerCase(),r=0,n=["oo.ui.","mw.widgets.","inputwidget","multiselect","select","widget"];r<n.length;r++){var i=n[r];e=e.replace(i,"")}return e.replace(/\./g,"")}},{key:"getMultiSelect",value:function(t){var e=this.normalizeInputName(t.name);!e&&Array.isArray(t.config.options)&&t.config.options.length&&(e="menutag");var r=null;switch(e){case"menutag":r=OO.ui.MenuTagMultiselectWidget;break;case"checkbox":r=OO.ui.CheckboxMultiselectInputWidget;break;case"category":r=mw.widgets.CategoryMultiselectWidget;break;case"users":r=mw.widgets.UsersMultiselectWidget;break;case"titles":r=mw.widgets.TitlesMultiselectWidget;break;default:r=OO.ui.TagMultiselectWidget}return new(bt(r))(a({allowArbitrary:!0},t.config))}},{key:"getIndexLayout",value:function(t){return new(bt(OO.ui.IndexLayout))(a({framed:!0,showMenu:!1,expanded:Cs,scrollable:!1,padded:!1,autoFocus:!1},t))}},{key:"createTabLayoutPage",value:function(t,e,r){var n=t instanceof OO.ui.BookletLayout,i=t instanceof OO.ui.IndexLayout;return n||i?n?this.createBookletPage(t,e,r):this.createIndexLayoutPage(t,e,r):(console.warn("Not a BookletLayout or IndexLayout"),!1)}},{key:"createIndexLayoutPage",value:function(t,e,r){var n=function t(e,r){this.name=e,t.super.call(this,e,r)};OO.inheritClass(n,bt(OO.ui.TabPanelLayout)),n.prototype.setupTabItem=function(){this.tabItem.setLabel(this.name)},n.prototype.toggleCloseButton=function(){};var i=new n(e,{label:r,expanded:Cs});return t.addTabPanels([i]),t.setTabPanel(e),i}},{key:"removeLayoutPage",value:function(t,e){var r=t instanceof OO.ui.BookletLayout,n=t instanceof OO.ui.IndexLayout;if(!r&&!n)return console.warn("Not a BookletLayout or IndexLayout"),!1;var i=r?"removePages":"removeTabPanels",o=t[r?"getPage":"getTabPanel"](e);return t[i]([o]),!0}},{key:"refreshTabsLayoutPages",value:function(t,e){var r=t instanceof OO.ui.BookletLayout,n=t instanceof OO.ui.IndexLayout;if(!r&&!n)return console.warn("Not a BookletLayout or IndexLayout"),!1;if(r){t.clearPages();var i,o=ws(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=this.createTabLayoutPage(t,a.title,a.title);this.append(s,a.container)}}catch(t){o.e(t)}finally{o.f()}}else{t.clearTabPanels();var u,c=ws(e);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=this.createTabLayoutPage(t,l.title,l.title);this.append(h,l.container)}}catch(t){c.e(t)}finally{c.f()}}}},{key:"getTabsLayoutSelectedIndex",value:function(t){var e=t instanceof OO.ui.BookletLayout,r=t instanceof OO.ui.IndexLayout;if(!e&&!r)return console.warn("Not a BookletLayout or IndexLayout"),!1;if(e){var n=t.getCurrentPage();return Object.values(t.pages).indexOf(n)}var i=t.getCurrentTabPanel();return Object.values(t.tabPanels).indexOf(i)}},{key:"getTabsContainer",value:function(t){var e=new(bt(OO.ui.PanelLayout))({expanded:Cs,scrollable:!1,framed:!0});return e.$element.append(t.$element),e}},{key:"getBooklet",value:function(t){return new(bt(OO.ui.BookletLayout))(a({outlined:!0,expanded:Cs,scrollable:!1,padded:!1},t))}},{key:"createTreeWidget",value:function(t){return new Ya(a({outlined:!0,expanded:Cs,scrollable:!1,padded:!1},t))}},{key:"createTreePage",value:function(t){return new Ja(t.path,{label:t.key,level:t.depth,expanded:Cs})}},{key:"makeTree",value:function(t,e){var r,n,i=t;i.clearPages(),i.addPages(e),i.setPage((null===(r=e[0])||void 0===r?void 0:r.name)||(null===(n=e[0])||void 0===n?void 0:n.path))}},{key:"createBookletPage",value:function(t,e,r,n){if(!t.pages[e]){var i=new Ja(e,{label:r,expanded:Cs,level:n});return t.addPages([i]),t.setPage(e),i}return t.pages[e]}},{key:"getHeaderButtonHolder",value:function(){return this.getButtonHolder()}},{key:"getButtonHolder",value:function(){return document.createElement("span")}},{key:"getTabContent",value:function(){var t=document.createElement("div");return t.classList.add("je-indented-panel"),t}},{key:"getTabContentHolder",value:function(t){return t.children[1]}},{key:"getTabHolder",value:function(t){var e=void 0===t?"":t,r=document.createElement("div");return r.innerHTML="<div class='je-tabholder tabs'></div><div class='content' id='".concat(e,"'></div><div class='je-tabholder--clear'></div>"),r}},{key:"getContainerOrig",value:function(){return document.createElement("div")}},{key:"getTab_",value:function(t,e){var r=document.createElement("div");return r.appendChild(t),r.id=e,r.classList.add("je-tab"),r}},{key:"addTab_",value:function(t,e){t.children[0].appendChild(e)}},{key:"getChildEditorHolder",value:function(){return document.createElement("div")}},{key:"getLazyButtonHolder",value:function(){return document.createElement("span")}},{key:"getGridColumn",value:function(){return document.createElement("div")}},{key:"treeNavigationFooter",value:function(t,e){return $('<div class="jsonforms-page-nav-footer"></div>')}},{key:"treeNavigationFooterButtons",value:function(t,e){if(e.left){var r=this.getButton({icon:"previous",label:e.left.label});r.classList.add("jsonforms-page-nav-left"),r.on("click",e.left.onClick),this.append(t,r)}if(e.right){var n=this.getButton({icon:"next",label:e.right.label});n.classList.add("jsonforms-page-nav-right"),n.on("click",e.right.onClick),this.append(t,n)}return t}},{key:"createBreadCrumbs",value:function(t){for(var e=this,r=$('<span class="jsonforms-breadcrumbs">'),n=[],i=t;i;)n.push({title:i.getTitle(),key:i.key,path:i.path,depth:i.depth}),i=i.parent;if(!(n.length<2)){n.reverse();var o=n.length-1;return n.forEach((function(t,n){if(n>0&&r.append($('<span class="jsonforms-breadcrumbs-sep">').text(" → ")),n!==o){var i=$("<a>").text(t.title||t.key).addClass("jsonforms-breadcrumbs-link");i.on("click",(function(){e.jsoneditor.treeManager.handleEvent("breadCrumbsSelectPage",t)})),r.append(i)}else r.append($("<span>").text(t.title||t.key).addClass("jsonforms-breadcrumbs-current"))})),r}}},{key:"getIndentedPanel",value:function(){return document.createElement("div")}},{key:"getInfoElementContainer",value:function(){return document.createElement("div")}},{key:"getFormInputFieldOrig",value:function(t){var e=document.createElement("input");return e.setAttribute("type",t),e}},{key:"getCheckbox",value:function(){var t=this.getFormInputFieldOrig("checkbox");return t.classList.add("je-checkbox"),t}},{key:"getCheckbox_",value:function(t){return new(bt(OO.ui.CheckboxInputWidget))(t||{})}},{key:"getFormControlOrig",value:function(t,e,r,n,i){var o=document.createElement("div");return o.classList.add("form-control"),t&&(o.appendChild(t),i&&t.setAttribute("for",i)),"checkbox"!==e.type&&"radio"!==e.type||!t?(n&&t&&t.appendChild(n),o.appendChild(e)):(e.style.width="auto",t.insertBefore(e,t.firstChild),n&&t.appendChild(n)),"div"!==e.tagName.toLowerCase()&&e&&t&&i&&(t.setAttribute("for",i),e.setAttribute("id",i)),"div"!==e.tagName.toLowerCase()&&e&&r&&(r.setAttribute("id",i+"-description"),e.setAttribute("aria-describedby",i+"-description")),r&&o.appendChild(r),o}},{key:"getFormControl",value:function(t,e,r,n,i){var o=this;if(e instanceof OO.ui.Widget){var s=$(t).text()||"";if(!s)return e;var u=a({label:s,align:"top",helpInline:!0,help:new OO.ui.HtmlSnippet(r||""),classes:["jsonforms-formcontrol"]},i.controlOptions.config),c=new OO.ui.FieldLayout(e,u);if(i.options.removable){c.$field.addClass("jsonforms-field-container");var l=new OO.ui.ButtonWidget({icon:"close",classes:[""]});l.on("click",(function(){var t=o.jsoneditor.editors[i.path];console.log("thisEditor",t),t.parent.restoreLazyProperty(t.key)})),c.$field.append([l.$element])}return c}return this.getFormControlOrig(t,e,r,n,this.formname)}},{key:"getFormInputLabel",value:function(t,e){var r=document.createElement("label");return r.appendChild(document.createTextNode(t)),e&&r.classList.add("required"),r}},{key:"getInputGroup",value:function(t,e){if(t){var r=document.createElement("div");r.classList.add("input-group"),r.appendChild(t);var n=document.createElement("div");n.classList.add("input-group-btn"),r.appendChild(n);for(var i=0;i<e.length;i++)n.appendChild(e[i]);return r}}},{key:"insertTableRow",value:function(t){return t.insertRow()}},{key:"insertTableCell",value:function(t){return t.insertCell()}},{key:"getTable",value:function(){return document.createElement("table")}},{key:"getTableRow",value:function(){return document.createElement("tr")}},{key:"getTableHeader",value:function(){return document.createElement("th")}},{key:"getTableCell",value:function(){return document.createElement("td")}},{key:"getFormInputField",value:function(t,e){if(!e)return console.log("getFormInputField",t),void console.warn("no editor");var r=e.inputOptions;"function"==typeof e.isRequired&&(r.config.required=e.isRequired());var n=null;switch("json"!==t||r.name||(r.name="jsoneditor"),t){case"integer":n=OO.ui.NumberInputWidget,r.config.step=1;break;case"number":n=OO.ui.NumberInputWidget;break;case"hidden":n=OO.ui.HiddenInputWidget;break;case"boolean":n=Ka;break;case"datetime-local":case"date-time":case"datetime":n=mw.widgets.datetime.DateTimeInputWidget;break;case"date":n=mw.widgets.DateInputWidget;break;case"textarea":n=OO.ui.MultilineTextInputWidget,r.config=a({autosize:!0,rows:3},r.config);break;default:n=OO.ui.TextInputWidget}if(r.name)switch(this.normalizeInputName(r.name)){case"title":n=mw.widgets.TitleInputWidget;break;case"user":n=mw.widgets.UserInputWidget;break;case"checkbox":n=OO.ui.CheckboxInputWidget,r.config.value=!1;break;case"visualeditor":n=os,r.config.name=e.path;break;case"jsoneditor":n=hs;break;case"jsonforms":n=bs}return n?new(bt(n))(r.config,e):(console.log("getFormInputField",t),void console.warn("constructor is undefined"))}},{key:"addFieldError",value:function(t,e){var r=[];if(e&&r.push(e),!t)return console.log("text",e),void console.warn("no field");"function"==typeof t.setErrors&&t.setErrors(r)}},{key:"addInputError",value:function(t,e){if(!t)return console.warn("addInputError no input"),void console.log("text",e);var r=this.closest(t,".form-control")||t.controlgroup;if(!r)return console.log("addInputError no group"),void console.warn("input",t);t.errmsg?t.errmsg.style.display="block":(t.errmsg=document.createElement("div"),t.errmsg.setAttribute("class","errmsg"),t.errmsg.style=t.errmsg.style||{},t.errmsg.style.color="red",r.appendChild(t.errmsg)),t.errmsg.innerHTML="",t.errmsg.appendChild(document.createTextNode(e)),t.errmsg.setAttribute("role","alert")}},{key:"removeInputError",value:function(t){if(!t)return console.log("text",text),void console.warn("no input");t.style&&(t.style.borderColor=""),t.errmsg&&(t.errmsg.style.display="none")}}],n&&js(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ua)};function As(t){return As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(t)}function Is(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ls(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rs(n.key),n)}}function Rs(t){var e=function(t,e){if("object"!=As(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=As(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==As(e)?e:e+""}var Ns={collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},Bs=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ns;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mapping=r,this.icon_prefix=e},(e=[{key:"getIconClass",value:function(t){return this.mapping[t]?this.icon_prefix+this.mapping[t]:this.icon_prefix+t}},{key:"getIcon",value:function(t){var e,r=this.getIconClass(t);if(!r)return null;var n,i=document.createElement("i");return(e=i.classList).add.apply(e,function(t){if(Array.isArray(t))return Is(t)}(n=r.split(" "))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return Is(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Is(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i}}])&&Ls(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const Fs={".table-responsive .autocomplete-result-list":"position:relative%20!important",".je-float-right-linkholder":"float:right;margin-left:10px",".je-modal":"background-color:white;border:1px%20solid%20black;box-shadow:3px%203px%20black;position:absolute;z-index:10",".je-infobutton-icon":"font-size:16px;font-weight:bold;padding:0.25rem;position:relative;display:inline-block",".je-infobutton-tooltip":"font-size:12px;font-weight:normal;font-family:sans-serif;visibility:hidden;background-color:rgba(50%2C%2050%2C%2050%2C%200.75);margin:0%200.25rem;color:%23fafafa;padding:0.5rem%201rem;border-radius:0.25rem;width:20rem;position:absolute",".je-not-loaded":"pointer-events:none",".je-header":"display:inline-block",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-checkbox":"display:inline-block;width:auto",".je-checkbox-control--compact":"display:inline-block;margin-right:1rem",".je-radio":"display:inline-block;width:auto",".je-radio-control--compact":"display:inline-block;margin-right:1rem",".je-switcher":"background-color:transparent;display:inline-block;font-style:italic;font-weight:normal;height:auto;width:auto;margin-bottom:0;margin-left:5px;padding:0%200%200%203px",".je-textarea":"width:100%25;height:300px;box-sizing:border-box",".je-range-control":"text-align:center",".je-indented-panel":"padding:10px;margin:10px;border:1px%20solid%20%23ccc",".je-indented-panel--top":"padding-left:10px;margin-left:10px",".je-tabholder":"float:left;width:130px",".je-tabholder .content":"margin-left:120px",".je-tabholder--top":"margin-left:10px",".je-tabholder--clear":"clear:both",".je-tab":"border:1px%20solid%20%23ccc;border-width:1px%200%201px%201px;text-align:center;line-height:30px;border-radius:5px;border-bottom-right-radius:0;border-top-right-radius:0;font-weight:bold;cursor:pointer",".je-tab--top":"float:left;border:1px%20solid%20%23ccc;border-width:1px%201px%200px%201px;text-align:center;line-height:30px;border-radius:5px;padding-left:5px;padding-right:5px;border-bottom-right-radius:0;border-bottom-left-radius:0;font-weight:bold;cursor:pointer",".je-block-link":"display:block",".je-media":"width:100%25"};function Ds(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Vs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vs(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Vs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $s(t){var e=this;this.treeWidget=t.treeWidget,this.jsoneditor=t,this.treePages={},this.selectedEditor=null,this.handleEvent=this.handleEvent.bind(this),t.on("change",this.handleEvent.bind(this,"jsoneditorChange")),this.theme=t.theme,this.treeWidget.outlineSelectWidget.on("change",(function(t,e){})),this.treeWidget.outlineSelectWidget.on("choose",(function(t,r){var n=t.data,i=e.selectedEditor.path===n;e.selectedEditor=e.jsoneditor.editors[n],"activeIndex"in e.selectedEditor&&(e.selectedEditor=e.selectedEditor.editors[e.selectedEditor.activeIndex]),e.onChoose(t,i,n,e.selectedEditor.depth)}))}function Ms(t,e){for(var r=0;r<t.length;r++)if(t[r].data===e)return r;return-1}function Ws(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zs(t){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(t)}function Hs(){Hs=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new T(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",m={};function v(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(A([])));j&&j!==r&&n.call(j,a)&&(w=j);var _=g.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==zs(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=p;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var c=h(e,r,n);if("normal"===c.type){if(i=n.done?y:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(zs(e)+" is not iterable")}return b.prototype=g,i(_,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},k(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new x(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function qs(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function Us(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){qs(o,n,i,a,s,"next",t)}function s(t){qs(o,n,i,a,s,"throw",t)}a(void 0)}))}}function Gs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Js(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gs(Object(r),!0).forEach((function(e){var n,i,o;n=t,i=e,o=r[e],(i=Xs(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xs(n.key),n)}}function Ks(t,e,r){return e&&Ys(t.prototype,e),r&&Ys(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xs(t){var e=function(t,e){if("object"!=zs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zs(e)?e:e+""}r(8980),$s.prototype.editorHasPage=function(t){return t in this.treePages},$s.prototype.ensureEditorsPagesConsistency=function(){var t=[];for(var e in this.treePages){var r=this.jsoneditor.editors[e];if(null===r){if(e in this.treeWidget.pages){for(var n in this.jsoneditor.editors)0===n.indexOf(e)&&n in this.treeWidget.pages&&t.push(this.treeWidget.pages[n]);var i=this.orderedPages(),o=this.findIndexByPath(i,e);this.setPage(i[o-1].getName()),this.treePages[e]=null}}else e in this.treeWidget.pages||this.createBookletPage(r)}t.length&&(this.treeWidget.removePages(t),this.attachFooterNavigation()),this.redrawOutline()},$s.prototype.orderedPages=function(){var t,e=[],r=Ds(this.treeWidget.stackLayout.getItems());try{for(r.s();!(t=r.n()).done;){var n=t.value,i=this.treeWidget.pages[n.name];i?e.push(i):console.warn("tree page ".concat(n.name," does not exist"))}}catch(t){r.e(t)}finally{r.f()}return e},$s.prototype.onBreadCrumbsSelectPage=function(t){var e=this.treeWidget.outlineSelectWidget.items[this.findIndexByPath(this.orderedPages(),t.path)];this.setPage(t.path),this.onChoose(e,!1,t.path,t.depth)},$s.prototype.setSelectedEditor=function(t){t.path in this.treeWidget.pages&&(this.selectedEditor=t)},$s.prototype.openParents=function(t,e){for(var r=t[e].level,n=e-1;n>=0;n--){var i=t[n];if(i.level<r&&(i.toggle(!0),i.indicator&&(i.setIndicator("up"),i.data!==this.selectedEditor.path&&i.$element.addClass("jsonforms-outlineitem-selected")),r=i.level),0===r)break}},$s.prototype.recomputeIndicators=function(t){for(var e=0;e<t.length;e++){var r=t[e];if(this.treeWidget.pages[r.data].isLeaf)r.setIndicator(null);else{for(var n=r.level,i=!1,o=e+1;o<t.length&&!(t[o].level<=n);o++)if(t[o].level===n+1&&t[o].isVisible()){i=!0;break}r.setIndicator(i?"up":"down")}}},$s.prototype.onChoose=function(t,e,r,n){this.computeIsLeaf();var i=this.treeWidget.outlineSelectWidget.items,o=!("up"===t.indicator);t.toggle(!0);var a,s=Ds(i);try{for(s.s();!(a=s.n()).done;){var u=a.value;this.treeWidget.pages[u.data].isLeaf?u.setIndicator(null):(u.setIndicator("down"),u.$element.removeClass("jsonforms-outlineitem-selected"))}}catch(t){s.e(t)}finally{s.f()}var c=Ms(i,r);if(-1!==c){for(var l=i.length,h=c+1;h<i.length;h++)if(i[h].level<=n){l=h;break}for(var p=0;p<i.length;p++)if(!(p>=c&&p<l)){var f=i[p];f.level<=n||f.toggle(!1)}if(this.openParents(i,c),this.treeWidget.pages[r].isLeaf)return this.updateToolbarPageIndicator(c),void this.recomputeIndicators(i);if(!e){for(var d=c+1;d<l;d++)i[d].level===n+1&&i[d].toggle(!0);return t.indicator&&(t.setIndicator("up"),t.$element.removeClass("jsonforms-outlineitem-selected")),this.updateToolbarPageIndicator(c),void this.recomputeIndicators(i)}if(!o)for(var y=c+1;y<l;y++){var m=i[y];m.level>n+1&&m.toggle(!1)}for(var v=c+1;v<l;v++){var b=i[v];b.level===n+1&&b.toggle(o)}t.indicator&&(t.setIndicator(o?"up":"down"),t.$element.removeClass("jsonforms-outlineitem-selected")),this.updateToolbarPageIndicator(c),this.recomputeIndicators(i)}},$s.prototype.onChoose_=function(t,e,r,n){this.computeIsLeaf();var i=!("up"===t.indicator);t.toggle(!0);var o,a=this.treeWidget.outlineSelectWidget.items,s=Ds(a);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.treeWidget.pages[u.data].isLeaf?u.setIndicator(null):(u.setIndicator("down"),u.$element.removeClass("jsonforms-outlineitem-selected"))}}catch(t){s.e(t)}finally{s.f()}var c=Ms(a,r);if(-1!==c){for(var l=a.length,h=c+1;h<a.length;h++)if(a[h].level<=n){l=h;break}for(var p=0;p<a.length;p++)if(!(p>=c&&p<l)){var f=a[p];f.level<=n||f.toggle(!1)}if(this.openParents(a,c),this.treeWidget.pages[r].isLeaf)this.updateToolbarPageIndicator(c);else{if(!e){for(var d=c+1;d<l;d++)a[d].level===n+1&&a[d].toggle(!0);return t.indicator&&(t.setIndicator("up"),t.$element.removeClass("jsonforms-outlineitem-selected")),void this.updateToolbarPageIndicator(c)}if(!i)for(var y=c+1;y<l;y++){var m=a[y];m.level>n+1&&(m.toggle(!1),this.treeWidget.pages[m.data].isLeaf||(m.setIndicator("down"),m.$element.removeClass("jsonforms-outlineitem-selected")))}for(var v=c+1;v<l;v++){var b=a[v];b.level===n+1&&b.toggle(i)}t.indicator&&(t.setIndicator(i?"up":"down"),t.$element.removeClass("jsonforms-outlineitem-selected")),this.updateToolbarPageIndicator(c)}}},$s.prototype.postBuildEvent=function(t){t.path in this.treePages&&(!0!==t.options.removable&&!1!==t.options.initial||this.setPage(t.path),t.parent&&"array"===t.parent.options.classname&&(this.theme.prepend(this.treePages[t.path].page,t.array_controls),this.theme.append(this.treePages[t.path].page,t.parent.controls)),"pageFooter"in this.treePages[t.path]||(this.treePages[t.path].pageFooter=this.theme.treeNavigationFooter(),this.theme.append(this.treePages[t.path].page,this.treePages[t.path].pageFooter)))},$s.prototype.updateToolbarPageIndicator=function(t){if(!this.jsoneditor.options.isMetaSchema){var e=Object.values(this.treeWidget.pages).length;this.jsoneditor.toolbar.$actions.empty().append($("<div>").css("padding-right","8px").append($("<span>").text("".concat(t+1," / ").concat(e))))}},$s.prototype.changePage=function(t){var e=this.orderedPages();if(e.length){var r=this.treeWidget.outlineSelectWidget.items,n=this.treeWidget.getCurrentPage().getName(),i=this.findIndexByPath(e,n),o=r[i];this.onChoose(o,!1,n,this.selectedEditor.depth);var a=this.treeWidget.outlineSelectWidget.items,s=(e.length+i+t)%e.length;this.openParents(a,s);var u=e[s].getName();this.selectedEditor=this.jsoneditor.editors[u],o=r[s],this.treeWidget.currentPageName=null,this.treeWidget.setPage(u),this.onChoose(o,!1,u,this.selectedEditor.depth),this.updateToolbarPageIndicator(s)}},$s.prototype.computeIsLeaf=function(){var t=this.orderedPages();function e(e){var r=e.getName()+".";return!t.some((function(t){return t!==e&&"string"==typeof t.getName()&&t.getName().startsWith(r)}))}var r,n=Ds(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.isLeaf=e(i)}}catch(t){n.e(t)}finally{n.f()}},$s.prototype.findIndexByPath=function(t,e){return t.findIndex((function(t){return t.getName()===e}))},$s.prototype.findInsertIndexAtLevel=function(t,e,r){for(var n=e+1;n<t.length;n++)if(t[n].level<r)return n;return t.length},$s.prototype.createBookletPage=function(t){var e,r;if(this.treePages[t.path])e=this.treePages[t.path].page;else{e=this.theme.createTreePage({path:t.path,key:t.getTitle()||t.key,depth:t.depth});var n=this.theme.getChildEditorHolder();this.treePages[t.path]={page:e,container:n},this.theme.append(n,this.theme.createBreadCrumbs(t))}if(t.parent&&this.jsoneditor.editors){var i=this.orderedPages(),o=this.findIndexByPath(i,t.parent.path);r=this.findInsertIndexAtLevel(i,o,t.depth)}this.treeWidget.addPages([e],r)},$s.prototype.createTreePage=function(t,e){if(!this.treePages[t.path])return!(t.parent&&"table"===t.parent.options.classname||t.parent&&!0===t.parent.disableTree||(function(t,e){for(var r=t.parent;r;){if(e(r))return r;r=r.parent}return null}(t,(function(t){return"array"===t.schema.type&&t.isTabsLayout()}))?(t.disableTree=!0,1):(pt(this.jsoneditor.expandSchema,t.schema).every(t.isPrimitive.bind(this))||(this.createBookletPage(t),this.theme.append(this.treePages[t.path].container,e.container),e.container=this.treePages[t.path].container,this.theme.append(this.treePages[t.path].page,this.treePages[t.path].container)),0)))},$s.prototype.setPage=function(t){if(t in this.jsoneditor.editors){var e=this.jsoneditor.editors[t];e?(this.setSelectedEditor(e),this.jsoneditor.treeWidget.setPage(t)):console.warn("TreeManager.setPage editor ".concat(t," is null"))}else console.warn("TreeManager.setPage path ".concat(t," does not exist"))},$s.prototype.handleEvent=function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];switch(t){case"jsoneditorBuildComplete":this.attachFooterNavigation.apply(this,n);break;case"editorConstructor":this.createTreePage.apply(this,n);break;case"objectAdded":n[0];break;case"breadCrumbsSelectPage":this.onBreadCrumbsSelectPage.apply(this,n);break;case"toolbarChangePage":this.changePage.apply(this,n);break;case"postBuildEditor":this.postBuildEvent.apply(this,n);break;case"switchEditor":case"restoreLazyProperty":break;case"jsoneditorChange":clearTimeout(this._consistencyTimer),this._consistencyTimer=setTimeout((function(){e.ensureEditorsPagesConsistency.apply(e,n)}),0)}},$s.prototype.currentPageIndex=function(){var t=this.orderedPages();if(!t.length)return 0;var e=this.treeWidget.getCurrentPage().getName();return this.findIndexByPath(t,e)},$s.prototype.attachFooterNavigation=function(){for(var t=this,e=this.orderedPages(),r=e.length,n=function(){var n=e[i],o=t.treePages[n.name].pageFooter;if(!o||!o.length)return 1;o.empty();var a={};if(i>0){var s=e[i-1],u=t.jsoneditor.editors[s.getName()];a.left={label:null==u?void 0:u.getTitle(),onClick:function(){return t.openPage(s.getName())}}}if(i<r-1){var c=e[i+1],l=t.jsoneditor.editors[c.getName()];a.right={label:null==l?void 0:l.getTitle(),onClick:function(){return t.openPage(c.getName())}}}Object.keys(a).length?(t.theme.toggle(o,!0),t.theme.treeNavigationFooterButtons(o,a)):t.theme.toggle(o,!1)},i=0;i<r;i++)n()},$s.prototype.openPage=function(t){var e=this.treeWidget.outlineSelectWidget.items.find((function(e){return e.data===t}));e&&(this.treeWidget.setPage(t),this.onChoose(e,!1,t,e.level))},$s.prototype.redrawOutline=function(t){var e=this.orderedPages();if(e.length){this.treeWidget.getCurrentPage()||this.setPage("root");var r=this.treeWidget.outlineSelectWidget.items,n=this.treeWidget.getCurrentPage().getName(),i=r[this.findIndexByPath(e,n)],o=this.selectedEditor.path;this.onChoose(i,!1,o,this.selectedEditor.depth)}};var Qs=function(){return Ks((function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Zs(this,t),this.options=r,this._watchers=[],this._events=[],this.$root=$(e).empty(),this.$container=$('<div class="jfeditor-container">'),this.$schemaContainer=$('<div class="jfeditor-schema-selector">'),this.$editorContainer=$('<div class="jfeditor-main-editor">'),this.$container.append(this.$schemaContainer,this.$editorContainer),this.$root.append(this.$container),this._createMainEditor(r.schema),p(r.schema)&&Object.keys(r.schema).length||this._createSchemaSelector(),new Proxy(this,{get:function(t,e){if(e in t)return t[e];if(t.editor&&e in t.editor){var r=t.editor[e];return"function"==typeof r?r.bind(t.editor):r}},set:function(t,e,r){return e in t?(t[e]=r,!0):!!t.editor&&(t.editor[e]=r,!0)}})}),[{key:"_createMainEditor",value:function(t){var e=this;return this.editor&&(this.editor.destroy(),this.editor=null,this.$editorContainer.empty()),this.editor=new tu(this.$editorContainer[0],Js(Js({},this.options),{},{schema:t})),this._watchers.forEach((function(t){var r=t.path,n=t.callback;e.editor.watch(r,n)})),this._events.forEach((function(t){var r=t.event,n=t.callback;e.editor.on(r,n)})),this.editor}},{key:"_createSchemaSelector",value:function(){var t=this;this.schemaEditor=new tu(this.$schemaContainer[0],{schema:{type:"string",title:"select schema",default:"",options:{compact:!1},enumSource:[{source:"jsonSchemasSource",filter:"jsonSchemasFilter",title:"jsonSchemasTitle",value:"jsonSchemasValue"}]}}),this.schemaEditor.on("ready",(function(){t.schemaEditor.watch("root",function(){var e=Us(Hs().mark((function e(r){var n,i,o;return Hs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.getValue()){e.next=3;break}return e.abrupt("return",t._createMainEditor(null));case 3:return e.prev=3,e.next=6,fetch(mw.util.getUrl("JsonSchema:".concat(n),{action:"raw"}));case 6:if((i=e.sent).ok){e.next=9;break}return e.abrupt("return");case 9:return e.t0=JSON,e.next=12,i.text();case 12:e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),t._createMainEditor(o),e.next=20;break;case 17:e.prev=17,e.t2=e.catch(3),console.warn("Cannot load schema",n,e.t2);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}())}))}},{key:"on",value:function(t,e){return this._events.push({event:t,callback:e}),"ready"===t&&this.editor&&this.editor.ready?(e(),this):(this.editor&&this.editor.on(t,e),this)}},{key:"watch",value:function(t,e){return this._watchers.push({path:t,callback:e}),this.editor&&this.editor.watch(t,e),this}},{key:"getStructuredValue",value:function(){var t={};for(var e in this.editor.editors){var r,n=this.editor.editors[e];if(n){if("activeIndex"in n&&(n=n.editors[n.activeIndex]),n.isPrimitive()){for(var i=n.parent;i&&i.switcher;)i=i.parent;var o=i.editors[n.key].getValue();if(o){var a=e.replace(/^root\./,""),s=!1;i&&i.parent&&"array"===(null===(r=i.parent.schema)||void 0===r?void 0:r.type)&&(s=!0),t[a]={value:o,schema:n.schema,pathNoIndex:n.pathNoIndex.replace(/^root\./,""),isArrayValue:s}}}}else console.warn("getStructuredValue editor is null",e)}return t}}])}(),tu=function(){return Ks((function t(e){var r,n,i,o,s=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Zs(this,t),!(e instanceof Element))throw new Error("element should be an instance of Element");this.element=e,this.options=a({},Qs.defaults.options,c),this.ready=!1,this.copyClipboard=null,p(this.options.schema)&&Object.keys(this.options.schema).length||(this.options.schema={type:"object"}),this.options.initialPath?this.schema=(r=this.options.schema,n=this.options.initialPath,i=function(t,e){var r=e.split(".");if(!t||!t.properties||0===r.length)return{};for(var n={type:"object",properties:{}},i=n,o=t,a=0;a<r.length;a++){var s=r[a];if(!o.properties||!o.properties[s])throw new Error('Path "'.concat(e,'" does not exist in schema'));var u=o.properties[s];a===r.length-1?i.properties[s]=u:(i.properties[s]={type:"object",properties:{}},i=i.properties[s],o=u)}return n}(r,n),o=new Set,function t(e){if(e&&"object"===rt(e)){if(e.$ref&&"string"==typeof e.$ref){var r=e.$ref.match(/^#\/definitions\/(.+)$/);r&&o.add(r[1])}for(var n in e)t(e[n])}}(i),r.definitions&&(i.definitions={},o.forEach((function(t){r.definitions[t]&&(i.definitions[t]=r.definitions[t])}))),i):this.schema=this.options.schema,this.original_schema=JSON.parse(JSON.stringify(this.options.schema)),this.uiSchema=this.options.uiSchema,this.template=this.options.template,this.translate=this.options.translate||Qs.defaults.translate,this.translateProperty=this.options.translateProperty||Qs.defaults.translateProperty,this.uuid=0,this.__data={};var l="oojs",h=Qs.defaults.themes[l];if(!h)throw new Error("Unknown theme ".concat(l));this.element.setAttribute("data-theme",l),this.element.classList.add("je-not-loaded"),this.element.classList.remove("je-ready"),this.theme=new h(this);var f=a(Fs,this.getEditorsRules()),d=function(t,e,r){return r?s.addNewStyleRulesToShadowRoot(t,e,r):s.addNewStyleRules(t,e)};if(!this.theme.options.disable_theme_rules){var y=u(this.element);d("default",f,y),void 0!==h.rules&&d(l,h.rules,y)}var m=Qs.defaults.iconlibs[this.options.iconlib||Qs.defaults.iconlib];m&&(this.iconlib=new m),this.root_container=this.theme.getContainer(),this.theme.append(this.element,this.root_container),this.promise=this.load()}),[{key:"load",value:(t=Us(Hs().mark((function t(){var e,r,n,i,o,a,s,u,c,l,h,p,f,d=this;return Hs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.location.origin+document.location.pathname.toString(),(n=new $a(this.options)).onSchemaLoaded=function(t){d.trigger("schemaLoaded",t)},n.onAllSchemasLoaded=function(){d.trigger("allSchemasLoaded")},this.expandSchema=function(t){return n.expandSchema(t)},this.expandRefs=function(t,e){return n.expandRefs(t,e)},i=document.location.toString(),t.next=9,n.load(this.schema,r,i);case 9:o=t.sent,a="paged"===(null===(e=o.options)||void 0===e||null===(e=e.layout)||void 0===e?void 0:e.name),s=this,a&&(this.treeWidget=this.theme.createTreeWidget((null===(u=this.schema.options)||void 0===u||null===(u=u.layout)||void 0===u?void 0:u.config)||{}),this.treeWidget.toggleOutline(!1),this.theme.prepend(this.element,this.treeWidget),c=[{name:"toggle_bookmarks",icon:"eye",title:"toggle bookmarks",onSelect:function(){s.treeWidget.toggleOutline(),this.setActive(!1)}},{name:"previous_page",icon:"arrowPrevious",title:"previous",onSelect:function(){s.treeManager.handleEvent("toolbarChangePage",-1),this.setActive(!1)}},{name:"next_page",icon:"arrowNext",title:"next",onSelect:function(){s.treeManager.handleEvent("toolbarChangePage",1),this.setActive(!1)}}],this.toolbar=yt({actions:!0}).create(c),this.theme.prepend(this.element,this.toolbar.$element),this.treeManager=new $s(this)),l=this.options.custom_validators?{custom_validators:this.options.custom_validators}:{},this.validator=new Zr(this,null,l,Qs.defaults),this.pendingPostBuild=0,h=this.getEditorClass(o),p=h.classname,f=h.editorClass,this.root=this.createEditor(f,{jsoneditor:this,schema:o,required:!0,container:this.root_container,startval:this.options.startval,classname:p}),this.root.preBuild(),this.root.build(),this.root.postBuild(),this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.ready=!0,this.element.classList.remove("je-not-loaded"),this.element.classList.add("je-ready"),window.requestAnimationFrame((function(){d.ready&&(d.validation_results=d.validator.validate(d.root.getValue()),d.root.showValidationErrors(d.validation_results),d.trigger("ready"),d.trigger("change"))}));case 27:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"onBuildComplete",value:function(){this.trigger("buildComplete"),this.treeManager&&this.treeManager.handleEvent("jsoneditorBuildComplete")}},{key:"getValue",value:function(){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.getValue()}},{key:"setValue",value:function(t){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.setValue(t),this}},{key:"validate",value:function(t){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return 1===arguments.length?this.validator.validate(t):this.validation_results}},{key:"on",value:function(t,e){return this.callbacks=this.callbacks||{},this.callbacks[t]=this.callbacks[t]||[],this.callbacks[t].push(e),this}},{key:"off",value:function(t,e){if(t&&e){this.callbacks=this.callbacks||{},this.callbacks[t]=this.callbacks[t]||[];for(var r=[],n=0;n<this.callbacks[t].length;n++)this.callbacks[t][n]!==e&&r.push(this.callbacks[t][n]);this.callbacks[t]=r}else t?(this.callbacks=this.callbacks||{},this.callbacks[t]=[]):this.callbacks={};return this}},{key:"trigger",value:function(t,e){if(this.callbacks&&this.callbacks[t]&&this.callbacks[t].length)for(var r=0;r<this.callbacks[t].length;r++)this.callbacks[t][r].apply(this,[e]);return this}},{key:"setOption",value:function(t,e){if("show_errors"!==t)throw new Error("Option ".concat(t," must be set during instantiation and cannot be changed later"));return this.options.show_errors=e,this.onChange(),this}},{key:"getEditorsRules",value:function(){return Object.values(Qs.defaults.editors).reduce((function(t,e){return e.rules?a(t,e.rules):t}),{})}},{key:"getEditorClass",value:function(t){var e,r=this;if(t=this.expandSchema(t),Qs.defaults.resolvers.find((function(n){return(e=n(t,r))&&Qs.defaults.editors[e]})),!e)throw new Error("Unknown editor for schema ".concat(JSON.stringify(t)));if(!Qs.defaults.editors[e])throw new Error("Unknown editor ".concat(e));if("function"!=typeof Qs.defaults.editors[e])throw new Error("Editor ".concat(e," is not a constructor"));return{classname:e,editorClass:Qs.defaults.editors[e]}}},{key:"createEditor",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new t(e=a({},t.options||{},e),Qs.defaults,r)}},{key:"onChange",value:function(t){var e=this;if(this.ready&&(t&&this.trigger(t.event,t.data),!this.firing_change))return this.firing_change=!0,window.requestAnimationFrame((function(){if(e.firing_change=!1,e.ready){var t=e.root.getValue();e.validation_results=e.validator.validate(t),"never"!==e.options.show_errors?e.root.showValidationErrors(e.validation_results):e.root.showValidationErrors([]),e.trigger("change")}})),this}},{key:"compileTemplate",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qs.defaults.template;if("string"==typeof r){if(!Qs.defaults.templates[r])throw new Error("Unknown template engine ".concat(r));if(!(e=Qs.defaults.templates[r]()))throw new Error("Template engine ".concat(r," missing required library."))}else e=r;if(!e)throw new Error("No template engine set");if(!e.compile)throw new Error("Invalid template engine set");return e.compile(t)}},{key:"getTemplateResult",value:function(t,e){return t(new Proxy(null!=e?e:{},{get:function(t,e){if("symbol"===zs(e))return t[e];var r=t[e];return null==r?"":r}}))}},{key:"_data",value:function(t,e,r){if(3!==arguments.length)return t.hasAttribute("data-jsoneditor-".concat(e))?this.__data[t.getAttribute("data-jsoneditor-".concat(e))]:null;var n;t.hasAttribute("data-jsoneditor-".concat(e))?n=t.getAttribute("data-jsoneditor-".concat(e)):(n=this.uuid++,t.setAttribute("data-jsoneditor-".concat(e),n)),this.__data[n]=r}},{key:"registerEditor",value:function(t){return this.editors=this.editors||{},this.editors[t.path]=t,this}},{key:"unregisterEditor",value:function(t){return this.editors=this.editors||{},this.editors[t.path]=null,this}},{key:"getEditor",value:function(t){if(this.editors)return this.editors[t]}},{key:"watch",value:function(t,e){return this.watchlist=this.watchlist||{},this.watchlist[t]=this.watchlist[t]||[],this.watchlist[t].push(e),this}},{key:"unwatch",value:function(t,e){if(!this.watchlist||!this.watchlist[t])return this;if(!e)return this.watchlist[t]=null,this;for(var r=[],n=0;n<this.watchlist[t].length;n++)this.watchlist[t][n]!==e&&r.push(this.watchlist[t][n]);return this.watchlist[t]=r.length?r:null,this}},{key:"notifyWatchers",value:function(t,e){if(!this.watchlist||!this.watchlist[t])return this;for(var r=0;r<this.watchlist[t].length;r++)this.watchlist[t][r](e)}},{key:"isEnabled",value:function(){return!this.root||this.root.isEnabled()}},{key:"enable",value:function(){this.root.enable()}},{key:"disable",value:function(){this.root.disable()}},{key:"setCopyClipboardContents",value:function(t){this.copyClipboard=t}},{key:"getCopyClipboardContents",value:function(){return this.copyClipboard}},{key:"addNewStyleRules",value:function(t,e){var r=document.querySelector("#theme-".concat(t));r||((r=document.createElement("style")).setAttribute("id","theme-".concat(t)),r.appendChild(document.createTextNode("")),document.head.appendChild(r));for(var n=r.sheet?r.sheet:r.styleSheet,i=this.element.nodeName.toLowerCase();n.cssRules.length>0;)n.deleteRule(0);Object.keys(e).forEach((function(r){var o="default"===t?r:"".concat(i,'[data-theme="').concat(t,'"] ').concat(r);n.insertRule?n.insertRule(o+" {"+decodeURIComponent(e[r])+"}",0):n.addRule&&n.addRule(o,decodeURIComponent(e[r]),0)}))}},{key:"addNewStyleRulesToShadowRoot",value:function(t,e,r){var n=this.element.nodeName.toLowerCase(),i="";Object.keys(e).forEach((function(r){var o="default"===t?r:"".concat(n,'[data-theme="').concat(t,'"] ').concat(r);i+=o+" {"+decodeURIComponent(e[r])+"}\n"}));var o,a=new CSSStyleSheet;a.replaceSync(i),r.adoptedStyleSheets=[].concat(function(t){if(Array.isArray(t))return Ws(t)}(o=r.adoptedStyleSheets)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return Ws(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ws(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a])}},{key:"destroy",value:function(){this.destroyed||this.ready&&(this.schema=null,this.original_schema=null,this.uiSchema=null,this.options=null,this.root.destroy(),this.root_container&&$(this.root_container).remove(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.element.removeAttribute("data-theme"),this.treeManager=null,this.treeWidget&&this.treeWidget.clearPages(),this.editors=[],this.destroyed=!0)}},{key:"showValidationErrors",value:function(t){var e=null!=t?t:this.validate();Object.values(this.editors).forEach((function(t){t&&(t.is_dirty=!0,t.showValidationErrors(e))}))}}]);var t}();Qs.defaults=Aa,Qs.AbstractEditor=I,Qs.AbstractTheme=Ua,Qs.AbstractIconLib=Bs,Object.assign(Qs.defaults.themes,Ts),Object.assign(Qs.defaults.editors,Ea),Object.assign(Qs.defaults.templates,Ma),Object.assign(Qs.defaults.iconlibs,{})})(),n})()));